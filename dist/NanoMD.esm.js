!function(){const t=window,e=document,i=String,n=Boolean,s=Array,o=Object,r=JSON,l=Math,u=URL,a=Node,h=Date,c=Blob,d=parseInt,f=location,p="video/mp4",g="video/quicktime",m=["javascript","js","ts","html","css","xml","json","sql","java","python","ruby","php","cpp","csharp","swift","typescript","kotlin","go","rust","perl","bash"],y=t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)").matches,v="abcdefghijklmnopqrstuvwxyz0123456789";let w=new Map;const A=/\.([\w_-]+)?/gi,b=/\#([\w_-]+)?/i,C=/^\w+(?=[\#\.]*)/i,$=/[\"\']{0,1}([\u0020\u00A0\u0009]*)(mailto\:)?([\u0020\u00A0\u0009]*)(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)([\u0020\u00A0\u0009]*)[\"\']{0,1}/,M=/(\s{1})\\?[\#＃]{1}([\u4e00-\u9fff\u3040-\u30ff\uac00-\ud7a3a-zA-Z0-9_]+)/,_=/[& \<\>\"\']/g,I=/\[([^\]\n]+)?\]\(([^\)\n\u0020\u00A0\u0009]+)([\u0020\u00A0\u0009]*[\"\']([^\)\n]+)[\"\'])?\)/,T=/(\n)(\>\s*\[\!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\n)?(\>[^\n]*(\n)?)+/,k=/\`([^\n\`]*)\`/,x=/^\n|\n$/g,N=/\`{3}(\w*)([\s\S]*?)\s*\`{3}/,D=/((\n([\u0020\u00A0]{4,}|[\u0009]))[^\n]+)+/,E=/\*([^\n\*]*)\*/,S=/\_([^\n\_]*)\_/,P=/^\s|\s$/g,L=/(\n[\u0020\u00A0\u0009]*|\n[\u0020\u00A0\u0009]*>[\u0020\u00A0\u0009]*|\n[\u0020\u00A0\u0009]*([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+)\\?(\#{1,6})[\u0020\u00A0\u0009]+([^\n]+)/,R=/(\n)([^\n]+)\n\={3,}([\u0020\u00A0\u0009]*\n)/,j=/(\n)([^\n]+)\n\-{3,}([\u0020\u00A0\u0009]*\n)/,O=/([\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*)\\?(\#{1,6})[\u0020\u00A0\u0009]+([^\n\|]*)([\u0020\u00A0\u0009]*)/,F=/(\n[\u0020\u00A0\u0009]*)(\*{3,}|\-{3,})([\u0020\u00A0\u0009]*\n)/,H=/\!\[([^\]\n]+)?\]\(([^\)\n\u0020\u00A0\u0009]+)([\u0020\u00A0\u0009]*[\"\']([^\)\n]+)[\"\'])?\)(\(([0-9]+\%?)?[\u0020\u00A0\u0009\*x]+([0-9]+\%?)?([\u0020\u00A0\u0009]+(left|right))?\))?/,z=/^['"].*['"]$/,K=/\n(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+(.+)(\n.*\S.*)*)+/,B=/(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+(.+)(\n.*\S.*)*)+/,U=/^(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]*[^\n]+)/,G=/\={2}([^\n\=]*)\={2}/,Z=/\~{2}([^\n\~]*)\~{2}/,q=/\*{2}([^\n\*]*)\*{2}/,W=/\_{2}([^\n\_]*)\_{2}/,V=/\~([^\n\~]*)\~/,Y=/\^([^\n\^]*)\^/,J=/(\n(?![\{\<])[^\n]+)+/,X=/^(\n?(?![\{\<])[^\n]+)+/,Q=/\.mov$/,tt=/\.mp4$/,et=/[A-Za-z\%]/,it=/[\"\']{0,1}([\u0020\u00A0\u0009]*)(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*))([\u0020\u00A0\u0009]*)[\"\']{0,1}/,nt=/(\<[\u00A0\u0020\u0009\>]*\/?[\u00A0\u0020\u0009\>]*br[\u00A0\u0020\u0009\>]*\/?[\u00A0\u0020\u0009\>]*\>|\n)/,st=/\n/,ot=/\\\!/g,rt=/\\\`/g,lt=/\\\#/g,ut=/\\\*/g,at=/\\\_/g,ht=/\\\~/g,ct=/\\\^/g,dt=/\\\=/g,ft=/\\\</g,pt=/\\\>/g,gt=/\\\[/g,mt=/\\\]/g,yt=/\\\(/g,vt=/\\\)/g,wt=/\$/g,At=/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/,bt="mailto:",Ct="\n",$t="_blank",Mt="startsWith",_t="key",It="stringify",Tt="keys",kt="TEXT_NODE",xt="ELEMENT_NODE",Nt="nodeType",Dt="add",Et="alt",St="appendChild",Pt="as",Lt="auto",Rt="baseOffset",jt="blockquote",Ot="body",Ft="br",Ht="button",zt="charAt",Kt="checked",Bt="checkbox",Ut="childNodes",Gt="children",Zt="class",qt="clearTimeout",Wt="clipboardData",Vt="code",Yt="Color",Jt="color",Xt="content",Qt="contentEditable",te="controls",ee="copy",ie="create",ne="ctrlKey",se="dark",oe="dataset",re="delay",le="display",ue="div",ae="editor",he="em",ce="empty",de="emptyContent",fe="error",pe="float",ge="floor",me="focus",ye="fontFamily",ve="forEach",we="from",Ae="get",be="has",Ce="head",$e="height",Me="hide",_e="href",Ie="id",Te="iframe",ke="img",xe="index",Ne="init",De="inner",Ee="input",Se="insert",Pe="isArray",Le="join",Re="label",je="language",Oe="lastChild",Fe="lazy",He="length",ze="li",Ke="light",Be="link",Ue="list",Ge="loading",Ze="map",qe="mark",We="match",Ve="metaKey",Ye="min",Je="mode",Xe="Name",Qe="name",ti="node",ei="none",ii="number",ni="object",si="offset",oi="ol",ri="outerHTML",li="parent",ui="pd-md-editor",ai="pd-md-viewer",hi="placeholder",ci="pre",di="props",fi="preload",pi="prettyprint",gi="prevent",mi="push",yi="px",vi="querySelector",wi="random",Ai="rel",bi="remove",Ci="replace",$i="click",Mi="script",_i="scroll",Ii="section",Ti="set",ki="slice",xi="source",Ni="span",Di="split",Ei="src",Si="string",Pi="strong",Li="style",Ri="sub",ji="success",Oi="sup",Fi="table",Hi="tag",zi="target",Ki="tbody",Bi="td",Ui="temp",Gi="test",Zi="textContent",qi="th",Wi="thead",Vi="title",Yi="toLowerCase",Ji="toUpperCase",Xi="tr",Qi="trim",tn="type",en="ul",nn="value",sn="video",on="viewer",rn="width",ln="console",un="apply",an="void",hn="vdom",cn="getElementById",dn="crossOrigin",fn="preconnect",pn=Dt+"EventListener",gn="background"+Yt,mn=Zt+Xe,yn=Zt+"List",vn=ie+"DocumentFragment",wn=ie+"Element",An=ie+"TextNode",bn=we+"CharCode",Cn=me+"Background"+Yt,$n=me+"Offset",Mn=me+"Text"+Yt,_n=Ae+"Data",In=Ae+"Selection",Tn=be+"OwnProperty",kn=xe+"Of",xn=De+"HTML",Nn=De+"Text",Dn=Se+"Before",En=ti+Xe,Sn=ti+"Value",Pn="onclick",Ln="onwheel",Rn=li+"Element",jn=li+"Node",On=hi+Yt,Fn=gi+"Default",Hn=gi+"Refresh",zn=vi+"All",Kn=bi+"AllRanges",Bn=_i+"Height",Un=_i+"Sync",Gn=_i+"Top",Zn=Ti+"Attribute",qn=Ti+"Data",Wn=Ti+"End",Vn=Ti+"Start",Yn=Ti+"Timeout",Jn=Hi+Xe,Xn=Hi+"Path",Qn=Hi+"Target";let ts="";const es="@excl@",is="@grave@",ns="@num@",ss="@ast@",os="@lowbar@",rs="@tilde@",ls="@Hat@",us="@equal@",as="@lt@",hs="@gt@",cs="@lsqb@",ds="@rsqb@",fs="@lpar@",ps="@rpar@",gs="@dollar@",ms="&lt;",ys="&gt;",vs="&amp;",ws="&nbsp;",As="&quot;",bs="&apos;",Cs={create:"CREATE",append:"APPEND",replace:"REPLACE",text:"TEXT",prop:"PROP",remove:"REMOVE"};Array[we]({[He]:26},((t,e)=>i[bn](97+e)))[ve](((e,n)=>{let s=n<10,o=n>=10&&n<20,r=n>=20,l=i(n),u=l[zt](l[He]-1),a=i=>{ts+=i?e[Ji]():e,t[(i?"$":"_")+(r?"_":"")+u+(o?"_":"")]=i?e[Ji]():e};a(0),a(1),s&&(ts+=n,t["_"+e]=n)}));t._a,t._b,t._c,t._d,t._e,t._f,t._g,t._h,t._i,t._j;const $s=t._0,Ms=t._1,_s=(t._2,t._3,t._4,t._5,t._6),Is=t._7,Ts=t._8,ks=(t._9,t._0_,t._1_,t._2_,t._3_,t._4_,t._5_,t._6_,t._7_,t._8_),xs=(t._9_,t.__0),Ns=(t.__1,t.__2,t.__3,t.__4,t.__5,t.$0,t.$1,t.$2,t.$3,t.$4,t.$5,t.$6,t.$7,t.$8,t.$9,t.$0_,t.$1_,t.$2_,t.$3_,t.$4_,t.$5_,t.$6_,t.$7_,t.$8_,t.$9_,t.$_0,t.$_1,t.$_2,t.$_3,t.$_4,t.$_5,"https://fonts.googleapis.com"),Ds=Ns+"/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&display=swap",Es="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js",Ss="https://cdn.jsdelivr.net/npm/@pardnchiu/nanomd@1.11.2/dist/NanoMD.css",Ps="NanoMD\nGitHub: https://github.com/pardnchiu/NanoMD\nCreator: Pardn Chiu\nLicense: Proprietary";let Ls;for(let t of[Rs(Be,{[Ai]:fn,[_e]:"https://fonts.gstatic.com",[dn]:""}),Rs(Be,{[Ai]:fn,[_e]:Ns,[dn]:""}),Rs(Be,{[Ai]:fi,[_e]:Ds,[Pt]:Li,[dn]:"anonymous"}),Rs(Be,{[Ai]:"stylesheet",[_e]:Ds}),Rs(Be,{[Ai]:"preconnect",[_e]:"https://cdn.jsdelivr.net"}),Rs(Be,{[Ai]:fi,[_e]:Es,[Pt]:Mi}),Rs(Mi,{[Ei]:Es}),Rs(Be,{[Ai]:fi,[_e]:Ss,[Pt]:Li}),Rs(Be,{[Ai]:"stylesheet",[_e]:Ss})])e[Ce][St](t);function Rs(t="",i,n){const s=((t[We](C)||[])[0]||"")[Qi](),o=((t[We](b)||[])[1]||"")[Qi](),r=(A[Gi](t)?t[We](A):[])[Ze]((t=>t[Ci](/^\./,"")));if(s[He]<1)return;let l,u,a,h=!1;if(t===Ui?(h=!0,l=e[vn]()):l=e[wn](s),91!=Ps[He])return l;o[He]&&(l.id=o);for(let t of r)l[yn][Dt](t);if(null==i&&null!=n&&([i,n]=[n,null]),null!=i&&null!=n)[u,a]=[i,n];else if(null==n)typeof i===Si||typeof i===ii||Array[Pe](i)?a=i:u=i;else if(null==i)return l;if(typeof u===ni&&null!=u)for(const t in u){if(!u[Tn](t))continue;const e=u[t];-1!=[nn,Nn,xn,Zi,Qt][kn](t)?l[t]=e:-1!=[Jt,gn,rn,$e,le,pe][kn](t)?l[Li][t]=e:null!=e&&l[Zn](t,e)}if(null!=a){const t=typeof a===Si,i=typeof a===ii,n=Array[Pe](a);if(t||i){const t=a;s===ke||s===xi?l[Ei]=t:h?l[St](e[An](a)):l[xn]=t}else if(n)for(let t of a){const i=t instanceof Element;typeof t===Si||typeof t===ii?h?l[St](e[An](t)):l[xn]+=t:i&&l[St](t)}}return l}function js(t=""){return t[Ci](_,(t=>({"&":vs," ":ws,"<":ms,">":ys,'"':As,"'":bs}[t])))}function Os(t,e=""){return new RegExp(t,e)}function Fs(t){if(t)return t[mn]===ui||t[En][Yi]()===ue&&t[jn][mn]===ui?t:Fs(t[jn])}function Hs(t){const e=Rs(ue);return e[St](t),e[xn]}function zs(t=""){if((t=t[Qi]())[He]<1)return"";const e=t[We](At)||[];return e[He]>2&&11===e[1][He]?e[1]:""}function Ks(t=""){if((t=t[Qi]())[He]<1)return"";const e=t.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/[\w]+\/|groups\/[\w]+\/videos\/|album\/\d+\/video\/|video\/|)(\d+)/);return e?e[1]:null}function Bs(t,e="",i="",n="",s="",o=""){const r=Us(i),l=n instanceof HTMLElement?n:Rs(i,n);return w[Ti](r,l[ri]),e[Ci](t,s+r+o)}function Us(t=""){let e="{{"+(t[Qi]()||Lt)+"-";return e+=Gs(),e+="}}",w[be](e)?Us(t):e}function Gs(t=64){let e="";for(let i=0;i<t;i++)e+=v[zt](l[ge](36*l[wi]()));return e}function Zs(t=""){let i;for(let e of t[We](Os(T,_s))||[]){const s=e[We](T),o=s[1]||"",r=s[3]||"",l=s[5]||"";i=Rs(jt+(r[He]?"."+r:"")),n(e,r),t=Bs(e,t,jt,i,o,l)}function n(t,e=""){let n=no(t[Qi]()[Ci](/^\>[\u00A0\u0020\u0009]?/,"")[Ci](/\n\>[\u00A0\u0020\u0009]?/g,"\n"))[Di](st);for(let t in n){const o=n[t];i[St](s(o,d(t),e))}}function s(t,n=0,o=""){let r=Rs(Ui);const l=/^[\u00A0\u0020\u0009]*\>[\u00A0\u0020\u0009]?/,u=t[Ci](l,"");if(/\[\!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]/[Gi](t)&&0===n)r[St](Rs(Ni+".hint",[-1!=["NOTE","TIP","IMPORTANT","WARNING","CAUTION"][kn](o)?Rs("span.material-symbols-outlined",{NOTE:"info",TIP:"lightbulb",IMPORTANT:"sms",WARNING:"warning",CAUTION:"error"}[o]||""):null,o])),r[St](Rs(Ft));else if(l[Gi](t)){let t=Rs(jt);t[St](s(u)),r[St](t)}else/^[\u00A0\u0020\u0009]*\{\{/[Gi](t)?r[St](i[St](e[An](t))):r[St](Rs(Ni,t));return r}return t}function qs(t=""){let i;for(let e of t[We](Os(T,_s))||[]){const s=e[We](T),o=s[1]||"",r=s[3]||"",l=s[5]||"";i=Rs(jt+(r[He]?"."+r:"")),n(e,r),t=Bs(e,t,jt,i,o,l)}function n(t,e=""){let n=no(t[Qi]()[Ci](/^\>[\u00A0\u0020\u0009]?/,"")[Ci](/\n\>[\u00A0\u0020\u0009]?/g,"\n"))[Di](st);for(let t in n){const o=n[t];i[St](s(o,d(t),e))}}function s(t,n=0,o=""){let r=Rs(Ui);const l=/^[\u00A0\u0020\u0009]*\>[\u00A0\u0020\u0009]?/,u=t[Ci](l,"");if(l[Gi](t)){let t=Rs(jt);t[St](s(u)),r[St](t)}else/^[\u00A0\u0020\u0009]*\{\{/[Gi](t)?r[St](i[St](e[An](t))):r[St](Rs(Ni,t));return r}return t}function Ws(t=""){let e=[[Vt,k]];for(let i of e){const e=i[0],n=i[1];for(let i of t[We](Os(n,_s))||[]){const s=i[We](n);if(P[Gi](s[1]||""))continue;let o=(s[1]||"")[Qi]();o[He]<1||(e!=Vt?t=t[Ci](i,Rs(e,o)[ri]):(o=js(o),t=Bs(i,t,e,o)))}}return t}function Vs(t){let e=0,i=Rs(oi);for(let n in t){const s=t[n];0===d(n)&&(e=l.floor((s[We](/^\s*/)||[""])[0][He]/4));const o=Os(`^\\s{0,${4*e}}`);i[St](Rs(ze,js(s[Ci](o,""))))}return i}function Ys(t=""){let e=[[Pi,q],[Pi,W],[ks,Z],[qe,G],[he,E],[he,S],[Oi,Y],[Ri,V]];for(let t of e){i(t[0],t[1])}function i(e,i){for(let n of t[We](Os(i,_s))||[]){const s=n[We](i);if(P[Gi](s[1]||""))continue;let o=(s[1]||"")[Qi]();o[He]<1||(e!=Vt?t=t[Ci](n,Rs(e,o)[ri]):(o=js(o),t=Bs(n,t,e,o)))}}return t}function Js(t=""){let e=[[Pi,q],[Pi,W],[ks,Z],[he,E],[he,S]];for(let t of e){i(t[0],t[1])}function i(e,i){for(let n of t[We](Os(i,_s))||[]){const s=n[We](i);if(P[Gi](s[1]||""))continue;let o=(s[1]||"")[Qi]();o[He]<1||(e!=Vt?t=t[Ci](n,Rs(e,o)[ri]):(o=js(o),t=Bs(n,t,e,o)))}}return t}function Xs(t="",e="",n=$t){if(i(e||"")[Qi]()[He]<1)return t;for(let i of t[We](Os(M,_s))||[]){if(i[We](/^\\/))continue;const s=i[We](M);if(s[He]<1)continue;const o=s[1],r=(s[2]||"")[Qi](),l=Us($s);if(r[He]<1)continue;const u=Rs(Ui,[Rs($s+"."+Hi,{[_e]:e+r,[zi]:n===$t?$t:"_self"},r)]);w[Ti](l,Hs(u)),t=t[Ci](i,o+l)}return t}function Qs(t=""){return(()=>{for(let e of t[We](Os(L,_s))||[]){const i=e[We](L);if(i[He]<1)continue;const n=i[1]||"",s=(i[3]||"")[Qi]()[He],o=(i[4]||"")[Qi]();0!=l[Ye](s,o[He])&&(t=Bs(e,t,Is+s,o,n))}})(),(()=>{for(let e of t[We](Os(O,_s))||[]){const i=e[We](O);if(i[He]<1)continue;const n=i[1]||"",s=(i[2]||"")[Qi]()[He],o=(i[3]||"")[Qi](),r=i[4]||"";0!=l[Ye](s,o[He])&&(t=Bs(e,t,Is+s,o,n,r))}})(),(()=>{for(let e of t[We](Os(R,_s))||[]){const i=e[We](R);if(i[He]<1)continue;const n=i[1]||"",s=(i[2]||"")[Qi](),o=i[3]||"";s[He]<1||(t=Bs(e,t,Is+1,s,n,o))}})(),(()=>{for(let e of t[We](Os(j,_s))||[]){const i=e[We](j);if(i[He]<1)continue;const n=i[1]||"",s=(i[2]||"")[Qi](),o=i[3]||"";s[He]<1||(t=Bs(e,t,Is+2,s,n,o))}})(),t}function to(t=""){for(let e of t[We](Os(F,_s))||[]){const i=e[We](F);if(i[He]<1)continue;const n=i[1]||"",s=i[3]||"",o=Us("HR");w[Ti](o,"<hr>"),t=t[Ci](e,n+o+s)}return t}function eo(t=""){const e="this.parentElement.nextElementSibling.style.display='block';this.parentElement.style.display='none'",i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNTkyXzMwNDkpIj4KPHBhdGggZD0iTTEyMCA2MEMxMjAgMjYuODYyOSA5My4xMzcxIDAgNjAgMEMyNi44NjI5IDAgMCAyNi44NjI5IDAgNjBDMCA5My4xMzcxIDI2Ljg2MjkgMTIwIDYwIDEyMEM5My4xMzcxIDEyMCAxMjAgOTMuMTM3MSAxMjAgNjBaIiBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIwLjUiLz4KPHBhdGggZD0iTTg0LjM2MzMgNTYuNTgwM0M4Ni45MzAyIDU4LjEzNzYgODYuOTMwMiA2MS44NjI2IDg0LjM2MzMgNjMuNDE5OUw1MS44MjQ4IDgzLjE2MTJDNDkuMTU5MSA4NC43Nzg2IDQ1Ljc1IDgyLjg1OTQgNDUuNzUgNzkuNzQxNFY0MC4yNTg4QzQ1Ljc1IDM3LjE0MDggNDkuMTU5MSAzNS4yMjE2IDUxLjgyNDggMzYuODM4OUw4NC4zNjMzIDU2LjU4MDNaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI1OTJfMzA0OSI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPg==";function n(t,n,s,o){return Hs(Rs(Ui,[Rs($s,{[Vi]:o,[_e]:n,[zi]:$t},s||n),Rs("section.more",[Rs("img.cover","https://i.ytimg.com/vi/"+t+"/mqdefault.jpg"),Rs("img.icon",{[Pn]:e},i)]),Rs(Te,{[Ge]:Fe,[rn]:"640px",[Ei]:"https://www.youtube.com/embed/"+t,frameborder:0,allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",[le]:ei})]))}function s(t,n,s,o){const r=function(t){const e=`https://vimeo.com/api/v2/video/${t}.json`;let i=null;const n=new XMLHttpRequest;n.open("GET",e,!1);try{n.send(),200===n.status?i=JSON.parse(n.responseText)[0].thumbnail_large:console.error("HTTP 錯誤:",n.status)}catch(t){console.error("無法獲取縮圖:",t)}return i}(t);return Hs(Rs(Ui,[Rs($s,{[Vi]:o,[_e]:n,[zi]:$t},s||n),Rs("section.more",[Rs("img.cover",r),Rs("img.icon",{[Pn]:e},i)]),Rs(Te,{[Ge]:Fe,[rn]:"640px",[Ei]:"https://player.vimeo.com/video/"+t,frameborder:0,allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:"",[le]:ei})]))}return(()=>{for(let e of t[We](Os(I,_s))||[]){const i=e[We](I);if(i[He]<1)continue;const o=(i[1]||"")[Qi](),r=(i[2]||"")[Qi](),u=(i[4]||"")[Qi](),a=(zs(r)||"")[Qi](),h=(Ks(r)||"")[Qi]();if(0!=l[Ye](o[He],r[He]))if(a[He])t=Bs(e,t,ue,n(a,r,o,u));else if(h[He])t=Bs(e,t,ue,s(h,r,o,u));else{const i=Rs($s,{[Vi]:u,[_e]:r,[zi]:$t},o);t=Bs(e,t,$s,i)}}})(),(()=>{for(let e of t[We](Os(it,_s))||[]){if(e[We](z))continue;const i=e[We](it);if(i[He]<1)continue;const o=i[1]||"",r=(i[2]||"")[Qi](),l=i[5]||"",u=(zs(r)||"")[Qi](),a=(Ks(r)||"")[Qi]();if(!(r[He]<1))if(u[He])t=Bs(e,t,ue,n(u,r),o,l);else if(a[He])t=Bs(e,t,ue,s(a,r));else{const i=Rs($s,{[_e]:r,[zi]:$t},r);t=Bs(e,t,$s,i,o,l)}}})(),(()=>{for(let e of t[We](Os($,_s))||[]){if(e[We](z))continue;const i=e[We]($);if(i[He]<1)continue;const n=(i[1]||"")+(i[2]||"")+(i[3]||""),s=(i[4]||"")[Qi](),o=i[8]||"";if(s[He]<1)continue;const r=Rs($s,{[_e]:bt+s,[zi]:$t},s);t=Bs(e,t,$s,r,n,o)}})(),t}function io(t=""){return(()=>{for(let e of t[We](Os(I,_s))||[]){const i=e[We](I);if(i[He]<1)continue;const n=(i[1]||"")[Qi](),s=(i[2]||"")[Qi](),o=(i[4]||"")[Qi]();if(0==l[Ye](n[He],s[He]))continue;const r=Rs($s,{[Vi]:o,[_e]:s,[zi]:$t},n);t=Bs(e,t,$s,r)}})(),(()=>{for(let e of t[We](Os(it,_s))||[]){if(e[We](z))continue;const i=e[We](it);if(i[He]<1)continue;const n=i[1]||"",s=(i[2]||"")[Qi](),o=i[5]||"";if(s[He]<1)continue;const r=Rs($s,{[_e]:s,[zi]:$t},s);t=Bs(e,t,$s,r,n,o)}})(),(()=>{for(let e of t[We](Os($,_s))||[]){if(e[We](z))continue;const i=e[We]($);if(i[He]<1)continue;const n=(i[1]||"")+(i[2]||"")+(i[3]||""),s=(i[4]||"")[Qi](),o=i[8]||"";if(s[He]<1)continue;const r=Rs($s,{[_e]:bt+s,[zi]:$t},s);t=Bs(e,t,$s,r,n,o)}})(),t}function no(t=""){for(let i of t[We](Os(K,_s))||[])e(i);function e(e){let i;e[Qi]()[Ci](Os(nt,_s),Ct)[Di](nt)[ve](((t,e)=>{const n=t[We](B)||[],s=n[He]<1?null:/\d+\./[Gi]((n[2]||"")[Qi]())?oi:en,o=(t[We](/\s{4}/g)||[])[He];let r=n[He]<1?t[Ci](/^\s*([\-\*\+]|\d+\.)?\s*/g,""):(n[3]||"")[Qi]();if(0===d(e)&&null==s)return;0===d(e)&&(i=Rs(s));let l=i;function u(t,e){if(/^\[\s*(\x)?\s*\]/[Gi](e)){const i=e[Qi]()[We](/^\[\s*(\x)?\s*\]/);e=e[Ci](/^\[\s*(\x)?\s*\]\s*/,"");const n=null!=i[1];t[St](Rs(ze,[Rs(Re,[Rs(Ee,{[tn]:Bt,[Kt]:n?"":null,[Pn]:"return false;"}),Rs(Ni,e)])]))}else t[St](Rs(ze,e))}if(/^\s{0,3}([\-\*\+]|\d+\.)/[Gi](t))u(l,r);else if(/^\s{4,}([\-\*\+]|\d+\.)/[Gi](t)){l=i[Oe];for(let t=0;t<o&&(null!=l&&null!=l[Jn]);t++)if(t==o-1&&l[Jn][Yi]()==ze)if(l[Oe]instanceof HTMLElement&&(l[Oe][Jn][Yi]()==oi||l[Oe][Jn][Yi]()==en))u(l[Oe],r);else if(/^\[\s*(\x)?\s*\]/[Gi](r)){const t=r[Qi]()[We](/^\[\s*(\x)?\s*\]/);r=r[Ci](/^\[\s*(\x)?\s*\]\s*/,"");const e=null!=t[1];l[St](Rs(s,[Rs(ze,[Rs(Re,[Rs(Ee,{[tn]:Bt,[Kt]:e?"":null,[Pn]:"return false;"}),Rs(Ni,r)])])]))}else l[St](Rs(s,[Rs(ze,r)]));else l=l[Oe][Oe]}else{if(null==i)return;for(l=i[Oe];null!=l[Oe];)l=l[Oe];if(l instanceof HTMLElement);else if(/^\{\{(h\d|img|pre)/[Gi](l[Sn]||""));else{for(;l[Rn][Jn][Yi]()!=ze;)l=l[Rn];l[Rn][St](Rs(Ft))}l[Rn][xn]+=r}})),null!=i&&(t=Bs(e,t,Ue,i))}return t}function so(t=""){for(let e of t[We](Os(H,_s))||[]){const i=e[We](H);if(i[He]<1)continue;const n=(i[1]||"")[Qi](),s=(i[2]||"")[Qi](),o=(i[4]||"")[Qi]();let r=(i[6]||"")[Qi](),l=(i[7]||"")[Qi](),u=(i[9]||"")[Qi]();if(s[He]<1)continue;r[He]&&!et[Gi](r)&&(r+=yi),l[He]&&!et[Gi](l)&&(l+=yi);const a=Q[Gi](s),h=tt[Gi](s);let c;c=a?Rs(sn,{[te]:"",[Vi]:o,[rn]:r||null,[$e]:l||null},[Rs(xi,{[tn]:g},s)]):h?Rs(sn,{[te]:"",[Vi]:o,[rn]:r||null,[$e]:l||null},[Rs(xi,{[tn]:p},s)]):Rs(ke,{[Et]:n,[Vi]:o,[rn]:r||null,[$e]:l||null,[pe]:u[He]?u:null},s),null!=c&&(t=Bs(e,t,ke,c))}return t}function oo(t=""){for(let e of t[We](Os(H,_s))||[]){const i=e[We](H);if(i[He]<1)continue;const n=(i[1]||"")[Qi](),s=(i[2]||"")[Qi](),o=(i[4]||"")[Qi]();if(s[He]<1)continue;const r=Q[Gi](s),l=tt[Gi](s);let u;u=r?Rs(sn,{[te]:"",[Vi]:o},[Rs(xi,{[tn]:g},s)]):l?Rs(sn,{[te]:"",[Vi]:o},[Rs(xi,{[tn]:p},s)]):Rs(ke,{[Et]:n,[Vi]:o},s),null!=u&&(t=Bs(e,t,ke,u))}return t}function ro(t=""){for(let e of t[We](Os(N,_s))||[]){const i=e[We](N);if(i[He]<1)continue;const n=null==i[2][We](x),s=n?"":(i[1]||"")[Qi]()[Yi](),o=i[2]||"",r=-1!=m[kn](s),l=o[Ci](x,"")[Di](st);let u;u=n?Rs(Vt+"."+pi,js(o)):Rs(ci+"."+pi,{[Qe]:s},[Rs(Vt+(r?"."+je+"-"+s:""),{[Qe]:s},[Vs(l)]),Rs(Ht+"."+ee)]),t=Bs(e,t,n?Vt:ci,u)}return t}function lo(t=""){for(let e of t[We](Os(D,_s))||[]){const i=e[We](D),n=/<\s*\/?\s*\w+.*?>/i;if(i[He]<1||n.test(e))continue;const s=i[2]||"",o=e[Ci](x,"")[Di](st),r=Rs(ci+"."+pi,[Rs(Vt,[Vs(o)]),Rs(Ht+"."+ee)]);t=Bs(e,t,ci,r,s)}return t}function uo(t=""){let e;function i(t){const e=t[We](/^([\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*)+/)||[],i=t[We](/[\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*$/)||[];return[e[0]||"",i[0]||""]}function n(t){const i=t[Qi]()[Di](st);e=Rs(Ui,[Rs(Fi,[Rs(Wi),Rs(Ki)])]);let n=!0,o=[],r=0;for(let t in i){const l=i[t],u=l[We](/((\s*)\|?((?:.*?\|)*.*)\|?)+/)||[];if(u[He]<1)continue;const a=(u[3]||"")[Qi]()[Ci](/[\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*$/,""),h=/^[\u0020\u00A0\u0009]*\|?([\u0020\u00A0\u0009]*[\-\:]+[\u0020\u00A0\u0009]*\|?)+[\u0020\u00A0\u0009]*$/[Gi](l),c=a[Di](/[\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*/);if(0===d(t)&&(r=c[He]),h){for(let t of l[Ci](/^([\u0020\u00A0\u0009]*\|)|(\|[\u0020\u00A0\u0009]*)$/g,"")[Di](/\|/))/^\-+\:$/[Gi](t[Qi]())?o.push("right"):/^\:\-+\:$/[Gi](t[Qi]())?o.push("center"):o.push("left");const t=[...e.firstChild.firstChild.childNodes[0].childNodes];for(let e in t)t[e].setAttribute("align",o[e]);n=!1}else s(n,c,r,o)}}function s(t=!0,i=[],n=0,s=[]){const o=t?e.firstChild.firstChild:e.firstChild[Oe],r=Rs(Xi);for(let e=0;e<n;e++)r[St](Rs(t?qi:Bi,{align:s[e]},i[e]||""));o[St](r)}return(()=>{const s=/([^\n]*)(?:[\u0020\u00A0\u0009]*\|[^\n]*\|[^\n]*\n)[\u0020\u00A0\u0009]*\|([\u0020\u00A0\u0009\-\:]*\|)+\n(?:[\u0020\u00A0\u0009]*\|[^\n]*\|[^\n]*\n)*/;for(let o of t[We](Os(s,_s))||[])U[Gi](o)||(n(o),t=Bs(o,t,Fi,Hs(e),...i(o)))})(),(()=>{const s=/(([^\n]+\|)*[^\n]+\n)(([\u0020\u00A0\u0009\-\:]+\|)*[\u0020\u00A0\u0009\-\:]+\n)(?:([^\n]+\|)*[^\n]+\n)*/;for(let o of t[We](Os(s,_s))||[])n(o),t=Bs(o,t,Fi,Hs(e),...i(o))})(),t}function ao(t=""){return t=t[Ci](/\n[\u0020\u00A0\u0009]*/g,"\n"),(()=>{for(let e of t[We](Os(X,_s))||[]){const i=e[We](X);if(i[He]<1)continue;const n=i[2]||"",s=(i[0]||"")[Qi]();if(s[He]){const i=Rs(Ui,[Rs("p",s)]),o=Us("p");w[Ti](o,Hs(i)),t=t[Ci](e,n+o)}}})(),(()=>{for(let e of t[We](Os(J,_s))||[]){const i=e[We](J);if(i[He]<1)continue;const n=i[2]||"",s=(i[0]||"")[Qi]();if(s[He]){const i=Rs(Ui,[Rs("p",s)]),o=Us("p");w[Ti](o,Hs(i)),t=t[Ci](e,n+o)}}})(),t}function ho(t=""){t=t[Ci](/^\n*|\n*$/g,"");const e=/(&lt;br&gt;)/g;return e[Gi](t)?t[Ci](e,"\n"):t}function co(t="",e="",i=$t,n=!1){t=t[Ci](ot,es)[Ci](rt,is)[Ci](lt,ns)[Ci](ut,ss)[Ci](at,os)[Ci](ht,rs)[Ci](ct,ls)[Ci](dt,us)[Ci](ft,as)[Ci](pt,hs)[Ci](gt,cs)[Ci](mt,ds)[Ci](yt,fs)[Ci](vt,ps)[Ci](wt,gs)[Ci](/[\u00A0\u0020]/g," ");let s=[ro,Ws,so,oo,eo,io,Ys,Js,Qs,to,uo,Zs,qs,no,lo,Xs,ho,ao];for(let o of s)(!n||o!==ro&&o!==so&&o!==eo&&o!==Ys&&o!==Zs&&o!==Xs)&&(t=o(t,e,i));for(;/\{{2}\w*\-*\w{64}\}{2}/[Gi](t);)for(let e of t[We](/\{{2}\w*\-*\w{64}\}{2}/g)||[]){let i=Os(e);t=t[Ci](i,w[Ae](e))}const o=["h1","h2","h3","h4","h5","h6",Fi,oi,en,ci,jt,"details","hr",Re];for(let e of o){const i=Os(`[  \t]*\\n[  \t]*<${e}`,_s),n=Os(`${e}>[  \t]*\\n[  \t]*`,_s);t=t[Ci](i,`<${e}`)[Ci](n,`${e}>`)}return t=t[Ci](Os(es,_s),"&excl;")[Ci](Os(is,_s),"&grave")[Ci](Os(ns,_s),"&num;")[Ci](Os(ss,_s),"&ast;")[Ci](Os(os,_s),"&lowbar;")[Ci](Os(rs,_s),"&tilde;")[Ci](Os(ls,_s),"&Hat;")[Ci](Os(us,_s),"&equal;")[Ci](Os(as,_s),ms)[Ci](Os(hs,_s),ys)[Ci](Os(cs,_s),"&lsqb;")[Ci](Os(ds,_s),"&rsqb;")[Ci](Os(fs,_s),"&lpar;")[Ci](Os(ps,_s),"&rpar;")[Ci](Os(gs,_s),"&dollar;")[Ci](/([\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*){2,}/g,"<br>")}document.addEventListener("DOMContentLoaded",(t=>{!function(...t){const i=Rs(Mi,`${ln}.log.${un}(${an} 0, ${JSON.stringify(t)});`);e[Ot][St](i),i[bi]()}("%c"+Ps,"line-height: 1.75rem; font-size: 0.875rem;")}));class fo{#t="";#e;#i=!0;#n=!0;#s;#o;#r;#l;#u;#a;#h;deployKey;constructor(s={}){this.#t=(s.defaultContent||"")[Qi]();const o=s[Li]||{},r=i(o[Je]||Lt)[Qi]()[Yi](),l=n(null==o.fill?1:o.fill)?1:0,u=i(o[ye]||"")[Qi]()||"'Roboto Mono', monospace",a=n(null==o.showRow?1:o.showRow)?1:0,h=o.placeholder||{},c=i(h.text||"Type here ..."),d=i(h.color||"#bfbfbf"),f=o.focus||{},p=i(f.backgroundColor||"#0000ff1a"),g=i(f.color||"#0000ffff");e[Ce][St](Rs(Li,`\n.${ui}{font-family: ${u}}\n.${ui}>div[data-focus="1"]{background-color:${p};color:${g};caret-color:${g}}\n.${ui}>div[data-last="1"]:empty::after{content:"${c}";color:${d} !important;caret-color:${g}}`));const m=e[cn](s[Ie]);typeof s[Ie]===Si&&null!=m?(this[Ot]=m,m.classList.add(ui)):this[Ot]=Rs(Ii+"."+ui),this[Ot][oe][Je]=y&&r===Lt||r===se?se:"",this[Ot][oe].fill=l,this[Ot][oe].row=a,this[Ot][oe].pin={1:1,0:0,[!0]:1,[!1]:0}[s.tabPin]||0,this[Ot][oe].wrap={1:1,0:0,[!0]:1,[!1]:0}[s.wrap]||1,this[Ot][oe].saved=1,this[Ot][oe].autosave=null==s.autosave?1:0,this.#h=new go(this[Ot]);const v=this[Ot];if(this.#i=n(null==s.hotKey||s.hotKey),this.#n=n(null==s.autosave||s.autosave),this.#s=s.event||{},null==this.#r&&s[Hn]&&(this.#r=t[pn]("beforeunload",(t=>{t[Fn]()})),e[pn]("keydown",(t=>{("F5"===t[_t]||(t.ctrlKey||t.metaKey)&&{r:1,R:1}[t[_t]])&&t[Fn]()}))),null!=s[Je]){let t=i(s[Je]||Lt)[Qi]()[Yi]();this[Ot][oe][Je]=y&&t===Lt||t===se?se:""}if(null!=s.fillMode){let t=n(s.fillMode)?1:0;this[Ot][oe].fill=t}if(null!=s.showRow){let t=n(s.showRow)?1:0;this[Ot][oe].row=t}if(null!=s[ye]){let t=i(s[ye])[Qi]()||"'Roboto Mono', monospace";e[Ce][St](Rs(Li,`.${ui}{font-family: ${t}}`))}let w=i(s[Cn]||"")[Qi]()||p,A=i(s[Mn]||"")[Qi]()||g;e[Ce][St](Rs(Li,`.${ui}>div[data-focus="1"]{background-color:${w};color:${A}`));let b=i(s[hi]||"")[Qi]()||c,C=i(s[On]||"")[Qi]()||d;e[Ce][St](Rs(Li,`.${ui}>div[data-last="1"]:empty::after{content:"${b}";color:${C}}`)),v.onmousedown=v.onmouseup=v.ontouchend=t=>{if(t.target[Jn][Yi]()!==ue)return t[Fn](),!1;this.#c()},v.oncut=t=>(this.#d(),this.#f((e=>{t[Wt][qn]("text/plain",this.#a.body),v[Gt][this.#a.start][xn]=js(this.#a.left+this.#a.right),this.#p(),this.#g(v[Gt][this.#a.start],this.#a.left[He])})),this.#m(!0,!1),!1),v.onpaste=e=>(this.#d(),this.#f((i=>{const n=((e[Wt]||t[Wt])[_n]("Text")||"")[Di](/\n/),s=n[He],o=s-1,r=s>1,l=this.#a.start+o,u=`${r?"":this.#a.left}${n[o]}`[He],a=n[0],h=r?"":this.#a.right;if(v[Gt][this.#a.start][Nn]=this.#a.left+a+h,this.#p(),r)for(let t=1;t<s;t++){const e=n[t],i=Rs(ue,js(`${e}${t===o?this.#a.right:""}`));i[Pn]=t=>this.#c(),v[Dn](i,v[Gt][this.#a.start+t])}this.#g(v[Gt][l],u,u)})),this.#m(!0,!1),!1),v.oninput=t=>{let e,i;if("deleteCompositionText"===t.inputType){e=this.#u.index,i=this.#u.offset;for(let t of[...v[Gt]]){if(t[En][Yi]()===ue||t[En][Yi]()===Ii)continue;t[bi]();let n=Rs(ue,{"data-index":e+1,index:e+1});n[Pn]=t=>this.#c(),v[Dn](n,v[Gt][e]),this.#g(v[Gt][e],i)}}t.inputType;let n=this.#u.isMulti,s=this.#u.multi.left,o=t.data,r=this.#u.multi.right,l=this.#u.multi.start.offset;this.#c(),n&&(this.#o[Nn]=s+o+r,this.#g(this.#o,l+1)),this.#m(!0,300)},v.onkeydown=t=>!new mo({editor:this,hotKey:this.#i,[Hn]:s[Hn],event:t}).preventDefault,v.onkeyup=t=>{"Meta"!==t.key&&"Control"!==t.key&&(v[Gt]&&1===v[Gt][He]&&v.firstElementChild[En][Yi]()!==ue&&this[Ne](null,!0,!1),this.#c(),/^(Arrow(Up|Left|Down|Right)|CapsLock|Shift|Control|Alt|Clear|Escape|F\d+)$/[Gi](t.key)||this.#n&&this.#y())},v.onblur=t=>{this.#d()},this.init()}get viewer(){return this.#l}set viewer(t){this.#l=t}#v(){let t=Rs("button",[Rs("span.material-symbols-outlined","markdown"),"Markdown"]),i=Rs("button",[Rs("span.material-symbols-outlined","html"),"HTML"]),n=Rs("button",[Rs("span.material-symbols-outlined","cancel"),"Cancel"]),s=Rs("div.nanomd-pop",[Rs("strong","Export"),t,i,n]);t[Pn]=t=>{this.download("md"),s.remove()},i[Pn]=t=>{this.download("html"),s.remove()},n[Pn]=t=>{s.remove()},e[Ot][St](s)}#c(e,i=!1){this.#d(),this.#u=new po(this[Ot],e,i);const n=t[In]();if(n.rangeCount<1)return;const s=n.getRangeAt(0);let o=e||Fs(s.commonAncestorContainer);null!=o&&this.#w(o,this.#u.index||this.#u.multi.end.index)}#f(t){this.#a=new yo(this[Ot],this.#u),t()}#p(){this.#a.removeRows()}#g(i,n,s){const o=this[Ot][zn](ue);for(let t in o){const e=o[t];if(isNaN(d(t)))continue;const i=d(t)+1;e[oe][xe]=i,i===o.length?e[oe].last=1:e[oe].last=0}if(t[In]?t[In]()[ce]?t[In]()[ce]():t[In]()[Kn]&&t[In]()[Kn]():e[In]&&e[In]()[ce](),null==i)return;let r=t[In](),l=e.createRange(),u=n??i[Ut][0][He],a=s??u;l.selectNode(i),i[Ut][0]?(l[Vn](i[Ut][0],u>i[Ut][0][He]?i[Ut][0][He]:u),l[Wn](i[Ut][0],a>i[Ut][0][He]?i[Ut][0][He]:a)):(l[Vn](i,0),l[Wn](i,0)),r.addRange(l),this.#c(i)}#w(t,e){const i=Ii+"."+Ee+"-"+Ht;let n=this[Ot][vi](i);t[oe][me]=1,this[Ot][Dn](n,this[Ot][Gt][e+1]),n[oe][Me]=0,this.#o=t}#d(){if(!this.#o)return;const t=Ii+"."+Ee+"-"+Ht,e=this[Ot][vi](t);this.#o[oe][me]=0,null!=e&&(this[Ot][St](e),e[oe][Me]=1),this.#o=null}#A(t){t=js(t);let e=this.#b;const i=Rs(ue,t);i[Pn]=t=>this.#c(),e[Nn][Qi]()[He]<1?e[xn]=t:this[Ot][St](i),this[Ot][Gn]=this[Ot][Bn],this[on]&&(this[on][Ot][Gn]=this[on][Ot][Bn])}get#b(){let t=this[Ot].lastElementChild;return"SECTION"===t[En]&&(t=t.previousElementSibling),t}#C(t,e){const i=this[Ot][Gt][this.#a.start];i[xn]=js(t),this.#p(),this.#g(i,e)}#$(t,e="",i=""){const n=t[Ve]||t[ne]||e===i;this.#u.check?this.#f((t=>{const s=this.#a.left,o=this.#a.body,r=this.#a.right,l=`${s}${n?`<${i}>`:e}${o}${n?`</${i}>`:e}${r}`[Ci](/\n/g,""),u=l[He]-r[He]-(n?i[He]+3:e[He]);this.#C(l,u),this.#m(!0,this.#n)})):(this.#A(n?`<${i}></${i}>`:`${e}${e}`),this.#g(this.#b,n?i[He]+3:e[He]),this.#m(!0,this.#n))}#M(t){this.#u.check?this.#f((e=>{const i=this.#a.start,n=this.#a.end;for(let e=i;e<=n;e++){const i=this[Ot][Gt][e];i[xn]=js(`${t} ${i[Nn]}`)}const s=this[Ot][Gt][n],o=s[Nn][He];this.#g(s,o),this.#m(!0,this.#n)})):(this.#A(t),this.#g(this.#b,t[He]+1),this.#m(!0,this.#n))}#_(t="",e="",i){if(console.log(t,e,i),this.#u.check)return void this.#f((n=>{const s=this.#a.left,o=this.#a.right,r=`${s}${null==i?"":"!"}[${t||i}](${e}) ${o}`[Ci](/\n/g,""),l=r[He]-o[He]-1;this.#C(r,l),this.#m(!0,this.#n)}));this.#A(`${null==i?"":"!"}[${t||i}](${e})`);const n=this.#b,s=n[Nn][He];this.#g(n,s),this.#m(!0,this.#n)}#m(t,e){this.#c(),this.#h.add(this.#u,t,"number"==typeof e?e:0),this.unsave(),("boolean"==typeof e&&e||null==e)&&this.#y()}#I(t,i){const n=new c([i],{[tn]:"application/octet-stream"}),s=u.createObjectURL(n),o=Rs($s,{href:s,download:`NanoMD-${h.now()}.${t}`});e[Ot][St](o),o[$i]()}#y(){this[Ot][oe].saved=1,null!=this[on]&&this[on][Ne]()}init(t,e=!0,n=!0){if(this[Ot][Qt]=!0,this[Ot][xn]=null,this.#e=new vo({editor:this,autosave:this.#n,event:this.#s}),this[Ot][St](this.#e.body),(t=i(t||this.#t)[Qi]())[He]){this.#t="";const i=t[Ci](/\n*$/,"")[Di](/\n/);for(let t=0;t<i.length;t++){const e=i[t],n=Rs(ue,{"data-index":t+1,"data-last":t===i.length-1?1:0,"data-focus":0},js(e));n[Pn]=t=>this.#c(),this[Ot][St](n)}if(!e)return}else{const t=Rs(ue,{"data-index":1,"data-last":1,"data-focus":0});if(t[Pn]=t=>this.#c(),this[Ot][St](t),!e)return}n&&(this.#c(),this.#h.add(this.#u,!0))}changeMode(t=Ke){this[Ot][oe][Je]=t}selectAll(){this.#d();const t=this[Ot].firstElementChild,e=this.#b,i=window.getSelection(),n=document.createRange();null!=t.firstChild&&(n.setStart(t.firstChild,0),n.setEnd(e.firstChild,e.firstChild.length),i.removeAllRanges(),i.addRange(n))}save(){if(this.#n)if(this.#s[Tn]("save")){if(null==this.#s.save)return!1;this.#s.save(this.text)}else this.#v();else if(this.#y(),this.#s[Tn]("save")){if(null==this.#s.save)return!1;this.#s.save(this.text)}}unsave(){0!==d(this[Ot][oe].saved)&&(this[Ot][oe].saved=0,this[on]&&this[on].unsave())}indent(t){if(9!==t.keyCode)return;const e=this[Ot];return this.#f((t=>{e[Gt][this.#a.start][xn]=js(this.#a.left+"    "+this.#a.right),this.#p();const i=this.#a.left[He]+4;this.#g(e[Gt][this.#a.start],i),this.#m(!0,!1)})),!1}rowIndent(t){const e=this[Ot];return this.#f((t=>{const i=this.#a.start,n=this.#a.end,s=this.#a.start!=this.#a.end;if(this.#d(),s)for(let t=i;t<=n;t++){const i=e[Gt][t][xn];e[Gt][t][xn]=js("    ")+i}else{const t=e[Gt][i][xn];e[Gt][i][xn]=js("    ")+t}const o=e[Gt][i][xn][He];this.#g(e[Gt][this.#a.start],o),this.#m(!0,!1)})),!1}wrap(t){if(13!==t.keyCode)return;const e=this[Ot];return this.#f((t=>{e[Gt][this.#a.start][xn]=js(this.#a.left),this.#p(),e[Rn][Rn][Gn]+=28;const i=Rs(ue,js(this.#a.right));i[Pn]=t=>this.#c(),e[Dn](i,e[Gt][this.#a.start+1]),this.#g(e[Gt][this.#a.start+1],0),this.#m(!0,!1)})),!1}backspace(t){if(8!==t.keyCode)return!1;const e=this[Ot];return this.#f((t=>{if(this.#u.isMulti||this.#u.isSingle)e[Gt][this.#a.start][xn]=js(this.#a.left+this.#a.right),this.#p(),this.#g(e[Gt][this.#a.start],this.#a.left[He]);else if(this.#a.left[He]){const t=this.#a.left[ki](0,this.#a.left[He]-1);e[Gt][this.#a.start][xn]=js(t+this.#a.right),this.#g(e[Gt][this.#a.start],t[He])}else{if(0===this.#a.start)return;e[Gt][this.#a.start-1][xn]+=js(this.#a.right),e[Gt][this.#a.start][bi](),e[Rn][Rn][Gn]-=28;const t=e[Gt][this.#a.start-1][Nn][He]-this.#a.right[He];this.#g(e[Gt][this.#a.start-1],t)}this.#m(!0,!1)})),!1}undo(){this.#d();const t=this.#h.undo();null!=t&&(this[Ne](t[Xt][He]<1?null:t[Xt],!1,!1),this.unsave(),this.#g(this[Ot][Gt][t[xe]],t[si]),this.#n&&this.#y())}redo(){const t=this.#h.redo();null!=t&&(this[Ne](t[Xt],!1,!1),this.unsave(),this.#g(this[Ot][Gt][t[xe]],t[si]),this.#n&&this.#y())}heading(t,e){const i=t[Ve]||t[ne],n=`${new Array(e).fill("#")[Le]("")}${0===e?"":" "}`;this.#u.check?this.#f((t=>{const s=this.#a.left[Ci](/^\s*\#*\s*/,""),o=this.#a.body,r=this.#a.right,l=`${i?`<h${e}>`:n}${s}${o}${r}${i?`</h${e}>`:""}`[Ci](/\n/g,""),u=l[He]-(i?5:0);this.#C(l,u),this.#m(!0,this.#n)})):(this.#A(i?`<h${e}></h${e}>`:n),this.#g(this.#b,n[He]-(i?5:0)),this.#m(!0,this.#n))}bold(t){this.#$(t,"**",Ms)}italic(t){this.#$(t,"*",Ts)}strikethrough(t){this.#$(t,"~~",ks)}underline(t){this.#$(t,xs,xs)}marker(t){this.#$(t,"==",qe)}sup(t){this.#$(t,"^",Oi)}sub(t){this.#$(t,"~",Ri)}code(t){this.#u.check?this.#f((e=>{if(this.#u.isMulti){const t=Rs(ue,"```"),e=Rs(ue,"```");t[Pn]=e[Pn]=t=>this.#c(),this[Ot][Dn](t,this[Ot][Gt][this.#a.end+1]),this[Ot][Dn](e,this[Ot][Gt][this.#a.start]),this.#g(this[Ot][Gt][this.#a.end+1],this[Ot][Gt][this.#a.end+1][Nn][He]),this.#m(!0,this.#n)}else this.#$(t,"`",Vt)})):this.#$(t,"`",Vt)}blockquote(){this.#u.check?this.#f((t=>{for(let t=this.#a.start;t<=this.#a.end;t++){const e=this[Ot][Gt][t];e[xn]=js(`> ${e[Nn]}`)}const e=this[Ot][Gt][this.#a.end],i=e[Nn][He];this.#g(e,i),this.#m(!0,this.#n)})):(this.#A("> "),this.#g(this.#b,2),this.#m(!0,this.#n))}ul(){this.#M("-")}ol(){this.#M("1.")}link(t="",e=""){e[Qi]()[He]<1&&t[Qi]()[He]<1||this.#_(t,e)}image(t="",e="",i=""){t[Qi]()[He]<1||this.#_(i,t,e)}clear(){this.init(),this.#y()}download(t="md"){const e={md:"md",html:"html"}[t[Yi]()];if(null==e)return;let i="https://cdn.jsdelivr.net/npm/@pardnchiu/nanomd@1.11.2/dist/NanoMD-output.css";const n="md"===e?this.text[Qi]():`<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>NanoMD 輸出</title><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preload" href="${i}" as="style"><link rel="stylesheet" href="${i}"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" as="style"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" /><script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"><\/script></head><body><section class="pd-md-viewer">${co(`\n${this.text}\n`)}</section></body></html>`;this.#I(e,n)}openfile(t){if(null==t)return void alert("請選擇檔案");this.clear();const e=new FileReader;e.readAsText(t),e.onload=()=>{this[Ot][xn]=null;const t=e.result[Qi]()[Ci](/[\u0020\u00A0]/g," ");this.init(t,!1),this.#y()}}get text(){return[...this[Ot][Gt]].map((t=>"SECTION"===t[En]?"":t[Nn]))[Le]("\n")}goBack(){this.undo()}goForward(){this.redo()}addHeading(t,e){this.heading(t,e)}addBold(t){this.bold(t)}addItalic(t){this.italic(t)}addStrikethrough(t){this.strikethrough(t)}addUnderline(t){this.underline(t)}addMarker(t){this.marker(t)}addSup(t){this.sup(t)}addSub(t){this.sub(t)}addCode(t){this.code(t)}addBlockquote(){this.blockquote()}addUl(){this.ul()}addOl(){this.ol()}addLink(t="",e=""){this.link(t,e)}addImage(t="",e="",i=""){this.image(t,e,i)}downloadMd(){this.download("md")}downloadHtml(){this.download("html")}getTxt(){return this.text}}t.PDMarkdownEditor=t.MDEditor=fo;class po{check=!1;isMulti=!1;isSingle=!0;index;offset;left;right;selection={};multi={};constructor(e,i,s=!1){const o=t[In]();if(o.rangeCount<1)return;const r=o.getRangeAt(0);let l=i||Fs(r.commonAncestorContainer);if(null==l)return;let u,a,h="";if(s){l=e;const t=l[zn](ue);for(let e=0;e<t.length;e++){const i=t[e];h+=(0==e?"":"\n")+i[Nn]}u=0,a=t[He]-1}else r.cloneContents()[Ut][ve](((t,e)=>{h+=(0==e?"":"\n")+t[Nn]})),l===e&&(u=d(Fs(o.baseNode)[oe][xe])-1,a=d(Fs(o.focusNode)[oe][xe])-1);var c=n(l===e),f=!c&&!s&&n(o[Rt]!==o[$n]),p=!!s||n(o[$n]>o[Rt]),g=!!s||n(u<a);this.check=!0,this.index=c?null:d(l[oe][xe])-1,this.offset=c||f?null:d(o[$n]),this.left=c||f?null:l[Nn][ki](0,o[$n]),this.right=c||f?null:l[Nn][ki](o[$n],l[Nn][He]),this.isSingle=f,this.isMulti=c;const m=f?p?o[Rt]:o[$n]:null,y=f?p?o[$n]:o[Rt]:null;this.selection={body:f?o.toString():h,start:m,end:y,left:f?l[Nn][ki](0,m):null,right:f?l[Nn][ki](y,l[Nn][He]):null};const v=c?g?u:a:null,w=s?0:c?g?o[Rt]:o[$n]:null,A=c?g?a:u:null,b=s?e[Gt][a][Nn][He]:c?g?o[$n]:o[Rt]:null;this.multi={start:{index:v,offset:w},end:{index:A,offset:b},left:s?"":c?l[Gt][v][Nn][ki](0,w):null,right:s?"":c?l[Gt][A][Nn][ki](b,l[Nn][He]):null}}}class go{#T;#k;#x=[];#N=[];constructor(t){this.#T=t}add(t,e,i){clearInterval(this.#k),null==i?this.#D(t,e):this.#k=setTimeout((i=>{this.#D(t,e)}),i)}#D(t,e){this.#x[mi]({[xe]:t[xe],[si]:t[si],[Xt]:[...this.#T[Gt]].filter((t=>"DIV"==t.nodeName)).map((t=>t[Nn]))[Le]("\n")}),e&&(this.#N=[])}undo(){const t=this.#x[(this.#x||[])[He]-2];if(null==t)return;let e=this.#x.pop();return this.#N[mi](e),t}redo(){const t=this.#N.pop();if(null!=t)return this.#x[mi](t),t}}class mo{#T;#s;#i=!1;preventDefault=!0;#E={"cmd+meta":1};#S={"cmd+b":(t,e)=>t.bold(e),"cmd+i":(t,e)=>t.italic(e),"cmd+shift+x":(t,e)=>t.strikethrough(e),"cmd+u":(t,e)=>t.underline(e),"cmd+m":(t,e)=>t.marker(e),"cmd+k":(t,e)=>t.code(e),"cmd+arrowup":(t,e)=>t.sup(e),"cmd+arrowdown":(t,e)=>t.sub(e)};#P={"cmd+shift+z":(t,e)=>t.redo(),"cmd+r":()=>{},f5:()=>{},"cmd+z":(t,e)=>t.undo(),"cmd+a":(t,e)=>(t.selectAll(),!1),"cmd+s":(t,e)=>(t.save(),!1),tab:(t,e)=>t.indent(e),"cmd+]":(t,e)=>t.rowIndent(e),enter:(t,e)=>t.wrap(e),backspace:(t,e)=>t.backspace(e)};constructor(t={}){this.#T=t[ae],this.#s=t.event,this.#i=t.hotKey;const e=this.#L(this.#s);if(!this.#E[Tn](e)){if(this.#i&&this.#S[Tn](e)){if(!1===this.#S[e](this.#T,this.#s))return;return this.#T[Ot][oe].saved=0,void(this.#T[on]&&(this.#T[on][Ot][oe].saved=0))}if(this.#P[Tn](e)){if(!1===this.#P[e](this.#T,this.#s))return;return this.#T[Ot][oe].saved=0,void(this.#T[on]&&(this.#T[on][Ot][oe].saved=0))}this.preventDefault=!1}}#L(t){let e="";return(t.metaKey||t.ctrlKey)&&(e+="cmd+"),t.shiftKey&&(e+="shift+"),e+=t.key[Yi](),e}}class yo{editor;body;start;end;left;right;constructor(t,e){let i,n,s,o;this.editor=t,e.isMulti?(i=e.multi.start.index,n=e.multi.end.index,s=e.multi.left,o=e.multi.right):e.isSingle?(i=e.index,n=e.index,s=e.selection.left,o=e.selection.right):null!==e.index&&null!==e.offset&&(i=e.index,n=e.index,s=e.left,o=e.right),this.body=e.selection.body,this.start=d(i),this.end=d(n),this.left=s[Ci](/&lt;/g,"<")[Ci](/&gt;/g,">")[Ci](/&nbsp;/g," "),this.right=o[Ci](/&lt;/g,"<")[Ci](/&gt;/g,">")[Ci](/&nbsp;/g," ")}removeRows(){for(let t=this.end;t>this.start;t--)this.editor[Gt][t][bi]()}}class vo{#T;#n;#s;#R;constructor(t={}){this.#T=t.editor,this.#n=n(null==t.autosave||t.autosave),this.#s=t.event||{};const e=Ii+"."+Ee+"-"+Ht,i=parseInt(this.#T[Ot][oe].pin||0);this.#T[Ot][oe].wrap;let s=this.#T[Ot][vi](e);if(this.#R=/nanomd\.pardn\.io/[Gi](f[_e]),s)return;const o=[{[Qe]:"format_bold",[Vi]:"添加粗體",[$i]:t=>this.#T.bold(t)},{[Qe]:"format_italic",[Vi]:"添加斜體",[$i]:t=>this.#T.italic(t)},{[Qe]:"strikethrough_s",[Vi]:"添加刪除線",[$i]:t=>this.#T.strikethrough(t)},{[Qe]:"format_underlined",[Vi]:"添加底線",[$i]:t=>this.#T.underline(t)},{[Qe]:"ink_marker",[Vi]:"添加高亮",[$i]:t=>this.#T.marker(t)},{[Qe]:"superscript",[Vi]:"添加上標",[$i]:t=>this.#T.sup(t)},{[Qe]:"subscript",[Vi]:"添加下標",[$i]:t=>this.#T.sub(t)},{[Qe]:"format_quote",[Vi]:"添加引用",[$i]:t=>this.#T.blockquote(t)},{[Qe]:"format_list_bulleted",[Vi]:"添加無序列表",[$i]:t=>this.#T.ul(t)},{[Qe]:"format_list_numbered",[Vi]:"添加有序列表",[$i]:t=>this.#T.ol(t)},{[Qe]:"code",[Vi]:"添加代碼塊",[$i]:t=>this.#T.code(t)},{[Qe]:"link",[Vi]:"添加連結",[$i]:t=>this.#T.link("連結文字","連結")},{[Qe]:"landscape",[Vi]:"添加圖片",[$i]:t=>this.#T.image("圖片連結","圖片名稱")},this.#s&&this.#s.upload?{[Qe]:"smb_share",[Vi]:"上傳圖片",[$i]:async t=>{const e=await this.#s.upload();this.#T.image(e.href??"",e.alt??"測試")}}:null,{},this.#n?null:{[Qe]:"autorenew",[Vi]:"儲存並預覽",[$i]:t=>this.#T.save(t)},{[Qe]:i?"keep_off":"keep",[Vi]:"釘選面板",[$i]:t=>this.#j(t)},{[Qe]:"wrap_text",[Vi]:"換行",[$i]:t=>this.#O()},this.#R?{[Qe]:"cloud_upload",[Vi]:"部署",[$i]:t=>this.#F()}:null].map((t=>{if(null==t)return;if(null==t[Qe]){return Rs("span")}let e=Rs("span.material-symbols-outlined",{title:t.title,[Qe]:t[Qe]},t[Qe]);return e.onpointerup=t[$i],e}));s=Rs(e,o),s[Qt]=!1,s[oe].hide=1,this[Ot]=s}#j(t){const e=t.target,i=d(this.#T[Ot][oe].pin||0);this.#T[Ot][oe].pin=Math.abs(i-1),e[Nn]=i?"keep":"keep_off",e[Vi]=i?"釘選面板":"取消釘選"}#O(){const t=d(this.#T[Ot][oe].wrap||1);this.#T[Ot][oe].wrap=Math.abs(t-1)}async#F(){this.#T[Ot][St](this[Ot]),this[Ot][oe][Me]=1;const e=new URL(location.href),i=navigator.language||navigator.userLanguage;let n=e.searchParams.get("lang"),s=/^zh/i.test(i);null!=n&&(s=/^zh/i.test(n)),null==this.#T.deployKey&&(this.#T.deployKey=Date.now()+"."+Gs(16)),fetch("https://nanomd-deploy.pardn.workers.dev/",{method:"POST",headers:{"Content-Type":"application/json"},[Ot]:r[It]({[_t]:this.#T.deployKey,[nn]:co(`\n${this.#T.text}\n`)})[Qi]()[Ci](/[\u2028\u2029]/g,"")}).then((t=>t.text())).then((async e=>{confirm(s?"已成功部署並複製連結\n開啟頁面?":"Deployment successful and link copied.\nOpen the page?")&&t.open("https://nanomd-cloud.pardn.workers.dev/"+e)})).catch((t=>alert("Error:"+t.message)))}}t.MDParser=class{#H=!0;#z="";#K="";constructor(t={}){this.#H=t.standard??!0,this.#z=t.text??""}parse(t){return t=t??this.#z,this.#K=co(`\n${t}\n`,null,null,this.#H),this.#K}};class wo{tag="";props={};children=[];data=null;constructor(t){if(t[Jn][Yi]()===Mi){let i=!1;for(const n of e[Ce][zn](Mi)||[])if(null!=t[Ei]&&n[Ei]===t[Ei]||null!=t[Zi]&&n[Zi]===t[Zi]){i=!0;break}i||e[Ce][St](t),this[Hi]=Mi}this[Hi]=t[Jn][Yi](),this[di]=[...t.attributes].reduce(((t,e)=>(t[e.name]=e.value.trim(),t)),{}),this[Gt]=function(t){return s[we](t[Ut]).filter((t=>t[Nt]===a[xt]||t[Nt]===a[kt]&&t[Zi]&&t[Zi][Qi]()[He]>0))}(t)[Ze]((t=>t.nodeType===Node[xt]?new wo(t):t[Zi]||""))}getPatches(t){return this.#B(t,this)}#B(t,e,i=[]){if(null==t&&e)return[{[tn]:Cs.create,[xe]:i,[hn]:e}];if(t&&!e)return[{[tn]:Cs.remove,[xe]:i}];if(!t&&!e)return[];if(t.tag!==e.tag)return[{[tn]:Cs[Ci],[xe]:i,[hn]:e}];const n=[];return n[mi](...this.#U(t,e,i)),n[mi](...this.#G(t,e,i)),n}#U(t,e,i=[]){if(null==t||"string"==typeof t||null==e||"string"==typeof e)return[];const n=[],s=t[di]||{},r=o[Tt](s)[He],l=e[di]||{},u=o[Tt](l)[He];if(u>0)for(let t in l){const s=l[t];n[mi]({[tn]:Cs.prop,[hn]:e,key:t,value:s,[xe]:i})}if(r>0){if(u<1)for(let t in s)n[mi]({[tn]:Cs.prop,[hn]:e,key:t,[nn]:null,[xe]:i});for(let t in l)u>0&&!(t in l)&&n[mi]({[tn]:Cs.prop,[hn]:e,key:t,[nn]:null,[xe]:i})}return n}#G(t,e,i=[]){if(null==t||"string"==typeof t||null==e||"string"==typeof e)return[];const n=[],o=s[Pe](t[Gt])?t[Gt]:[],r=s[Pe](e[Gt])?e[Gt]:[],u=l.max(o[He],r[He]);for(let t=0;t<u;t++){const s=o[t],l=r[t],u=i.concat(t);if("string"==typeof s&&"string"==typeof l){if(s===l)continue;n[mi]({[tn]:Cs.text,[hn]:e,[nn]:l,[xe]:u})}else null==s?n[mi]({[tn]:Cs.append,[hn]:l,[xe]:u}):null==l?n[mi]({[tn]:Cs.remove,index:u}):n[mi](...this.#B(s,l,u))}return n}}t.PDMarkdownViewer=t.MDViewer=class{body;vbody;#Z;#q="";#W=300;#V=0;#Y;#J;#T;constructor(t={}){if((de in t||ci in t)&&(this.#q=String(t[de]||t[ci]||"")[Qi]()),Li in t){t[Li]}const s=t[Li]||{},o=i(s[Je]||Lt)[Qi]()[Yi](),r=n(null==s.fill?1:s.fill)?1:0,l=i(s[ye]||"")[Qi]()||"'Noto Sans TC', sans-serif",u=t.sync||{};this.#W=d(null==u[re]?300:u[re])||300,this.#V=n(u[_i]||0)?1:0,this[ae]=u[ae]instanceof fo?u[ae]:null,e[Ce][St](Rs(Li,`.${ai}{font-family: ${l}}`));const a=document[cn](t[Ie]);typeof t[Ie]===Si&&null!=a?(this[Ot]=a,a.classList.add(ai)):this[Ot]=Rs(Ii+"."+ai),this[Ot][oe][Je]=y&&o===Lt||o===se?se:"",this[Ot][oe].fill=r,this[Ot][oe].sync=null==this[ae]?0:1,this[Ot][oe].autosave=null==this[ae]?1:this[ae][Ot][oe].autosave;const h=t.hashtag||{};if(this.#Y=i(h.path||"")[Qi](),this.#J=i(h[zi]||"")[Qi](),null!=t.fillMode){let e=n(t.fillMode)?1:0;this[Ot][oe].fill=e}if(null!=t[re]&&(this.#W=d(t[re])||300),null!=t[Un]&&(this.#V=n(t[Un])?1:0),null!=t[ye]){let n=i(t[ye])[Qi]()||"'Noto Sans TC', sans-serif";e[Ce][St](Rs(Li,`.${ai}{font-family: ${n}}`))}null!=t[Xn]&&(this.#Y=i(t[Xn]||"")[Qi]()),null!=t[Qn]&&(this.#J=i(t[Qn]||"")[Qi]()),this.vbody=new wo(this[Ot]),this.init()}get editor(){return this.#T}set editor(t){this.#T&&(this.#T[Ot][Ln]=null),null!=t&&(this.#T=t,this.#T.viewer=this,this.#V&&null!=this.#T&&(this.#T[Ot][Ln]=t=>{this[Ot][Gn]+=t.deltaY}))}#X(){if(null==this.#T)return"";const t=[...this.#T[Ot][zn](ue)];let e="";for(let n of t){var i=n[Nn][Ci](/[\u00A0\u0020]/g," ");i[Qi]()[He]<1?e+="\n":e+=i+"\n"}return e[Qi]()}clear(){let t=this[Ot].cloneNode(!0);t[xn]="";let e=new wo(t);this[Ot][xn]="",this.vbody=e}unsave(){0!==d(this[Ot][oe].saved)&&(this[Ot][oe].saved=0)}init(e=""){this[Ot][oe].saved=1;let i=this.#q,n=this[Ot][Gn];t[qt](this.#Z),this.#Z=t[Yn]((()=>{if(t[qt](this.#Z),i&&this[Ot][xn]&&i===this[Ot][xn])return;let o=e||this.#X()||i;o=co(`\n${o}\n`,this.#Y,this.#J);let r=this[Ot].cloneNode(!0);r[xn]=o;let l=new wo(r);const u=l.getPatches(this.vbody);s[Pe](u)&&this.#Q(this[Ot],u),this.vbody=l;for(let e of[...this[Ot][zn](Ht+"."+ee)])e[Pn]=async e=>{t[qt](Ls);const i=e[zi][Rn],n=i[yn],s=i[Gt][0][Nn];try{await navigator.clipboard.writeText(s),n[Dt](ji),Ls=t[Yn]((t=>{n[bi](ji)}),1e3)}catch(t){console[fe](t),n[Dt](fe)}};let a=setInterval((()=>{null!=PR&&(clearInterval(a),this[Ot][Gn]=n,PR.prettyPrint())}),50)}),this.#W)}changeMode(t=Ke){this[Ot][oe][Je]=t}#Q(t,e){if(null!=t&&s[Pe](e)){this.#tt(t,e);for(const i of e){const{index:e}=i,n=r.parse(r[It](e||[]));let s;i.type===Cs.append&&(s=n?.pop());const o=n?this.#et(t,n):t;o&&(i.type===Cs.create&&hn in i?this.#it(o,i):i.type===Cs.replace&&hn in i&&null!=o[jn]?this.#nt(o,i):i.type===Cs.append&&hn in i&&null!=s?this.#st(o,i,s):i.type===Cs.prop&&_t in i&&nn in i&&o instanceof Element?this.#ot(o,i.key,i.value||"",i[hn]):i.type===Cs.text&&nn in i&&o.nodeType===a[kt]&&(o[Zi]=i.value||""))}}}#tt(t,e){const i=e.filter((t=>t.type===Cs.remove)).sort(((t,e)=>{const i=(e.index.length||0)-(t.index.length||0);if(0!==i)return i;for(let i=0;i<(t.index.length||0);i++)if((t.index[i]||0)!==(e.index[i]||0))return(e.index[i]||0)-(t.index[i]||0);return 0}));for(const e of i){const i=this.#et(t,e.index);null!=i&&null!=i[jn]&&i[jn].removeChild(i)}}#it(t,i){if(i.type!==Cs.create||!(hn in i))return;const n="string"==typeof i[hn]?e[An](i[hn]):this.#rt(i[hn]);null!=t[Rn]&&t[Rn][St](n)}#nt(t,i){if(i.type!==Cs.replace||!(hn in i)||null==t[jn])return;const n="string"==typeof i[hn]?e[An](i[hn]):this.#rt(i[hn]);if(t[jn].replaceChild(n,t),!(n instanceof Text||"string"==typeof i[hn])){for(const t in i[hn][di])this.#ot(n,t,i[hn][di][t]||"",i[hn]);this.#lt(i[hn],n)}}#st(t,i,n){if(i.type!==Cs.append||!(hn in i)||null==n)return;const s="string"==typeof i[hn]?e[An](i[hn]):this.#rt(i[hn]);if(n+1>t[Gt][He]?t[St](s):t.insertBefore(s,t[Gt][n+1]),"string"!=typeof i[hn]){for(const[e,s]of o.entries(i[hn][di]))this.#ot(t[Gt][n],e,s||"",i[hn]);this.#lt(i[hn],t[Gt][n])}}#ot(t,e,i,n){null==i?t[_removeAttribute](e):null!=t&&t[Zn](e,i)}#lt(t,e){if("string"==typeof t)return;let i=-1;for(const n in t.children){const s=t.children[+n];if(i++,"string"==typeof s){i--;continue}if(null==e)continue;const r=e.children[i];for(const[t,e]of o.entries(s[di]))this.#ot(r,t,e||"",s);this.#lt(s,r)}}#et(t,e){let i=t,n=s.from(i.childNodes).filter((t=>t.nodeType===a[xt]||t.nodeType===a[kt]&&""!==t[Zi]?.trim()))||[];for(const t of e)i=n[t],null!=i&&(n=s.from(i.childNodes).filter((t=>t.nodeType===a[xt]||t.nodeType===a[kt]&&""!==t[Zi]?.trim()))||[]);return i}#rt(t){const i=e.createElement(t.tag);if(t[di])for(const[e,n]of o.entries(t[di]))e[Mt](":")||e[Mt]("@")||void 0!==n&&i[Zn](e,n);for(const n of t[Gt])"string"==typeof n?i[St](e[An](n)):i[St](this.#rt(n));return i}}}("undefined"==typeof window?window={}:window);export const editor = window.MDEditor; export const MDEditor = window.MDEditor; export const viewer = window.MDViewer; export const MDViewer = window.MDViewer; export const MDParser = window.MDParser;
