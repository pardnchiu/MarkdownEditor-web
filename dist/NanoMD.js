!function(){const t=window,e=document,i=String,n=Boolean,s=Array,o=Object,l=JSON,r=Math,h=URL,u=Node,c=Date,a=Blob,d=parseInt,f="video/mp4",p="video/quicktime",g=["javascript","js","ts","html","css","xml","json","sql","java","python","ruby","php","cpp","csharp","swift","typescript","kotlin","go","rust","perl","bash"],y=t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)").matches,_="abcdefghijklmnopqrstuvwxyz0123456789";let m=new Map;const T=/\.([\w_-]+)?/gi,N=/\#([\w_-]+)?/i,E=/^\w+(?=[\#\.]*)/i,A=/[\"\']{0,1}([\u0020\u00A0\u0009]*)(mailto\:)?([\u0020\u00A0\u0009]*)(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)([\u0020\u00A0\u0009]*)[\"\']{0,1}/,O=/(\s{1})\\?[\#＃]{1}([\u4e00-\u9fff\u3040-\u30ff\uac00-\ud7a3a-zA-Z0-9_]+)/,I=/[& \<\>\"\']/g,C=/\[([^\]\n]+)?\]\(([^\)\n\u0020\u00A0\u0009]+)([\u0020\u00A0\u0009]*[\"\']([^\)\n]+)[\"\'])?\)/,w=/(\n)(\>\s*\[\!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\n)?(\>[^\n]*(\n)?)+/,S=/\`([^\n\`]*)\`/,D=/^\n|\n$/g,b=/\`{3}(\w*)([\s\S]*?)\s*\`{3}/,$=/((\n([\u0020\u00A0]{4,}|[\u0009]))[^\n]+)+/,M=/\*([^\n\*]*)\*/,U=/\_([^\n\_]*)\_/,R=/^\s|\s$/g,x=/(\n[\u0020\u00A0\u0009]*|\n[\u0020\u00A0\u0009]*>[\u0020\u00A0\u0009]*|\n[\u0020\u00A0\u0009]*([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+)\\?(\#{1,6})[\u0020\u00A0\u0009]+([^\n]+)/,F=/(\n)([^\n]+)\n\={3,}([\u0020\u00A0\u0009]*\n)/,k=/(\n)([^\n]+)\n\-{3,}([\u0020\u00A0\u0009]*\n)/,v=/([\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*)\\?(\#{1,6})[\u0020\u00A0\u0009]+([^\n\|]*)([\u0020\u00A0\u0009]*)/,P=/(\n[\u0020\u00A0\u0009]*)(\*{3,}|\-{3,})([\u0020\u00A0\u0009]*\n)/,L=/\!\[([^\]\n]+)?\]\(([^\)\n\u0020\u00A0\u0009]+)([\u0020\u00A0\u0009]*[\"\']([^\)\n]+)[\"\'])?\)(\(([0-9]+\%?)?[\u0020\u00A0\u0009\*x]+([0-9]+\%?)?([\u0020\u00A0\u0009]+(left|right))?\))?/,j=/^['"].*['"]$/,G=/\n(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+(.+)(\n.*\S.*)*)+/,H=/(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+(.+)(\n.*\S.*)*)+/,B=/^(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]*[^\n]+)/,z=/\={2}([^\n\=]*)\={2}/,K=/\~{2}([^\n\~]*)\~{2}/,W=/\*{2}([^\n\*]*)\*{2}/,V=/\_{2}([^\n\_]*)\_{2}/,Z=/\~([^\n\~]*)\~/,Y=/\^([^\n\^]*)\^/,q=/(\n(?![\{\<])[^\n]+)+/,X=/^(\n?(?![\{\<])[^\n]+)+/,J=/\.mov$/,Q=/\.mp4$/,tt=/[A-Za-z\%]/,et=/[\"\']{0,1}([\u0020\u00A0\u0009]*)(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*))([\u0020\u00A0\u0009]*)[\"\']{0,1}/,it=/(\<[\u00A0\u0020\u0009\>]*\/?[\u00A0\u0020\u0009\>]*br[\u00A0\u0020\u0009\>]*\/?[\u00A0\u0020\u0009\>]*\>|\n)/,nt=/\n/,st=/\\\!/g,ot=/\\\`/g,lt=/\\\#/g,rt=/\\\*/g,ht=/\\\_/g,ut=/\\\~/g,ct=/\\\^/g,at=/\\\=/g,dt=/\\\</g,ft=/\\\>/g,pt=/\\\[/g,gt=/\\\]/g,yt=/\\\(/g,_t=/\\\)/g,mt=/\$/g,Tt=/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/,Nt="mailto:",Et="\n",At="_blank",Ot="startsWith",It="keys",Ct="TEXT_NODE",wt="ELEMENT_NODE",St="nodeType",Dt="add",bt="alt",$t="appendChild",Mt="as",Ut="auto",Rt="baseOffset",xt="blockquote",Ft="body",kt="br",vt="button",Pt="charAt",Lt="checked",jt="checkbox",Gt="childNodes",Ht="children",Bt="class",zt="clearTimeout",Kt="clipboardData",Wt="code",Vt="Color",Zt="color",Yt="content",qt="contentEditable",Xt="controls",Jt="copy",Qt="create",te="Creator",ee="ctrlKey",ie="dark",ne="dataset",se="delay",oe="display",le="div",re="editor",he="em",ue="empty",ce="emptyContent",ae="error",de="float",fe="floor",pe="focus",ge="fontFamily",ye="forEach",_e="from",me="get",Te="has",Ne="head",Ee="height",Ae="hide",Oe="href",Ie="id",Ce="iframe",we="img",Se="index",De="init",be="inner",$e="input",Me="insert",Ue="isArray",Re="join",xe="label",Fe="language",ke="lastChild",ve="lazy",Pe="length",Le="li",je="light",Ge="link",He="list",Be="loading",ze="map",Ke="mark",We="match",Ve="metaKey",Ze="min",Ye="mode",qe="Name",Xe="name",Je="node",Qe="none",ti="number",ei="object",ii="offset",ni="ol",si="outerHTML",oi="parent",li="pd-md-editor",ri="pd-md-viewer",hi="placeholder",ui="pre",ci="props",ai="preload",di="prettyprint",fi="prevent",pi="push",gi="px",yi="querySelector",_i="random",mi="rel",Ti="remove",Ni="replace",Ei="click",Ai="script",Oi="scroll",Ii="section",Ci="set",wi="slice",Si="source",Di="span",bi="split",$i="src",Mi="string",Ui="strong",Ri="style",xi="sub",Fi="success",ki="sup",vi="table",Pi="tag",Li="target",ji="tbody",Gi="td",Hi="temp",Bi="test",zi="textContent",Ki="th",Wi="thead",Vi="title",Zi="toLowerCase",Yi="toUpperCase",qi="tr",Xi="trim",Ji="type",Qi="ul",tn="value",en="video",nn="viewer",sn="width",on="console",ln="apply",rn="void",hn="vdom",un="getElementById",cn="crossOrigin",an="preconnect",dn=Dt+"EventListener",fn="background"+Vt,pn=Bt+qe,gn=Bt+"List",yn=Qt+"DocumentFragment",_n=Qt+"Element",mn=Qt+"TextNode",Tn=_e+"CharCode",Nn=pe+"Background"+Vt,En=pe+"Offset",An=pe+"Text"+Vt,On=me+"Data",In=me+"Selection",Cn=Te+"OwnProperty",wn=Se+"Of",Sn=be+"HTML",Dn=be+"Text",bn=Me+"Before",$n=Je+qe,Mn=Je+"Value",Un="onclick",Rn="onwheel",xn=oi+"Element",Fn=oi+"Node",kn=hi+Vt,vn=fi+"Default",Pn=fi+"Refresh",Ln=yi+"All",jn=Ti+"AllRanges",Gn=Oi+"Height",Hn=Oi+"Sync",Bn=Oi+"Top",zn=Ci+"Attribute",Kn=Ci+"Data",Wn=Ci+"End",Vn=Ci+"Start",Zn=Ci+"Timeout",Yn=Pi+qe,qn=Pi+"Path",Xn=Pi+"Target";let Jn="";const Qn="@excl@",ts="@grave@",es="@num@",is="@ast@",ns="@lowbar@",ss="@tilde@",os="@Hat@",ls="@equal@",rs="@lt@",hs="@gt@",us="@lsqb@",cs="@rsqb@",as="@lpar@",ds="@rpar@",fs="@dollar@",ps="&lt;",gs="&gt;",ys="&amp;",_s="&nbsp;",ms="&quot;",Ts="&apos;",Ns={create:"CREATE",append:"APPEND",replace:"REPLACE",text:"TEXT",prop:"PROP",remove:"REMOVE"};Array[_e]({[Pe]:26},((t,e)=>i[Tn](97+e)))[ye](((e,n)=>{let s=n<10,o=n>=10&&n<20,l=n>=20,r=i(n),h=r[Pt](r[Pe]-1),u=i=>{Jn+=i?e[Yi]():e,t[(i?"$":"_")+(l?"_":"")+h+(o?"_":"")]=i?e[Yi]():e};u(0),u(1),s&&(Jn+=n,t["_"+e]=n)}));t._a,t._b,t._c,t._d,t._e,t._f,t._g,t._h,t._i,t._j;const Es=t._0,As=t._1,Os=(t._2,t._3,t._4,t._5,t._6),Is=t._7,Cs=t._8,ws=(t._9,t._0_,t._1_,t._2_,t._3_,t._4_,t._5_,t._6_,t._7_,t._8_),Ss=(t._9_,t.__0),Ds=(t.__1,t.__2,t.__3,t.__4,t.__5,t.$0,t.$1,t.$2,t.$3,t.$4,t.$5,t.$6,t.$7,t.$8,t.$9,t.$0_,t.$1_,t.$2_,t.$3_,t.$4_,t.$5_,t.$6_,t.$7_,t.$8_,t.$9_,t.$_0,t.$_1,t.$_2,t.$_3,t.$_4,t.$_5,"https://fonts.googleapis.com"),bs=Ds+"/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0&display=swap",$s="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js",Ms="https://cdn.jsdelivr.net/npm/@pardnchiu/nanomd@latest/dist/NanoMD.css",Us="NanoMD\nGitHub: https://github.com/pardnchiu/NanoMD\nCreator: Pardn Chiu\nLicense: MIT";let Rs;for(let t of[xs(Ge,{[mi]:an,[Oe]:"https://fonts.gstatic.com",[cn]:""}),xs(Ge,{[mi]:an,[Oe]:Ds,[cn]:""}),xs(Ge,{[mi]:ai,[Oe]:bs,[Mt]:Ri,[cn]:"anonymous"}),xs(Ge,{[mi]:"stylesheet",[Oe]:bs}),xs(Ge,{[mi]:"preconnect",[Oe]:"https://cdn.jsdelivr.net"}),xs(Ge,{[mi]:ai,[Oe]:$s,[Mt]:Ai}),xs(Ai,{[$i]:$s}),xs(Ge,{[mi]:ai,[Oe]:Ms,[Mt]:Ri}),xs(Ge,{[mi]:"stylesheet",[Oe]:Ms})])e[Ne][$t](t);function xs(t="",i,n){const s=((t[We](E)||[])[0]||"")[Xi](),o=((t[We](N)||[])[1]||"")[Xi](),l=(T[Bi](t)?t[We](T):[])[ze]((t=>t[Ni](/^\./,"")));e[De],e[te];if(s[Pe]<1)return;let r,h,u,c=!1;if(t===Hi?(c=!0,r=e[yn]()):r=e[_n](s),83!=Us[Pe])return r;o[Pe]&&(r.id=o);for(let t of l)r[gn][Dt](t);if(null==i&&null!=n&&([i,n]=[n,null]),null!=i&&null!=n)[h,u]=[i,n];else if(null==n)typeof i===Mi||typeof i===ti||Array[Ue](i)?u=i:h=i;else if(null==i)return r;if(typeof h===ei&&null!=h)for(const t in h){if(!h[Cn](t))continue;const e=h[t];-1!=[tn,Dn,Sn,zi,qt][wn](t)?r[t]=e:-1!=[Zt,fn,sn,Ee,oe,de][wn](t)?r[Ri][t]=e:null!=e&&r[zn](t,e)}if(null!=u){const t=typeof u===Mi,i=typeof u===ti,n=Array[Ue](u);if(t||i){const t=u;s===we||s===Si?r[$i]=t:c?r[$t](e[mn](u)):r[Sn]=t}else if(n)for(let t of u){const i=t instanceof Element;typeof t===Mi||typeof t===ti?c?r[$t](e[mn](t)):r[Sn]+=t:i&&r[$t](t)}}return r}function Fs(t=""){return t[Ni](I,(t=>({"&":ys," ":_s,"<":ps,">":gs,'"':ms,"'":Ts}[t])))}function ks(t,e=""){return new RegExp(t,e)}function vs(t){if(t)return t[pn]===li||t[$n][Zi]()===le&&t[Fn][pn]===li?t:vs(t[Fn])}function Ps(t){const e=xs(le);return e[$t](t),e[Sn]}function Ls(t=""){if((t=t[Xi]())[Pe]<1)return"";const e=t[We](Tt)||[];return e[Pe]>2&&11===e[1][Pe]?e[1]:""}function js(t=""){if((t=t[Xi]())[Pe]<1)return"";const e=t.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/[\w]+\/|groups\/[\w]+\/videos\/|album\/\d+\/video\/|video\/|)(\d+)/);return e?e[1]:null}function Gs(t,e="",i="",n="",s="",o=""){const l=Hs(i),r=n instanceof HTMLElement?n:xs(i,n);return m[Ci](l,r[si]),e[Ni](t,s+l+o)}function Hs(t=""){let e="{{"+(t[Xi]()||Ut)+"-";for(let t=0;t<64;t++)e+=_[Pt](r[fe](36*r[_i]()));return e+="}}",m[Te](e)?Hs(t):e}function Bs(t=""){let i;for(let e of t[We](ks(w,Os))||[]){const s=e[We](w),o=s[1]||"",l=s[3]||"",r=s[5]||"";i=xs(xt+(l[Pe]?"."+l:"")),n(e,l),t=Gs(e,t,xt,i,o,r)}function n(t,e=""){let n=Xs(t[Xi]()[Ni](/^\>[\u00A0\u0020\u0009]?/,"")[Ni](/\n\>[\u00A0\u0020\u0009]?/g,"\n"))[bi](nt);for(let t in n){const o=n[t];i[$t](s(o,d(t),e))}}function s(t,n=0,o=""){let l=xs(Hi);const r=/^[\u00A0\u0020\u0009]*\>[\u00A0\u0020\u0009]?/,h=t[Ni](r,"");if(/\[\!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]/[Bi](t)&&0===n)l[$t](xs(Di+".hint",[-1!=["NOTE","TIP","IMPORTANT","WARNING","CAUTION"][wn](o)?xs("span.material-symbols-outlined",{NOTE:"info",TIP:"lightbulb",IMPORTANT:"sms",WARNING:"warning",CAUTION:"error"}[o]||""):null,o])),l[$t](xs(kt));else if(r[Bi](t)){let t=xs(xt);t[$t](s(h)),l[$t](t)}else/^[\u00A0\u0020\u0009]*\{\{/[Bi](t)?l[$t](i[$t](e[mn](t))):l[$t](xs(Di,t));return l}return t}function zs(t=""){let e=[[Wt,S]];for(let i of e){const e=i[0],n=i[1];for(let i of t[We](ks(n,Os))||[]){const s=i[We](n);if(R[Bi](s[1]||""))continue;let o=(s[1]||"")[Xi]();o[Pe]<1||(e!=Wt?t=t[Ni](i,xs(e,o)[si]):(o=Fs(o),t=Gs(i,t,e,o)))}}return t}function Ks(t){let e=0,i=xs(ni);for(let n in t){const s=t[n];0===d(n)&&(e=r.floor((s[We](/^\s*/)||[""])[0][Pe]/4));const o=ks(`^\\s{0,${4*e}}`);i[$t](xs(Le,Fs(s[Ni](o,""))))}return i}function Ws(t=""){let e=[[Ui,W],[Ui,V],[ws,K],[Ke,z],[he,M],[he,U],[ki,Y],[xi,Z]];for(let t of e){i(t[0],t[1])}function i(e,i){for(let n of t[We](ks(i,Os))||[]){const s=n[We](i);if(R[Bi](s[1]||""))continue;let o=(s[1]||"")[Xi]();o[Pe]<1||(e!=Wt?t=t[Ni](n,xs(e,o)[si]):(o=Fs(o),t=Gs(n,t,e,o)))}}return t}function Vs(t="",e="",n=At){if(i(e||"")[Xi]()[Pe]<1)return t;for(let i of t[We](ks(O,Os))||[]){if(i[We](/^\\/))continue;const s=i[We](O);if(s[Pe]<1)continue;const o=s[1],l=(s[2]||"")[Xi](),r=Hs(Es);if(l[Pe]<1)continue;const h=xs(Hi,[xs(Es+"."+Pi,{[Oe]:e+l,[Li]:n===At?At:"_self"},l)]);m[Ci](r,Ps(h)),t=t[Ni](i,o+r)}return t}function Zs(t=""){return(()=>{for(let e of t[We](ks(x,Os))||[]){const i=e[We](x);if(i[Pe]<1)continue;const n=i[1]||"",s=(i[3]||"")[Xi]()[Pe],o=(i[4]||"")[Xi]();0!=r[Ze](s,o[Pe])&&(t=Gs(e,t,Is+s,o,n))}})(),(()=>{for(let e of t[We](ks(v,Os))||[]){const i=e[We](v);if(i[Pe]<1)continue;const n=i[1]||"",s=(i[2]||"")[Xi]()[Pe],o=(i[3]||"")[Xi](),l=i[4]||"";0!=r[Ze](s,o[Pe])&&(t=Gs(e,t,Is+s,o,n,l))}})(),(()=>{for(let e of t[We](ks(F,Os))||[]){const i=e[We](F);if(i[Pe]<1)continue;const n=i[1]||"",s=(i[2]||"")[Xi](),o=i[3]||"";s[Pe]<1||(t=Gs(e,t,Is+1,s,n,o))}})(),(()=>{for(let e of t[We](ks(k,Os))||[]){const i=e[We](k);if(i[Pe]<1)continue;const n=i[1]||"",s=(i[2]||"")[Xi](),o=i[3]||"";s[Pe]<1||(t=Gs(e,t,Is+2,s,n,o))}})(),t}function Ys(t=""){for(let e of t[We](ks(P,Os))||[]){const i=e[We](P);if(i[Pe]<1)continue;const n=i[1]||"",s=i[3]||"",o=Hs("HR");m[Ci](o,"<hr>"),t=t[Ni](e,n+o+s)}return t}function qs(t=""){const e="this.parentElement.nextElementSibling.style.display='block';this.parentElement.style.display='none'",i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNTkyXzMwNDkpIj4KPHBhdGggZD0iTTEyMCA2MEMxMjAgMjYuODYyOSA5My4xMzcxIDAgNjAgMEMyNi44NjI5IDAgMCAyNi44NjI5IDAgNjBDMCA5My4xMzcxIDI2Ljg2MjkgMTIwIDYwIDEyMEM5My4xMzcxIDEyMCAxMjAgOTMuMTM3MSAxMjAgNjBaIiBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIwLjUiLz4KPHBhdGggZD0iTTg0LjM2MzMgNTYuNTgwM0M4Ni45MzAyIDU4LjEzNzYgODYuOTMwMiA2MS44NjI2IDg0LjM2MzMgNjMuNDE5OUw1MS44MjQ4IDgzLjE2MTJDNDkuMTU5MSA4NC43Nzg2IDQ1Ljc1IDgyLjg1OTQgNDUuNzUgNzkuNzQxNFY0MC4yNTg4QzQ1Ljc1IDM3LjE0MDggNDkuMTU5MSAzNS4yMjE2IDUxLjgyNDggMzYuODM4OUw4NC4zNjMzIDU2LjU4MDNaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI1OTJfMzA0OSI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPg==";function n(t,n,s,o){return Ps(xs(Hi,[xs(Es,{[Vi]:o,[Oe]:n,[Li]:At},s||n),xs("section.more",[xs("img.cover","https://i.ytimg.com/vi/"+t+"/mqdefault.jpg"),xs("img.icon",{[Un]:e},i)]),xs(Ce,{[Be]:ve,[sn]:"640px",[$i]:"https://www.youtube.com/embed/"+t,frameborder:0,allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",[oe]:Qe})]))}function s(t,n,s,o){const l=function(t){const e=`https://vimeo.com/api/v2/video/${t}.json`;let i=null;const n=new XMLHttpRequest;n.open("GET",e,!1);try{n.send(),200===n.status?i=JSON.parse(n.responseText)[0].thumbnail_large:console.error("HTTP 錯誤:",n.status)}catch(t){console.error("無法獲取縮圖:",t)}return i}(t);return Ps(xs(Hi,[xs(Es,{[Vi]:o,[Oe]:n,[Li]:At},s||n),xs("section.more",[xs("img.cover",l),xs("img.icon",{[Un]:e},i)]),xs(Ce,{[Be]:ve,[sn]:"640px",[$i]:"https://player.vimeo.com/video/"+t,frameborder:0,allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:"",[oe]:Qe})]))}return(()=>{for(let e of t[We](ks(C,Os))||[]){const i=e[We](C);if(i[Pe]<1)continue;const o=(i[1]||"")[Xi](),l=(i[2]||"")[Xi](),h=(i[4]||"")[Xi](),u=(Ls(l)||"")[Xi](),c=(js(l)||"")[Xi]();if(0!=r[Ze](o[Pe],l[Pe]))if(u[Pe])t=Gs(e,t,le,n(u,l,o,h));else if(c[Pe])t=Gs(e,t,le,s(c,l,o,h));else{const i=xs(Es,{[Vi]:h,[Oe]:l,[Li]:At},o);t=Gs(e,t,Es,i)}}})(),(()=>{for(let e of t[We](ks(et,Os))||[]){if(e[We](j))continue;const i=e[We](et);if(i[Pe]<1)continue;const o=i[1]||"",l=(i[2]||"")[Xi](),r=i[5]||"",h=(Ls(l)||"")[Xi](),u=(js(l)||"")[Xi]();if(!(l[Pe]<1))if(h[Pe])t=Gs(e,t,le,n(h,l),o,r);else if(u[Pe])t=Gs(e,t,le,s(u,l));else{const i=xs(Es,{[Oe]:l,[Li]:At},l);t=Gs(e,t,Es,i,o,r)}}})(),(()=>{for(let e of t[We](ks(A,Os))||[]){if(e[We](j))continue;const i=e[We](A);if(i[Pe]<1)continue;const n=(i[1]||"")+(i[2]||"")+(i[3]||""),s=(i[4]||"")[Xi](),o=i[8]||"";if(s[Pe]<1)continue;const l=xs(Es,{[Oe]:Nt+s,[Li]:At},s);t=Gs(e,t,Es,l,n,o)}})(),t}function Xs(t=""){for(let i of t[We](ks(G,Os))||[])e(i);function e(e){let i;e[Xi]()[Ni](ks(it,Os),Et)[bi](it)[ye](((t,e)=>{const n=t[We](H)||[],s=n[Pe]<1?null:/\d+\./[Bi]((n[2]||"")[Xi]())?ni:Qi,o=(t[We](/\s{4}/g)||[])[Pe];let l=n[Pe]<1?t[Ni](/^\s*([\-\*\+]|\d+\.)?\s*/g,""):(n[3]||"")[Xi]();if(0===d(e)&&null==s)return;0===d(e)&&(i=xs(s));let r=i;function h(t,e){if(/^\[\s*(\x)?\s*\]/[Bi](e)){const i=e[Xi]()[We](/^\[\s*(\x)?\s*\]/);e=e[Ni](/^\[\s*(\x)?\s*\]\s*/,"");const n=null!=i[1];t[$t](xs(Le,[xs(xe,[xs($e,{[Ji]:jt,[Lt]:n?"":null,[Un]:"return false;"}),xs(Di,e)])]))}else t[$t](xs(Le,e))}if(/^\s{0,3}([\-\*\+]|\d+\.)/[Bi](t))h(r,l);else if(/^\s{4,}([\-\*\+]|\d+\.)/[Bi](t)){r=i[ke];for(let t=0;t<o&&(null!=r&&null!=r[Yn]);t++)if(t==o-1&&r[Yn][Zi]()==Le)if(r[ke]instanceof HTMLElement&&(r[ke][Yn][Zi]()==ni||r[ke][Yn][Zi]()==Qi))h(r[ke],l);else if(/^\[\s*(\x)?\s*\]/[Bi](l)){const t=l[Xi]()[We](/^\[\s*(\x)?\s*\]/);l=l[Ni](/^\[\s*(\x)?\s*\]\s*/,"");const e=null!=t[1];r[$t](xs(s,[xs(Le,[xs(xe,[xs($e,{[Ji]:jt,[Lt]:e?"":null,[Un]:"return false;"}),xs(Di,l)])])]))}else r[$t](xs(s,[xs(Le,l)]));else r=r[ke][ke]}else{if(null==i)return;for(r=i[ke];null!=r[ke];)r=r[ke];if(r instanceof HTMLElement);else if(/^\{\{(h\d|img|pre)/[Bi](r[Mn]||""));else{for(;r[xn][Yn][Zi]()!=Le;)r=r[xn];r[xn][$t](xs(kt))}r[xn][Sn]+=l}})),null!=i&&(t=Gs(e,t,He,i))}return t}function Js(t=""){for(let e of t[We](ks(L,Os))||[]){const i=e[We](L);if(i[Pe]<1)continue;const n=(i[1]||"")[Xi](),s=(i[2]||"")[Xi](),o=(i[4]||"")[Xi]();let l=(i[6]||"")[Xi](),r=(i[7]||"")[Xi](),h=(i[9]||"")[Xi]();if(s[Pe]<1)continue;l[Pe]&&!tt[Bi](l)&&(l+=gi),r[Pe]&&!tt[Bi](r)&&(r+=gi);const u=J[Bi](s),c=Q[Bi](s);let a;a=u?xs(en,{[Xt]:"",[Vi]:o,[sn]:l||null,[Ee]:r||null},[xs(Si,{[Ji]:p},s)]):c?xs(en,{[Xt]:"",[Vi]:o,[sn]:l||null,[Ee]:r||null},[xs(Si,{[Ji]:f},s)]):xs(we,{[bt]:n,[Vi]:o,[sn]:l||null,[Ee]:r||null,[de]:h[Pe]?h:null},s),null!=a&&(t=Gs(e,t,we,a))}return t}function Qs(t=""){for(let e of t[We](ks(b,Os))||[]){const i=e[We](b);if(i[Pe]<1)continue;const n=null==i[2][We](D),s=n?"":(i[1]||"")[Xi]()[Zi](),o=i[2]||"",l=-1!=g[wn](s),r=o[Ni](D,"")[bi](nt);let h;h=n?xs(Wt+"."+di,Fs(o)):xs(ui+"."+di,{[Xe]:s},[xs(Wt+(l?"."+Fe+"-"+s:""),{[Xe]:s},[Ks(r)]),xs(vt+"."+Jt)]),t=Gs(e,t,n?Wt:ui,h)}return t}function to(t=""){for(let e of t[We](ks($,Os))||[]){const i=e[We]($);if(i[Pe]<1)continue;const n=i[2]||"",s=e[Ni](D,"")[bi](nt),o=xs(ui+"."+di,[xs(Wt,[Ks(s)]),xs(vt+"."+Jt)]);t=Gs(e,t,ui,o,n)}return t}function eo(t=""){let e;function i(t){const e=t[We](/^([\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*)+/)||[],i=t[We](/[\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*$/)||[];return[e[0]||"",i[0]||""]}function n(t){const i=t[Xi]()[bi](nt);e=xs(Hi,[xs(vi,[xs(Wi),xs(ji)])]);let n=!0,o=[],l=0;for(let t in i){const r=i[t],h=r[We](/((\s*)\|?((?:.*?\|)*.*)\|?)+/)||[];if(h[Pe]<1)continue;const u=(h[3]||"")[Xi]()[Ni](/[\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*$/,""),c=/^[\u0020\u00A0\u0009]*\|?([\u0020\u00A0\u0009]*[\-\:]+[\u0020\u00A0\u0009]*\|?)+[\u0020\u00A0\u0009]*$/[Bi](r),a=u[bi](/[\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*/);if(0===d(t)&&(l=a[Pe]),c){for(let t of r[Ni](/^([\u0020\u00A0\u0009]*\|)|(\|[\u0020\u00A0\u0009]*)$/g,"")[bi](/\|/))/^\-+\:$/[Bi](t[Xi]())?o.push("right"):/^\:\-+\:$/[Bi](t[Xi]())?o.push("center"):o.push("left");const t=[...e.firstChild.firstChild.childNodes[0].childNodes];for(let e in t)t[e].setAttribute("align",o[e]);n=!1}else s(n,a,l,o)}}function s(t=!0,i=[],n=0,s=[]){const o=t?e.firstChild.firstChild:e.firstChild[ke],l=xs(qi);for(let e=0;e<n;e++)l[$t](xs(t?Ki:Gi,{align:s[e]},i[e]||""));o[$t](l)}return(()=>{const s=/([^\n]*)(?:[\u0020\u00A0\u0009]*\|[^\n]*\|[^\n]*\n)[\u0020\u00A0\u0009]*\|([\u0020\u00A0\u0009\-\:]*\|)+\n(?:[\u0020\u00A0\u0009]*\|[^\n]*\|[^\n]*\n)*/;for(let o of t[We](ks(s,Os))||[])B[Bi](o)||(n(o),t=Gs(o,t,vi,Ps(e),...i(o)))})(),(()=>{const s=/(([^\n]+\|)*[^\n]+\n)(([\u0020\u00A0\u0009\-\:]+\|)*[\u0020\u00A0\u0009\-\:]+\n)(?:([^\n]+\|)*[^\n]+\n)*/;for(let o of t[We](ks(s,Os))||[])n(o),t=Gs(o,t,vi,Ps(e),...i(o))})(),t}function io(t=""){return t=t[Ni](/\n[\u0020\u00A0\u0009]*/g,"\n"),(()=>{for(let e of t[We](ks(X,Os))||[]){const i=e[We](X);if(i[Pe]<1)continue;const n=i[2]||"",s=(i[0]||"")[Xi]();if(s[Pe]){const i=xs(Hi,[xs("p",s)]),o=Hs("p");m[Ci](o,Ps(i)),t=t[Ni](e,n+o)}}})(),(()=>{for(let e of t[We](ks(q,Os))||[]){const i=e[We](q);if(i[Pe]<1)continue;const n=i[2]||"",s=(i[0]||"")[Xi]();if(s[Pe]){const i=xs(Hi,[xs("p",s)]),o=Hs("p");m[Ci](o,Ps(i)),t=t[Ni](e,n+o)}}})(),t}function no(t=""){t=t[Ni](/^\n*|\n*$/g,"");const e=/(&lt;br&gt;)/g;return e[Bi](t)?t[Ni](e,"\n"):t}function so(t="",e="",i=At){t=t[Ni](st,Qn)[Ni](ot,ts)[Ni](lt,es)[Ni](rt,is)[Ni](ht,ns)[Ni](ut,ss)[Ni](ct,os)[Ni](at,ls)[Ni](dt,rs)[Ni](ft,hs)[Ni](pt,us)[Ni](gt,cs)[Ni](yt,as)[Ni](_t,ds)[Ni](mt,fs)[Ni](/[\u00A0\u0020]/g," ");let n=[Qs,zs,Js,qs,Ws,Zs,Ys,eo,Bs,Xs,to,Vs,no,io];for(let s of n)t=s(t,e,i);for(;/\{{2}\w*\-*\w{64}\}{2}/[Bi](t);)for(let e of t[We](/\{{2}\w*\-*\w{64}\}{2}/g)||[]){let i=ks(e);t=t[Ni](i,m[me](e))}const s=["h1","h2","h3","h4","h5","h6",vi,ni,Qi,ui,xt,"details","hr",xe];for(let e of s){const i=ks(`[  \t]*\\n[  \t]*<${e}`,Os),n=ks(`${e}>[  \t]*\\n[  \t]*`,Os);t=t[Ni](i,`<${e}`)[Ni](n,`${e}>`)}return t=t[Ni](ks(Qn,Os),"&excl;")[Ni](ks(ts,Os),"&grave")[Ni](ks(es,Os),"&num;")[Ni](ks(is,Os),"&ast;")[Ni](ks(ns,Os),"&lowbar;")[Ni](ks(ss,Os),"&tilde;")[Ni](ks(os,Os),"&Hat;")[Ni](ks(ls,Os),"&equal;")[Ni](ks(rs,Os),ps)[Ni](ks(hs,Os),gs)[Ni](ks(us,Os),"&lsqb;")[Ni](ks(cs,Os),"&rsqb;")[Ni](ks(as,Os),"&lpar;")[Ni](ks(ds,Os),"&rpar;")[Ni](ks(fs,Os),"&dollar;")[Ni](/([\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*){2,}/g,"<br>")}document.addEventListener("DOMContentLoaded",(t=>{!function(...t){const i=xs(Ai,`${on}.log.${ln}(${rn} 0, ${JSON.stringify(t)});`);e[Ft][$t](i),i[Ti]()}("%c"+Us,"line-height: 1.75rem; font-size: 0.875rem;")}));t.PDMarkdownEditor=t.MDEditor=class{#t=!1;#e="";#i=!0;#n;#s;#o;#l;#r;#h;constructor(s={}){this.#e=(s.defaultContent||"")[Xi]();const o=s[Ri]||{},l=i(o[Ye]||Ut)[Xi]()[Zi](),r=n(null==o.fill?1:o.fill)?1:0,h=i(o[ge]||"")[Xi]()||"'Roboto Mono', monospace",u=n(null==o.showRow?1:o.showRow)?1:0,c=o.placeholder||{},a=i(c.text||"Type here ..."),d=i(c.color||"#bfbfbf"),f=o.focus||{},p=i(f.backgroundColor||"#0000ff1a"),g=i(f.color||"#0000ffff");e[Ne][$t](xs(Ri,`\n.${li}{font-family: ${h}}\n.${li}>div{font-size: 0.75rem}\n.${li}>div[data-focus="1"]{background-color:${p};color:${g};caret-color:${g}}\n.${li}>div:nth-last-child(2):empty::after{position:absolute;top:0;content:"${a}";color:${d} !important;caret-color:${g}}`));const _=document[un](s[Ie]);typeof s[Ie]===Mi&&null!=_?(this[Ft]=_,_.classList.add(li)):this[Ft]=xs(Ii+"."+li),this[Ft][ne][Ye]=y&&l===Ut||l===ie?ie:"",this[Ft][ne].fill=r,this[Ft][ne].row=u,this[Ft][ne].pin={1:1,0:0,[!0]:1,[!1]:0}[s.tabPin]||0,this[Ft][ne].wrap={1:1,0:0,[!0]:1,[!1]:0}[s.wrap]||1,this.#h=new lo(this[Ft]);const m=this[Ft];if(this.#i=n(null==s.hotKey||s.hotKey),null==this.#s&&s[Pn]&&(this.#s=t[dn]("beforeunload",(t=>{t[vn]()}))),null!=s[Ye]){let t=i(s[Ye]||Ut)[Xi]()[Zi]();this[Ft][ne][Ye]=y&&t===Ut||t===ie?ie:""}if(null!=s.fillMode){let t=n(s.fillMode)?1:0;this[Ft][ne].fill=t}if(null!=s.showRow){let t=n(s.showRow)?1:0;this[Ft][ne].row=t}if(null!=s[ge]){let t=i(s[ge])[Xi]()||"'Roboto Mono', monospace";e[Ne][$t](xs(Ri,`.${li}{font-family: ${t}}`))}let T=i(s[Nn]||"")[Xi]()||p,N=i(s[An]||"")[Xi]()||g;e[Ne][$t](xs(Ri,`.${li}>div[data-focus="1"]{background-color:${T};color:${N}`));let E=i(s[hi]||"")[Xi]()||a,A=i(s[kn]||"")[Xi]()||d;e[Ne][$t](xs(Ri,`.${li}>div:nth-last-child(1):empty::after{content:"${E}";color:${A}}`)),m.onmousedown=m.onmouseup=t=>{if(t.target[Yn][Zi]()!==le)return t[vn](),!1;this.#u()},m.ontouchend=t=>{this.#u()},m.oncut=t=>(this.#c(),this.#a((e=>{t[Kt][Kn]("text/plain",this.#r.body),m[Ht][this.#r.start][Sn]=Fs(this.#r.left+this.#r.right),this.#d(),this.#f(m[Ht][this.#r.start],this.#r.left[Pe])})),this.#p(!0),!1),m.onpaste=e=>(this.#c(),this.#a((i=>{const n=((e[Kt]||t[Kt])[On]("Text")||"")[bi](/\n/),s=n[Pe],o=s-1,l=s>1,r=this.#r.start+o,h=`${l?"":this.#r.left}${n[o]}`[Pe],u=n[0],c=l?"":this.#r.right;if(m[Ht][this.#r.start][Dn]=this.#r.left+u+c,this.#d(),l)for(let t=1;t<s;t++){const e=n[t],i=xs(le,Fs(`${e}${t===o?this.#r.right:""}`));i[Un]=t=>this.#u(),m[bn](i,m[Ht][this.#r.start+t])}this.#f(m[Ht][r],h,h)})),this.#p(!0),!1),m.oncompositionstart=t=>{this.#t=!0},m.oncompositionend=t=>{this.#t=!1},m.oninput=t=>{let e,i;if("deleteCompositionText"===t.inputType){e=this.#l.index,i=this.#l.offset;for(let t of[...m[Ht]]){if(t[$n][Zi]()===le||t[$n][Zi]()===Ii)continue;t[Ti]();let n=xs(le,{"data-index":e+1,index:e+1});n[Un]=t=>this.#u(),m[bn](n,m[Ht][e]),this.#f(m[Ht][e],i)}}t.inputType;let n=this.#l.isMulti,s=this.#l.multi.left,o=t.data,l=this.#l.multi.right,r=this.#l.multi.start.offset;this.#u(),n&&(this.#n[Dn]=s+o+l,this.#f(this.#n,r+1)),this.#p(!0,300)},m.onkeydown=t=>{const e=t[Ve]||t[ee],i=t.shiftKey,n=/^a$/i[Bi](t.key),o=/^b$/i[Bi](t.key),l=/^i$/i[Bi](t.key),r=/^s$/i[Bi](t.key),h=/^u$/i[Bi](t.key),u=/^m$/i[Bi](t.key),c=/^z$/i[Bi](t.key),a=/^r$/i[Bi](t.key),d=/^k$/i[Bi](t.key),f=/^f5$/i[Bi](t.key),p="ArrowUp"===t.key,g="ArrowDown"===t.key;if(this.#u(null,this.#i&&e&&n),"Meta"===t.key||"Control"===t.key)return!1;if(this.#i&&e&&i&&c)return this.goForward(),!1;if(this.#i&&e&&c)return this.goBack(),!1;if(this.#i&&(e&&a||f)&&s[Pn])return!1;if(this.#i&&e&&o)return this.#g(t,"**",As),!1;if(this.#i&&e&&l)return this.#g(t,"*",Cs),!1;if(this.#i&&e&&r)return this.#g(t,"~~",ws),!1;if(this.#i&&e&&h)return this.#g(t,Ss,Ss),!1;if(this.#i&&e&&u)return this.#g(t,"==",Ke),!1;if(this.#i&&e&&p)return this.#g(t,"^",ki),!1;if(this.#i&&e&&g)return this.#g(t,"~",xi),!1;if(this.#i&&e&&d)return this.#g(t,"`",Wt),!1;if(this.#i&&e&&n){const t=this[Ft].firstElementChild,e=this.#y,i=window.getSelection(),n=document.createRange();if(null==t.firstChild)return;return n.setStart(t.firstChild,0),n.setEnd(e.firstChild,e.firstChild.length),i.removeAllRanges(),i.addRange(n),!1}return"Tab"===t.key?this.#_(t):"Enter"===t.key?this.#m(t):"Backspace"===t.key?this.#T(t):void 0},m.onkeyup=t=>{"Meta"!==t.key&&"Control"!==t.key&&(m[Ht]&&1===m[Ht][Pe]&&m.firstElementChild[$n][Zi]()!==le&&this[De](null,!0,!1),this.#u(),/^(Arrow(Up|Left|Down|Right)|CapsLock|Shift|Control|Alt|Clear|Escape|F\d+)$/[Bi](t.key)||this[nn]&&this[nn][De]())},m.onblur=t=>{this.#c()},this.init()}get viewer(){return this.#o}set viewer(t){this.#o=t}#N(){const t=Ii+"."+$e+"-"+vt,e=parseInt(this[Ft].dataset.pin||0);this[Ft].dataset.wrap;let i=this[Ft][yi](t);if(i)return;const n=[{[Xe]:"format_bold",[Vi]:"添加粗體",[Ei]:t=>this.addBold(t)},{[Xe]:"format_italic",[Vi]:"添加斜體",[Ei]:t=>this.addItalic(t)},{[Xe]:"strikethrough_s",[Vi]:"添加刪除線",[Ei]:t=>this.addStrikethrough(t)},{[Xe]:"format_underlined",[Vi]:"添加底線",[Ei]:t=>this.addUnderline(t)},{[Xe]:"ink_marker",[Vi]:"添加高亮",[Ei]:t=>this.addMarker(t)},{[Xe]:"superscript",[Vi]:"添加上標",[Ei]:t=>this.addSup(t)},{[Xe]:"subscript",[Vi]:"添加下標",[Ei]:t=>this.addSub(t)},{[Xe]:"format_quote",[Vi]:"添加引用",[Ei]:t=>this.addBlockquote(t)},{[Xe]:"format_list_bulleted",[Vi]:"添加無序列表",[Ei]:t=>this.addUl(t)},{[Xe]:"format_list_numbered",[Vi]:"添加有序列表",[Ei]:t=>this.addOl(t)},{[Xe]:"code",[Vi]:"添加代碼塊",[Ei]:t=>this.addCode(t)},{[Xe]:"link",[Vi]:"添加連結",[Ei]:t=>this.addLink("連結文字","連結")},{[Xe]:"landscape",[Vi]:"添加圖片",[Ei]:t=>this.addImage("圖片連結","圖片名稱")},{},{[Xe]:e?"keep_off":"keep",[Vi]:"釘選面板",[Ei]:t=>this.#E(t)},{[Xe]:"wrap_text",[Vi]:"換行",[Ei]:t=>this.#A(t)}].map((t=>{if(null==t[Xe]){return xs("span")}let e=xs("span.material-symbols-outlined",{title:t.title,name:t.name},t.name);return e[Un]=t.click,e}));i=xs(t,n),i[qt]=!1,i.dataset.hide=1,this[Ft][$t](i)}#E(t){const e=t.target,i=parseInt(this[Ft].dataset.pin||0);this[Ft].dataset.pin=Math.abs(i-1),e[Dn]=i?"keep":"keep_off",e[Vi]=i?"釘選面板":"取消釘選"}#A(t){const e=parseInt(this[Ft].dataset.wrap||1);this[Ft].dataset.wrap=Math.abs(e-1)}#O(t,e){this.#N();const i=Ii+"."+$e+"-"+vt;let n=this[Ft][yi](i);t[ne][pe]=1,this[Ft][bn](n,this[Ft][Ht][e+1]),n[ne][Ae]=0,this.#n=t}#c(){if(!this.#n)return;const t=Ii+"."+$e+"-"+vt,e=this[Ft][yi](t);this.#n[ne][pe]=0,null!=e&&(this[Ft][$t](e),e[ne][Ae]=1),this.#n=null}#u(e,i=!1){this.#c(),this.#l=new oo(this[Ft],e,i);const n=t[In]();if(n.rangeCount<1)return;const s=n.getRangeAt(0);let o=e||vs(s.commonAncestorContainer);null!=o&&this.#O(o,this.#l.index||this.#l.multi.end.index)}#a(t){this.#r=new ro(this[Ft],this.#l),t()}#d(){this.#r.removeRows()}#f(i,n,s){const o=this[Ft][Ln](le);for(let t in o){const e=o[t];isNaN(d(t))||(e[ne][Se]=d(t)+1)}t[In]?t[In]()[ue]?t[In]()[ue]():t[In]()[jn]&&t[In]()[jn]():e[In]&&e[In]()[ue]();let l=t[In](),r=e.createRange(),h=n??i[Gt][0][Pe],u=s??h;r.selectNode(i),i[Gt][0]?(r[Vn](i[Gt][0],h>i[Gt][0][Pe]?i[Gt][0][Pe]:h),r[Wn](i[Gt][0],u>i[Gt][0][Pe]?i[Gt][0][Pe]:u)):(r[Vn](i,0),r[Wn](i,0)),l.addRange(r),this.#u(i)}#_(t){if(9!==t.keyCode)return;const e=this[Ft];return this.#a((t=>{e[Ht][this.#r.start][Sn]=Fs(this.#r.left+"    "+this.#r.right),this.#d();const i=this.#r.left[Pe]+4;this.#f(e[Ht][this.#r.start],i)})),!1}#m(t){if(13!==t.keyCode)return;const e=this[Ft];return this.#a((t=>{e[Ht][this.#r.start][Sn]=Fs(this.#r.left),this.#d(),e[xn][xn][Bn]+=28;const i=xs(le,Fs(this.#r.right));i[Un]=t=>this.#u(),e[bn](i,e[Ht][this.#r.start+1]),this.#f(e[Ht][this.#r.start+1],0)})),!1}#T(t){if(8!==t.keyCode)return!1;const e=this[Ft];return this.#a((t=>{if(this.#l.isMulti||this.#l.isSingle)e[Ht][this.#r.start][Sn]=Fs(this.#r.left+this.#r.right),this.#d(),this.#f(e[Ht][this.#r.start],this.#r.left[Pe]);else if(this.#r.left[Pe]){const t=this.#r.left[wi](0,this.#r.left[Pe]-1);e[Ht][this.#r.start][Sn]=Fs(t+this.#r.right),this.#f(e[Ht][this.#r.start],t[Pe])}else{if(0===this.#r.start)return;e[Ht][this.#r.start-1][Sn]+=Fs(this.#r.right),e[Ht][this.#r.start][Ti](),e[xn][xn][Bn]-=28;const t=e[Ht][this.#r.start-1][Dn][Pe]-this.#r.right[Pe];this.#f(e[Ht][this.#r.start-1],t)}})),!1}#I(t){t=Fs(t);let e=this.#y;const i=xs(le,t);i[Un]=t=>this.#u(),e[Dn][Xi]()[Pe]<1?e[Sn]=t:this[Ft][$t](i),this[Ft][Bn]=this[Ft][Gn]}get#y(){let t=this[Ft].lastElementChild;return"SECTION"===t[$n]&&(t=t.previousElementSibling),t}#C(t,e){t=Fs(t);const i=this[Ft][Ht][this.#r.start];i[Sn]=t,this.#d(),this.#f(i,e),this.#w()}#g(t,e="",i=""){const n=t[Ve]||t[ee]||e===i;this.#l.check?this.#a((t=>{const s=this.#r.left,o=this.#r.body,l=this.#r.right,r=`${s}${n?`<${i}>`:e}${o}${n?`</${i}>`:e}${l}`[Ni](/\n/g,""),h=r[Pe]-l[Pe]-(n?i[Pe]+3:e[Pe]);this.#C(r,h),this.#p(!0)})):(this.#I(n?`<${i}></${i}>`:`${e}${e}`),this.#f(this.#y,n?i[Pe]+3:e[Pe]),this.#p(!0))}#S(t){this.#l.check?this.#a((e=>{const i=this.#r.start,n=this.#r.end;for(let e=i;e<=n;e++){const i=this[Ft][Ht][e];i[Sn]=Fs(`${t} ${i[Dn]}`)}const s=this[Ft][Ht][n],o=s[Dn][Pe];this.#f(s,o),this.#p(!0),this.#w()})):(this.#I(t),this.#f(this.#y,t[Pe]+1),this.#p(!0))}#D(t="",e="",i){if(this.#l.check)return void this.#a((n=>{const s=this.#r.left,o=this.#r.right,l=`${s}${null==i?"":"!"}[${t}](${e}) ${o}`[Ni](/\n/g,""),r=l[Pe]-o[Pe]-1;this.#C(l,r),this.#p(!0)}));this.#I(`${null==i?"":"!"}[${t}](${e})`);const n=this.#y,s=n[Dn][Pe];this.#f(n,s),this.#p(!0),this.#w()}#p(t,e){this.#u(),this.#h.add(this.#l,t,e)}#b(t,i){const n=new a([i],{[Ji]:"application/octet-stream"}),s=h.createObjectURL(n),o=xs(Es,{href:s,download:`NanoMD-${c.now()}.${t}`});e[Ft][$t](o),o[Ei]()}#w(){null!=this[nn]&&this[nn][De]()}init(t,e=!0,n=!0){if(this[Ft][qt]=!0,this[Ft][Sn]=null,(t=i(t||this.#e)[Xi]())[Pe]){this.#e="";const i=t[Ni](/\n*$/,"")[bi](/\n/);for(let t=0;t<i.length;t++){const e=i[t],n=xs(le,{"data-index":t+1},Fs(e));n[Un]=t=>this.#u(),this[Ft][$t](n)}if(this.#N(),!e)return}else{const t=xs(le,{"data-index":1});if(t[Un]=t=>this.#u(),this[Ft][$t](t),this.#N(),!e)return}n&&this.#p(!0)}changeMode(t=je){this[Ft][ne][Ye]=t}goBack(){this.#c();const t=this.#h.undo();null!=t&&(this[De](t[Yt][Pe]<1?null:t[Yt],!1,!1),this.#f(this[Ft][Ht][t[Se]],t[ii]),this.#w())}goForward(){const t=this.#h.redo();null!=t&&(this.init(t[Yt],!1,!1),this.#f(this[Ft][Ht][t[Se]],t[ii]),this.#w())}addHeading(t,e){const i=t[Ve]||t[ee],n=`${new Array(e).fill("#")[Re]("")}${0===e?"":" "}`;this.#l.check?this.#a((t=>{const s=this.#r.left[Ni](/^\s*\#*\s*/,""),o=this.#r.body,l=this.#r.right,r=`${i?`<h${e}>`:n}${s}${o}${l}${i?`</h${e}>`:""}`[Ni](/\n/g,""),h=r[Pe]-(i?5:0);this.#C(r,h),this.#p(!0)})):(this.#I(i?`<h${e}></h${e}>`:n),this.#f(this.#y,n[Pe]-(i?5:0)),this.#p(!0))}addBold(t){this.#g(t,"**",As)}addItalic(t){this.#g(t,"*",Cs)}addStrikethrough(t){this.#g(t,"~~",ws)}addUnderline(t){this.#g(t,Ss,Ss)}addMarker(t){this.#g(t,"==",Ke)}addSup(t){this.#g(t,"^",ki)}addSub(t){this.#g(t,"~",xi)}addBlockquote(){this.#l.check?this.#a((t=>{for(let t=this.#r.start;t<=this.#r.end;t++){const e=this[Ft][Ht][t];e[Sn]=Fs(`> ${e[Dn]}`)}const e=this[Ft][Ht][this.#r.end],i=e[Dn][Pe];this.#f(e,i),this.#p(!0),this.#w()})):(this.#I("> "),this.#f(this.#y,2),this.#p(!0))}addUl(){this.#S("-")}addOl(){this.#S("1.")}addCode(t){this.#l.check?this.#a((e=>{if(this.#l.isMulti){const t=xs(le,"```"),e=xs(le,"```");t[Un]=e[Un]=t=>this.#u(),this[Ft][bn](t,this[Ft][Ht][this.#r.end+1]),this[Ft][bn](e,this[Ft][Ht][this.#r.start]),this.#f(this[Ft][Ht][this.#r.end+1],this[Ft][Ht][this.#r.end+1][Dn][Pe]),this.#p(!0),this.#w()}else this.#g(t,"`",Wt)})):this.#g(t,"`",Wt)}addLink(t="",e=""){e[Xi]()[Pe]<1&&t[Xi]()[Pe]<1||this.#D(t,e)}addImage(t="",e="",i=""){t[Xi]()[Pe]<1||this.#D(i,t,e)}clear(){this.init(),this.#w()}downloadMd(){this.#b("md",this.getTxt()[Xi]())}downloadHtml(){this.#b("html",`<!DOCTYPE html> <html lang="zh-hant"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Markdown Editor</title> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@pardnchiu/nanomd@latest/dist/NanoMD.css"> <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"><\/script> <style> body { display: flex; justify-content: center; align-item: flex-start; width: 100%; height: 100%; overflow: scroll; } * { -ms-overflow-style: none; scrollbar-width: none; -webkit-overflow-scrolling: touch; touch-action: manipulation; box-sizing: border-box;} body { background-color: ghostwhite; } *::-webkit-scrollbar { display: none; } body>section { padding: 1rem !important; width: 100%; background-color: #fff; box-sizing: border-box; box-shadow: 0 0.25rem 0.5rem #0000000d; transition: 0.3s; } @media screen and (min-width: 640px) { body>section { padding: 3rem !important; max-width: 800px; } } </style> </head> <body><section class="pd-md-viewer">${so(`\n${this.getTxt()}\n`)}</section></body> </html><!DOCTYPE html>`)}openfile(t){if(null==t)return void alert("請選擇檔案");const e=new FileReader;e.readAsText(t),e.onload=()=>{this[Ft][Sn]=null;const t=e.result[Xi]()[Ni](/[\u0020\u00A0]/g," ");this.init(Fs(t),!1),this.#w()}}getTxt(){return[...this[Ft][Ht]].map((t=>"SECTION"===t[$n]?"":t[Dn]))[Re]("\n")}};class oo{check=!1;isMulti=!1;isSingle=!0;index;offset;left;right;selection={};multi={};constructor(e,i,s=!1){const o=t[In]();if(o.rangeCount<1)return;const l=o.getRangeAt(0);let r=i||vs(l.commonAncestorContainer);if(null==r)return;let h,u,c="";if(s){r=e;const t=r[Ln](le);for(let e=0;e<t.length;e++){const i=t[e];c+=(0==e?"":"\n")+i[Dn]}h=0,u=t[Pe]-1}else l.cloneContents()[Gt][ye](((t,e)=>{c+=(0==e?"":"\n")+t[Dn]})),r===e&&(h=d(vs(o.baseNode)[ne][Se])-1,u=d(vs(o.focusNode)[ne][Se])-1);var a=n(r===e),f=!a&&!s&&n(o[Rt]!==o[En]),p=!!s||n(o[En]>o[Rt]),g=!!s||n(h<u);this.check=!0,this.index=a?null:d(r[ne][Se])-1,this.offset=a||f?null:d(o[En]),this.left=a||f?null:r[Dn][wi](0,o[En]),this.right=a||f?null:r[Dn][wi](o[En],r[Dn][Pe]),this.isSingle=f,this.isMulti=a;const y=f?p?o[Rt]:o[En]:null,_=f?p?o[En]:o[Rt]:null;this.selection={body:f?o.toString():c,start:y,end:_,left:f?r[Dn][wi](0,y):null,right:f?r[Dn][wi](_,r[Dn][Pe]):null};const m=a?g?h:u:null,T=s?0:a?g?o[Rt]:o[En]:null,N=a?g?u:h:null,E=s?e[Ht][u][Dn][Pe]:a?g?o[En]:o[Rt]:null;this.multi={start:{index:m,offset:T},end:{index:N,offset:E},left:s?"":a?r[Ht][m][Dn][wi](0,T):null,right:s?"":a?r[Ht][N][Dn][wi](E,r[Dn][Pe]):null}}}class lo{#$;#M;#U=[];#R=[];constructor(t){this.#$=t}clearTimer(){this.clearTimer(this.#M)}add(t,e,i){null==i?this.#x(t,e):this.#M=setTimeout((i=>{this.#x(t,e)}),i)}#x(t,e){this.#U[pi]({[Se]:t[Se],[ii]:t[ii],[Yt]:[...this.#$[Ht]].map((t=>t[Dn]))[Re]("\n")}),e&&(this.#R=[])}undo(){const t=this.#U[(this.#U||[])[Pe]-2];if(null==t)return;let e=this.#U.pop();return this.#R[pi](e),t}redo(){const t=this.#R.pop();if(null!=t)return this.#U[pi](t),t}}class ro{editor;body;start;end;left;right;constructor(t,e){let i,n,s,o;this.editor=t,e.isMulti?(i=e.multi.start.index,n=e.multi.end.index,s=e.multi.left,o=e.multi.right):e.isSingle?(i=e.index,n=e.index,s=e.selection.left,o=e.selection.right):null!==e.index&&null!==e.offset&&(i=e.index,n=e.index,s=e.left,o=e.right),this.body=e.selection.body,this.start=d(i),this.end=d(n),this.left=s[Ni](/&lt;/g,"<")[Ni](/&gt;/g,">")[Ni](/&nbsp;/g," "),this.right=o[Ni](/&lt;/g,"<")[Ni](/&gt;/g,">")[Ni](/&nbsp;/g," ")}removeRows(){for(let t=this.end;t>this.start;t--)this.editor[Ht][t][Ti]()}}class ho{tag="";props={};children=[];data=null;constructor(t){if(t[Yn][Zi]()===Ai){let i=!1;for(const n of e[Ne][Ln](Ai)||[])if(null!=t[$i]&&n[$i]===t[$i]||null!=t[zi]&&n[zi]===t[zi]){i=!0;break}i||e[Ne][$t](t),this[Pi]=Ai}this[Pi]=t[Yn][Zi](),this[ci]=[...t.attributes].reduce(((t,e)=>(t[e.name]=e.value.trim(),t)),{}),this[Ht]=function(t){return s[_e](t[Gt]).filter((t=>t[St]===u[wt]||t[St]===u[Ct]&&t[zi]&&t[zi][Xi]()[Pe]>0))}(t)[ze]((t=>t.nodeType===Node[wt]?new ho(t):t[zi]||""))}getPatches(t){return this.#F(t,this)}#F(t,e,i=[]){if(null==t&&e)return[{[Ji]:Ns.create,[Se]:i,[hn]:e}];if(t&&!e)return[{[Ji]:Ns.remove,[Se]:i}];if(!t&&!e)return[];if(t.tag!==e.tag)return[{[Ji]:Ns[Ni],[Se]:i,[hn]:e}];const n=[];return n[pi](...this.#k(t,e,i)),n[pi](...this.#v(t,e,i)),n}#k(t,e,i=[]){if(null==t||"string"==typeof t||null==e||"string"==typeof e)return[];const n=[],s=t[ci]||{},l=o[It](s)[Pe],r=e[ci]||{},h=o[It](r)[Pe];if(h>0)for(let t in r){const s=r[t];n[pi]({[Ji]:Ns.prop,[hn]:e,key:t,value:s,[Se]:i})}if(l>0){if(h<1)for(let t in s)n[pi]({[Ji]:Ns.prop,[hn]:e,key:t,[tn]:null,[Se]:i});for(let t in r)h>0&&!(t in r)&&n[pi]({[Ji]:Ns.prop,[hn]:e,key:t,[tn]:null,[Se]:i})}return n}#v(t,e,i=[]){if(null==t||"string"==typeof t||null==e||"string"==typeof e)return[];const n=[],o=s[Ue](t[Ht])?t[Ht]:[],l=s[Ue](e[Ht])?e[Ht]:[],h=r.max(o[Pe],l[Pe]);for(let t=0;t<h;t++){const s=o[t],r=l[t],h=i.concat(t);if("string"==typeof s&&"string"==typeof r){if(s===r)continue;n[pi]({[Ji]:Ns.text,[hn]:e,[tn]:r,[Se]:h})}else null==s?n[pi]({[Ji]:Ns.append,[hn]:r,[Se]:h}):null==r?n[pi]({[Ji]:Ns.remove,index:h}):n[pi](...this.#F(s,r,h))}return n}}t.PDMarkdownViewer=t.MDViewer=class{body;vbody;#P;#L="";#j=300;#G=0;#H;#B;#$;constructor(t={}){if((ce in t||ui in t)&&(this.#L=String(t[ce]||t[ui]||"")[Xi]()),Ri in t){t[Ri]}const s=t[Ri]||{},o=i(s[Ye]||Ut)[Xi]()[Zi](),l=n(null==s.fill?1:s.fill)?1:0,r=i(s[ge]||"")[Xi]()||"'Noto Sans TC', sans-serif",h=t.sync||{};this.#j=d(null==h[se]?300:h[se])||300,this.#G=n(h[Oi]||0)?1:0,this[re]=h[re]instanceof PDMarkdownEditor?h[re]:null,e[Ne][$t](xs(Ri,`.${ri}{font-family: ${r}}`));const u=document[un](t[Ie]);typeof t[Ie]===Mi&&null!=u?(this[Ft]=u,u.classList.add(ri)):this[Ft]=xs(Ii+"."+ri),this[Ft][ne][Ye]=y&&o===Ut||o===ie?ie:"",this[Ft][ne].fill=l;const c=t.hashtag||{};if(this.#H=i(c.path||"")[Xi](),this.#B=i(c[Li]||"")[Xi](),null!=t.fillMode){let e=n(t.fillMode)?1:0;this[Ft][ne].fill=e}if(null!=t[se]&&(this.#j=d(t[se])||300),null!=t[Hn]&&(this.#G=n(t[Hn])?1:0),null!=t[ge]){let n=i(t[ge])[Xi]()||"'Noto Sans TC', sans-serif";e[Ne][$t](xs(Ri,`.${ri}{font-family: ${n}}`))}null!=t[qn]&&(this.#H=i(t[qn]||"")[Xi]()),null!=t[Xn]&&(this.#B=i(t[Xn]||"")[Xi]()),this.vbody=new ho(this[Ft]),this.init()}get editor(){return this.#$}set editor(t){this.#$&&(this.#$[Ft][Rn]=null),null!=t&&(this.#$=t,this.#$.viewer=this,this.#G&&null!=this.#$&&(this.#$[Ft][Rn]=t=>{this[Ft][Bn]+=t.deltaY}))}#z(){if(null==this.#$)return"";const t=[...this.#$[Ft][Ln](le)];let e="";for(let n of t){var i=n[Dn][Ni](/[\u00A0\u0020]/g," ");i[Xi]()[Pe]<1?e+="\n":e+=i+"\n"}return e[Xi]()}clear(){let t=this[Ft].cloneNode(!0);t[Sn]="";let e=new ho(t);this[Ft][Sn]="",this.vbody=e}init(e=""){let i=this.#L,n=this[Ft][Bn];t[zt](this.#P),this.#P=t[Zn]((()=>{if(t[zt](this.#P),i&&this[Ft][Sn]&&i===this[Ft][Sn])return;let o=e||this.#z()||i;o=so(`\n${o}\n`,this.#H,this.#B);let l=this[Ft].cloneNode(!0);l[Sn]=o;let r=new ho(l);const h=r.getPatches(this.vbody);s[Ue](h)&&this.#K(this[Ft],h),this.vbody=r;for(let e of[...this[Ft][Ln](vt+"."+Jt)])e[Un]=async e=>{t[zt](Rs);const i=e[Li][xn],n=i[gn],s=i[Ht][0][Dn];try{await navigator.clipboard.writeText(s),n[Dt](Fi),Rs=t[Zn]((t=>{n[Ti](Fi)}),1e3)}catch(t){console[ae](t),n[Dt](ae)}};let u=setInterval((()=>{null!=PR&&(clearInterval(u),this[Ft][Bn]=n,PR.prettyPrint())}),50)}),this.#j)}changeMode(t=je){this[Ft][ne][Ye]=t}#K(t,e){if(null!=t&&s[Ue](e)){this.#W(t,e);for(const i of e){const{index:e}=i,n=l.parse(l.stringify(e||[]));let s;i.type===Ns.append&&(s=n?.pop());const o=n?this.#V(t,n):t;o&&(i.type===Ns.create&&hn in i?this.#Z(o,i):i.type===Ns.replace&&hn in i&&null!=o[Fn]?this.#Y(o,i):i.type===Ns.append&&hn in i&&null!=s?this.#q(o,i,s):i.type===Ns.prop&&"key"in i&&tn in i&&o instanceof Element?this.#X(o,i.key,i.value||"",i[hn]):i.type===Ns.text&&tn in i&&o.nodeType===u[Ct]&&(o[zi]=i.value||""))}}}#W(t,e){const i=e.filter((t=>t.type===Ns.remove)).sort(((t,e)=>{const i=(e.index.length||0)-(t.index.length||0);if(0!==i)return i;for(let i=0;i<(t.index.length||0);i++)if((t.index[i]||0)!==(e.index[i]||0))return(e.index[i]||0)-(t.index[i]||0);return 0}));for(const e of i){const i=this.#V(t,e.index);null!=i&&null!=i[Fn]&&i[Fn].removeChild(i)}}#Z(t,i){if(i.type!==Ns.create||!(hn in i))return;const n="string"==typeof i[hn]?e[mn](i[hn]):this.#J(i[hn]);null!=t[xn]&&t[xn][$t](n)}#Y(t,i){if(i.type!==Ns.replace||!(hn in i)||null==t[Fn])return;const n="string"==typeof i[hn]?e[mn](i[hn]):this.#J(i[hn]);if(t[Fn].replaceChild(n,t),!(n instanceof Text||"string"==typeof i[hn])){for(const t in i[hn][ci])this.#X(n,t,i[hn][ci][t]||"",i[hn]);this.#Q(i[hn],n)}}#q(t,i,n){if(i.type!==Ns.append||!(hn in i)||null==n)return;const s="string"==typeof i[hn]?e[mn](i[hn]):this.#J(i[hn]);if(n+1>t[Ht][Pe]?t[$t](s):t.insertBefore(s,t[Ht][n+1]),"string"!=typeof i[hn]){for(const[e,s]of o.entries(i[hn][ci]))this.#X(t[Ht][n],e,s||"",i[hn]);this.#Q(i[hn],t[Ht][n])}}#X(t,e,i,n){null==i?t[_removeAttribute](e):null!=t&&t[zn](e,i)}#Q(t,e){if("string"!=typeof t)for(const i in t.children.filter((t=>"string"!=typeof t))){if(null==e)continue;const n=t.children[+i],s=e.children[+i];if("string"!=typeof n){for(const[t,e]of o.entries(n[ci]))this.#X(s,t,e||"",n);this.#Q(n,s)}}}#V(t,e){let i=t,n=s.from(i.childNodes).filter((t=>t.nodeType===u[wt]||t.nodeType===u[Ct]&&""!==t[zi]?.trim()))||[];for(const t of e)i=n[t],null!=i&&(n=s.from(i.childNodes).filter((t=>t.nodeType===u[wt]||t.nodeType===u[Ct]&&""!==t[zi]?.trim()))||[]);return i}#J(t){const i=e.createElement(t.tag);if(t[ci])for(const[e,n]of o.entries(t[ci]))e[Ot](":")||e[Ot]("@")||void 0!==n&&i[zn](e,n);for(const n of t[Ht])"string"==typeof n?i[$t](e[mn](n)):i[$t](this.#J(n));return i}}}("undefined"==typeof window?window={}:window);