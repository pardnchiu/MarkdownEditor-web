!function(){const t=window,e=document,i=String,s=Boolean,n=Array,o=Object,r=JSON,l=Math,a=Map,u=URL,h=Node,c=Date,d=Blob,f=RegExp,p=parseInt,g=location,m="video/mp4",y="video/quicktime",v=["javascript","js","ts","html","css","xml","json","sql","java","python","ruby","php","cpp","csharp","swift","typescript","kotlin","go","rust","perl","bash"],w=t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)").matches,b="span.material-symbols-outlined",C=/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/[\w]+\/|groups\/[\w]+\/videos\/|album\/\d+\/video\/|video\/|)(\d+)/,A=/\.([\w_-]+)?/gi,$=/\#([\w_-]+)?/i,M=/^\w+(?=[\#\.]*)/i,_=/[\"\']{0,1}([\u0020\u00A0\u0009]*)(mailto\:)?([\u0020\u00A0\u0009]*)(\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)([\u0020\u00A0\u0009]*)[\"\']{0,1}/,I=/(\s{1})\\?[\#＃]{1}([\u4e00-\u9fff\u3040-\u30ff\uac00-\ud7a3a-zA-Z0-9_]+)/,k=/[& \<\>\"\']/g,x=/\[([^\]\n]+)?\]\(([^\)\n\u0020\u00A0\u0009]+)([\u0020\u00A0\u0009]*[\"\']([^\)\n]+)[\"\'])?\)/,T=/\`([^\n\`]*)\`/,N=/^\n|\n$/g,D=/\`{3}(\w*)([\s\S]*?)\s*\`{3}/,E=/\*([^\n\*]*)\*/,S=/\_([^\n\_]*)\_/,L=/^\s|\s$/g,P=/(\n[\u0020\u00A0\u0009]*|\n[\u0020\u00A0\u0009]*>[\u0020\u00A0\u0009]*|\n[\u0020\u00A0\u0009]*([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+)\\?(\#{1,6})[\u0020\u00A0\u0009]+([^\n]+)/,j=/(\n)([^\n]+)\n\={3,}([\u0020\u00A0\u0009]*\n)/,R=/(\n)([^\n]+)\n\-{3,}([\u0020\u00A0\u0009]*\n)/,O=/([\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*)\\?(\#{1,6})[\u0020\u00A0\u0009]+([^\n\|]*)([\u0020\u00A0\u0009]*)/,F=/(\n[\u0020\u00A0\u0009]*)(\*{3,}|\-{3,})([\u0020\u00A0\u0009]*\n)/,H=/\!\[([^\]\n]+)?\]\(([^\)\n\u0020\u00A0\u0009]+)([\u0020\u00A0\u0009]*[\"\']([^\)\n]+)[\"\'])?\)(\(([0-9]+\%?)?[\u0020\u00A0\u0009\*x]+([0-9]+\%?)?([\u0020\u00A0\u0009]+(left|right))?\))?/,z=/^['"].*['"]$/,K=/\n(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+(.+)(\n.*\S.*)*)+/,B=/(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]+(.+)(\n.*\S.*)*)+/,U=/^(([\-\*\+]|\d+\.)[\u0020\u00A0\u0009]*[^\n]+)/,G=/\={2}([^\n\=]*)\={2}/,Z=/\~{2}([^\n\~]*)\~{2}/,q=/\*{2}([^\n\*]*)\*{2}/,W=/\_{2}([^\n\_]*)\_{2}/,V=/\~([^\n\~]*)\~/,Y=/\^([^\n\^]*)\^/,J=/\.mov$/,X=/\.mp4$/,Q=/[A-Za-z\%]/,tt=/[\"\']{0,1}([\u0020\u00A0\u0009]*)(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*))([\u0020\u00A0\u0009]*)[\"\']{0,1}/,et=/(\<[\u00A0\u0020\u0009\>]*\/?[\u00A0\u0020\u0009\>]*br[\u00A0\u0020\u0009\>]*\/?[\u00A0\u0020\u0009\>]*\>|\n)/,it=/\n/,st=/\\\!/g,nt=/\\\`/g,ot=/\\\#/g,rt=/\\\*/g,lt=/\\\_/g,at=/\\\~/g,ut=/\\\^/g,ht=/\\\=/g,ct=/\\\</g,dt=/\\\>/g,ft=/\\\[/g,pt=/\\\]/g,gt=/\\\(/g,mt=/\\\)/g,yt=/\$/g,vt=/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/,wt="mailto:",bt="\n",Ct="_blank",At="selected",$t="background",Mt="textarea",_t="startsWith",It="key",kt="stringify",xt="keys",Tt="TEXT_NODE",Nt="ELEMENT_NODE",Dt="nodeType",Et="add",St="alt",Lt="appendChild",Pt="as",jt="auto",Rt="baseOffset",Ot="blockquote",Ft="body",Ht="br",zt="button",Kt="charAt",Bt="checked",Ut="checkbox",Gt="childNodes",Zt="children",qt="class",Wt="clearTimeout",Vt="clipboardData",Yt="code",Jt="Color",Xt="color",Qt="content",te="contentEditable",ee="controls",ie="copy",se="create",ne="ctrlKey",oe="dark",re="dataset",le="delay",ae="display",ue="div",he="editor",ce="em",de="empty",fe="emptyContent",pe="error",ge="float",me="floor",ye="focus",ve="fontFamily",we="forEach",be="from",Ce="get",Ae="has",$e="head",Me="height",_e="hide",Ie="href",ke="id",xe="iframe",Te="img",Ne="index",De="init",Ee="inner",Se="input",Le="insert",Pe="isArray",je="join",Re="label",Oe="language",Fe="lastChild",He="lazy",ze="length",Ke="li",Be="light",Ue="link",Ge="list",Ze="loading",qe="map",We="mark",Ve="match",Ye="metaKey",Je="min",Xe="mode",Qe="Name",ti="name",ei="node",ii="none",si="number",ni="object",oi="offset",ri="ol",li="outerHTML",ai="parent",ui="pd-md-editor",hi="pd-md-viewer",ci="placeholder",di="pre",fi="props",pi="preload",gi="prettyprint",mi="prevent",yi="push",vi="px",wi="querySelector",bi="random",Ci="rel",Ai="remove",$i="replace",Mi="click",_i="script",Ii="scroll",ki="section",xi="set",Ti="slice",Ni="source",Di="span",Ei="split",Si="src",Li="string",Pi="strong",ji="style",Ri="sub",Oi="success",Fi="sup",Hi="table",zi="tag",Ki="target",Bi="tbody",Ui="td",Gi="temp",Zi="test",qi="textContent",Wi="th",Vi="thead",Yi="title",Ji="toLowerCase",Xi="toUpperCase",Qi="tr",ts="trim",es="type",is="ul",ss="value",ns="video",os="viewer",rs="width",ls="console",as="apply",us="void",hs="vdom",cs="getElementById",ds="crossOrigin",fs="preconnect",ps=Et+"EventListener",gs="background"+Jt,ms=qt+Qe,ys=qt+"List",vs=se+"DocumentFragment",ws=se+"Element",bs=se+"TextNode",Cs=be+"CharCode",As=ye+"Background"+Jt,$s=ye+"Offset",Ms=ye+"Text"+Jt,_s=Ce+"Data",Is=Ce+"Selection",ks=Ae+"OwnProperty",xs=Ne+"Of",Ts=Ee+"HTML",Ns=Ee+"Text",Ds=Le+"Before",Es=ei+Qe,Ss=ei+"Value",Ls="onclick",Ps="onwheel",js=ai+"Element",Rs=ai+"Node",Os=ci+Jt,Fs=mi+"Default",Hs=mi+"Refresh",zs=wi+"All",Ks=Ai+"AllRanges",Bs=Ii+"Height",Us=Ii+"Sync",Gs=Ii+"Top",Zs=xi+"Attribute",qs=xi+"Data",Ws=xi+"End",Vs=xi+"Start",Ys=xi+"Timeout",Js=zi+Qe,Xs=zi+"Path",Qs=zi+"Target";let tn="";const en="@excl@",sn="@grave@",nn="@num@",on="@ast@",rn="@lowbar@",ln="@tilde@",an="@Hat@",un="@equal@",hn="@lt@",cn="@gt@",dn="@lsqb@",fn="@rsqb@",pn="@lpar@",gn="@rpar@",mn="@dollar@",yn="&lt;",vn="&gt;",wn="&amp;",bn="&nbsp;",Cn="&quot;",An="&apos;",$n={create:"CREATE",append:"APPEND",replace:"REPLACE",text:"TEXT",prop:"PROP",remove:"REMOVE"};Array[be]({[ze]:26},((t,e)=>i[Cs](97+e)))[we](((e,s)=>{let n=s<10,o=s>=10&&s<20,r=s>=20,l=i(s),a=l[Kt](l[ze]-1),u=i=>{tn+=i?e[Xi]():e,t[(i?"$":"_")+(r?"_":"")+a+(o?"_":"")]=i?e[Xi]():e};u(0),u(1),n&&(tn+=s,t["_"+e]=s)}));t._a,t._b,t._c,t._d,t._e,t._f,t._g,t._h,t._i,t._j;const Mn=t._0,_n=t._1,In=(t._2,t._3,t._4,t._5,t._6),kn=t._7,xn=t._8,Tn=(t._9,t._0_,t._1_,t._2_,t._3_,t._4_,t._5_,t._6_,t._7_,t._8_),Nn=(t._9_,t.__0),Dn=(t.__1,t.__2,t.__3,t.__4,t.__5,t.$0,t.$1,t.$2,t.$3,t.$4,t.$5,t.$6,t.$7,t.$8,t.$9,t.$0_,t.$1_,t.$2_,t.$3_,t.$4_,t.$5_,t.$6_,t.$7_,t.$8_,t.$9_,t.$_0,t.$_1,t.$_2,t.$_3,t.$_4,t.$_5,"https://fonts.googleapis.com"),En=Dn+"/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&display=swap",Sn="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js",Ln="https://cdn.jsdelivr.net/npm/@pardnchiu/nanomd@1.11.3/dist/NanoMD.css",Pn="NanoMD\nGitHub: https://github.com/pardnchiu/NanoMD\nCreator: Pardn Chiu\nLicense: Proprietary";let jn;for(let t of[Hn(Ue,{[Ci]:fs,[Ie]:"https://fonts.gstatic.com",[ds]:""}),Hn(Ue,{[Ci]:fs,[Ie]:Dn,[ds]:""}),Hn(Ue,{[Ci]:pi,[Ie]:En,[Pt]:ji,[ds]:"anonymous"}),Hn(Ue,{[Ci]:"stylesheet",[Ie]:En}),Hn(Ue,{[Ci]:"preconnect",[Ie]:"https://cdn.jsdelivr.net"}),Hn(Ue,{[Ci]:pi,[Ie]:Sn,[Pt]:_i}),Hn(_i,{[Si]:Sn}),Hn(Ue,{[Ci]:pi,[Ie]:Ln,[Pt]:ji}),Hn(Ue,{[Ci]:"stylesheet",[Ie]:Ln})])e[$e][Lt](t);document.addEventListener("DOMContentLoaded",(t=>{!function(...t){const i=Hn(_i,`${ls}.log.${as}(${us} 0, ${JSON.stringify(t)});`);e[Ft][Lt](i),i[Ai]()}("%c"+Pn,"line-height: 1.75rem; font-size: 0.875rem;")}));const Rn="abcdefghijklmnopqrstuvwxyz0123456789",On=new a;function Fn(t=32){let e="";for(let i=0;i<t;i++)e+=Rn[Kt](l[me](36*l[bi]()));return On[Ae](e)?Fn(t):(On[xi](e,1),e)}function Hn(t="",i,s){const r=((t[Ve](M)||[])[0]||"")[ts](),l=((t[Ve]($)||[])[1]||"")[ts](),a=(A[Zi](t)?t[Ve](A):[])[qe]((t=>t[$i](/^\./,"")));if(r[ze]<1)return;let u,h,c=t===Gi,d=c?e[vs]():e[ws](r);if(91!=Pn[ze])return d;l[ze]>0&&(d.id=l);for(const t of a)d[ys][Et](t);if(null==i&&null!=s&&([i,s]=[s,null]),null!=i&&null!=s)[u,h]=[i,s];else if(null==s)typeof i===Li||typeof i===si||n[Pe](i)?h=i:u=i;else if(null==i)return d;return(()=>{if(typeof u===ni&&null!=u)for(const t in u){if(!u[ks](t))continue;const e=u[t];if({[ss]:1,[Ns]:1,[Ts]:1,[qi]:1,[te]:1,[At]:1,[Bt]:1}[t])d[t]=e;else if({[ae]:1,[Xt]:1,[gs]:1,[$t]:1,[rs]:1,[Me]:1,[ge]:1}[t])d[ji][t]=e;else if(t===re&&typeof e===ni)for(const t of o[xt](e))d[re][t]=e[t];else null!=e&&d[Zs](t,e)}})(),(()=>{if(null==h)return;const t=typeof h===ni;if(n[Pe](h)){for(let t of h){const i=t instanceof Element;typeof t===Li||typeof t===si?c?d[Lt](e[bs](t)):d[Ts]+=t:i&&d[Lt](t)}return}if(t)return;const i=h,s=r===Se,o=r===Mt;r===Te||r===Ni?d[Si]=i:o||s?d[ss]=i:c?d[Lt](e[bs](h)):d[Ts]=i})(),d}function zn(t=""){return"{{"+(t[ts]()||jt)+"-"+Fn()+"}}"}function Kn(t=""){return t[$i](k,(t=>({"&":wn," ":bn,"<":yn,">":vn,'"':Cn,"'":An}[t])))}function Bn(t){const e=Hn(ue);return e[Lt](t),e[Ts]}function Un(t,e=""){return new f(t,e)}function Gn(t){if(t)return t[ms]===ui||t[Es][Ji]()===ue&&t[Rs][ms]===ui?t:Gn(t[Rs])}function Zn(t=""){if((t=t[ts]())[ze]<1)return"";const e=t[Ve](vt)||[];return e[ze]>2&&11===e[1][ze]?e[1]:""}function qn(t=""){if((t=t[ts]())[ze]<1)return"";return(t[Ve](C)||[])[1]}let Wn=new a;function Vn(t,e="",i="",s="",n="",o=""){const r=zn(i),l=s instanceof HTMLElement?s:Hn(i,s);return Wn[xi](r,l[li]),e[$i](t,n+r+o)}const Yn=/(\n)(\>\s*\[\!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\n)?(\>[^\n]*(\n)?)+/,Jn=/^\>[\u00A0\u0020\u0009]?/,Xn=/^[\u00A0\u0020\u0009]*\>[\u00A0\u0020\u0009]?/,Qn=/\n\>[\u00A0\u0020\u0009]?/g,to=/\[\!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]/,eo={NOTE:"info",TIP:"lightbulb",IMPORTANT:"sms",WARNING:"warning",CAUTION:"error"};function io(t=""){let i;for(const e of t[Ve](Un(Yn,In))||[]){const n=e[Ve](Yn),o=n[1]||"",r=n[3]||"",l=n[5]||"";i=Hn(Ot+(r[ze]?"."+r:"")),s(e,r),t=Vn(e,t,Ot,i,o,l)}function s(t,e=""){const s=fo(t[ts]()[$i](Jn,"")[$i](Qn,"\n"))[Ei](it);for(const t in s)i[Lt](n(s[t],p(t),e))}function n(t,i=0,s=""){const o=Hn(Gi),r=t[$i](Xn,"");if(to[Zi](t)&&0===i)o[Lt](Hn(Di+".hint",[eo[s]?Hn(b,eo[s]):null,s])),o[Lt](Hn(Ht));else if(Xn[Zi](t)){let t=Hn(Ot);t[Lt](n(r)),o[Lt](t)}else/^[\u00A0\u0020\u0009]*\{\{/[Zi](t)?o[Lt](e[bs](t)):o[Lt](Hn(Di,t));return o}return t}function so(t=""){let e=[[Yt,T]];for(let i of e){const e=i[0],s=i[1];for(let i of t[Ve](Un(s,In))||[]){const n=i[Ve](s);if(L[Zi](n[1]||""))continue;let o=(n[1]||"")[ts]();o[ze]<1||(e!=Yt?t=t[$i](i,Hn(e,o)[li]):(o=Kn(o),t=Vn(i,t,e,o)))}}return t}function no(t){let e=0,i=Hn(ri);for(let s in t){const n=t[s];0===p(s)&&(e=l.floor((n[Ve](/^\s*/)||[""])[0][ze]/4));const o=Un(`^\\s{0,${4*e}}`);i[Lt](Hn(Ke,Kn(n[$i](o,""))))}return i}function oo(t=""){let e=[[Pi,q],[Pi,W],[Tn,Z],[We,G],[ce,E],[ce,S],[Fi,Y],[Ri,V]];for(let t of e){i(t[0],t[1])}function i(e,i){for(let s of t[Ve](Un(i,In))||[]){const n=s[Ve](i);if(L[Zi](n[1]||""))continue;let o=(n[1]||"")[ts]();o[ze]<1||(e!=Yt?t=t[$i](s,Hn(e,o)[li]):(o=Kn(o),t=Vn(s,t,e,o)))}}return t}function ro(t=""){let e=[[Pi,q],[Pi,W],[Tn,Z],[ce,E],[ce,S]];for(let t of e){i(t[0],t[1])}function i(e,i){for(let s of t[Ve](Un(i,In))||[]){const n=s[Ve](i);if(L[Zi](n[1]||""))continue;let o=(n[1]||"")[ts]();o[ze]<1||(e!=Yt?t=t[$i](s,Hn(e,o)[li]):(o=Kn(o),t=Vn(s,t,e,o)))}}return t}function lo(t="",e="",s=Ct){if(i(e||"")[ts]()[ze]<1)return t;for(let i of t[Ve](Un(I,In))||[]){if(i[Ve](/^\\/))continue;const n=i[Ve](I);if(n[ze]<1)continue;const o=n[1],r=(n[2]||"")[ts](),l=zn(Mn);if(r[ze]<1)continue;const a=Hn(Gi,[Hn(Mn+"."+zi,{[Ie]:e+r,[Ki]:s===Ct?Ct:"_self"},r)]);Wn[xi](l,Bn(a)),t=t[$i](i,o+l)}return t}function ao(t=""){return(()=>{for(let e of t[Ve](Un(P,In))||[]){const i=e[Ve](P);if(i[ze]<1)continue;const s=i[1]||"",n=(i[3]||"")[ts]()[ze],o=(i[4]||"")[ts]();0!=l[Je](n,o[ze])&&(t=Vn(e,t,kn+n,o,s))}})(),(()=>{for(let e of t[Ve](Un(O,In))||[]){const i=e[Ve](O);if(i[ze]<1)continue;const s=i[1]||"",n=(i[2]||"")[ts]()[ze],o=(i[3]||"")[ts](),r=i[4]||"";0!=l[Je](n,o[ze])&&(t=Vn(e,t,kn+n,o,s,r))}})(),(()=>{for(let e of t[Ve](Un(j,In))||[]){const i=e[Ve](j);if(i[ze]<1)continue;const s=i[1]||"",n=(i[2]||"")[ts](),o=i[3]||"";n[ze]<1||(t=Vn(e,t,kn+1,n,s,o))}})(),(()=>{for(let e of t[Ve](Un(R,In))||[]){const i=e[Ve](R);if(i[ze]<1)continue;const s=i[1]||"",n=(i[2]||"")[ts](),o=i[3]||"";n[ze]<1||(t=Vn(e,t,kn+2,n,s,o))}})(),t}function uo(t=""){for(let e of t[Ve](Un(F,In))||[]){const i=e[Ve](F);if(i[ze]<1)continue;const s=i[1]||"",n=i[3]||"",o=zn("hr");Wn[xi](o,"<hr>"),t=t[$i](e,s+o+n)}return t}function ho(t=""){const e="this.parentElement.nextElementSibling.style.display='block';this.parentElement.style.display='none'",i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNTkyXzMwNDkpIj4KPHBhdGggZD0iTTEyMCA2MEMxMjAgMjYuODYyOSA5My4xMzcxIDAgNjAgMEMyNi44NjI5IDAgMCAyNi44NjI5IDAgNjBDMCA5My4xMzcxIDI2Ljg2MjkgMTIwIDYwIDEyMEM5My4xMzcxIDEyMCAxMjAgOTMuMTM3MSAxMjAgNjBaIiBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIwLjUiLz4KPHBhdGggZD0iTTg0LjM2MzMgNTYuNTgwM0M4Ni45MzAyIDU4LjEzNzYgODYuOTMwMiA2MS44NjI2IDg0LjM2MzMgNjMuNDE5OUw1MS44MjQ4IDgzLjE2MTJDNDkuMTU5MSA4NC43Nzg2IDQ1Ljc1IDgyLjg1OTQgNDUuNzUgNzkuNzQxNFY0MC4yNTg4QzQ1Ljc1IDM3LjE0MDggNDkuMTU5MSAzNS4yMjE2IDUxLjgyNDggMzYuODM4OUw4NC4zNjMzIDU2LjU4MDNaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI1OTJfMzA0OSI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPg==";function s(t,s,n,o){return Bn(Hn(Gi,[Hn(Mn,{[Yi]:o,[Ie]:s,[Ki]:Ct},n||s),Hn("section.more",[Hn("img.cover","https://i.ytimg.com/vi/"+t+"/mqdefault.jpg"),Hn("img.icon",{[Ls]:e},i)]),Hn(xe,{[Ze]:He,[rs]:"640px",[Si]:"https://www.youtube.com/embed/"+t,frameborder:0,allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",[ae]:ii})]))}function n(t,s,n,o){const r=function(t){const e=`https://vimeo.com/api/v2/video/${t}.json`;let i=null;const s=new XMLHttpRequest;s.open("GET",e,!1);try{s.send(),200===s.status?i=JSON.parse(s.responseText)[0].thumbnail_large:console.error("HTTP 錯誤:",s.status)}catch(t){console.error("無法獲取縮圖:",t)}return i}(t);return Bn(Hn(Gi,[Hn(Mn,{[Yi]:o,[Ie]:s,[Ki]:Ct},n||s),Hn("section.more",[Hn("img.cover",r),Hn("img.icon",{[Ls]:e},i)]),Hn(xe,{[Ze]:He,[rs]:"640px",[Si]:"https://player.vimeo.com/video/"+t,frameborder:0,allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:"",[ae]:ii})]))}return(()=>{for(let e of t[Ve](Un(x,In))||[]){const i=e[Ve](x);if(i[ze]<1)continue;const o=(i[1]||"")[ts](),r=(i[2]||"")[ts](),a=(i[4]||"")[ts](),u=(Zn(r)||"")[ts](),h=(qn(r)||"")[ts]();if(0!=l[Je](o[ze],r[ze]))if(u[ze])t=Vn(e,t,ue,s(u,r,o,a));else if(h[ze])t=Vn(e,t,ue,n(h,r,o,a));else{const i=Hn(Mn,{[Yi]:a,[Ie]:r,[Ki]:Ct},o);t=Vn(e,t,Mn,i)}}})(),(()=>{for(let e of t[Ve](Un(tt,In))||[]){if(e[Ve](z))continue;const i=e[Ve](tt);if(i[ze]<1)continue;const o=i[1]||"",r=(i[2]||"")[ts](),l=i[5]||"",a=(Zn(r)||"")[ts](),u=(qn(r)||"")[ts]();if(!(r[ze]<1))if(a[ze])t=Vn(e,t,ue,s(a,r),o,l);else if(u[ze])t=Vn(e,t,ue,n(u,r));else{const i=Hn(Mn,{[Ie]:r,[Ki]:Ct},r);t=Vn(e,t,Mn,i,o,l)}}})(),(()=>{for(let e of t[Ve](Un(_,In))||[]){if(e[Ve](z))continue;const i=e[Ve](_);if(i[ze]<1)continue;const s=(i[1]||"")+(i[2]||"")+(i[3]||""),n=(i[4]||"")[ts](),o=i[8]||"";if(n[ze]<1)continue;const r=Hn(Mn,{[Ie]:wt+n,[Ki]:Ct},n);t=Vn(e,t,Mn,r,s,o)}})(),t}function co(t=""){return(()=>{for(let e of t[Ve](Un(x,In))||[]){const i=e[Ve](x);if(i[ze]<1)continue;const s=(i[1]||"")[ts](),n=(i[2]||"")[ts](),o=(i[4]||"")[ts]();if(0==l[Je](s[ze],n[ze]))continue;const r=Hn(Mn,{[Yi]:o,[Ie]:n,[Ki]:Ct},s);t=Vn(e,t,Mn,r)}})(),(()=>{for(let e of t[Ve](Un(tt,In))||[]){if(e[Ve](z))continue;const i=e[Ve](tt);if(i[ze]<1)continue;const s=i[1]||"",n=(i[2]||"")[ts](),o=i[5]||"";if(n[ze]<1)continue;const r=Hn(Mn,{[Ie]:n,[Ki]:Ct},n);t=Vn(e,t,Mn,r,s,o)}})(),(()=>{for(let e of t[Ve](Un(_,In))||[]){if(e[Ve](z))continue;const i=e[Ve](_);if(i[ze]<1)continue;const s=(i[1]||"")+(i[2]||"")+(i[3]||""),n=(i[4]||"")[ts](),o=i[8]||"";if(n[ze]<1)continue;const r=Hn(Mn,{[Ie]:wt+n,[Ki]:Ct},n);t=Vn(e,t,Mn,r,s,o)}})(),t}function fo(t=""){for(let i of t[Ve](Un(K,In))||[])e(i);function e(e){let i;e[ts]()[$i](Un(et,In),bt)[Ei](et)[we](((t,e)=>{const s=t[Ve](B)||[],n=s[ze]<1?null:/\d+\./[Zi]((s[2]||"")[ts]())?ri:is,o=(t[Ve](/\s{4}/g)||[])[ze];let r=s[ze]<1?t[$i](/^\s*([\-\*\+]|\d+\.)?\s*/g,""):(s[3]||"")[ts]();if(0===p(e)&&null==n)return;0===p(e)&&(i=Hn(n));let l=i;function a(t,e){if(/^\[\s*(\x)?\s*\]/[Zi](e)){const i=e[ts]()[Ve](/^\[\s*(\x)?\s*\]/);e=e[$i](/^\[\s*(\x)?\s*\]\s*/,"");const s=null!=i[1];t[Lt](Hn(Ke,[Hn(Re,[Hn(Se,{[es]:Ut,[Bt]:s?"":null,[Ls]:"return false;"}),Hn(Di,e)])]))}else t[Lt](Hn(Ke,e))}if(/^\s{0,3}([\-\*\+]|\d+\.)/[Zi](t))a(l,r);else if(/^\s{4,}([\-\*\+]|\d+\.)/[Zi](t)){l=i[Fe];for(let t=0;t<o&&(null!=l&&null!=l[Js]);t++)if(t==o-1&&l[Js][Ji]()==Ke)if(l[Fe]instanceof HTMLElement&&(l[Fe][Js][Ji]()==ri||l[Fe][Js][Ji]()==is))a(l[Fe],r);else if(/^\[\s*(\x)?\s*\]/[Zi](r)){const t=r[ts]()[Ve](/^\[\s*(\x)?\s*\]/);r=r[$i](/^\[\s*(\x)?\s*\]\s*/,"");const e=null!=t[1];l[Lt](Hn(n,[Hn(Ke,[Hn(Re,[Hn(Se,{[es]:Ut,[Bt]:e?"":null,[Ls]:"return false;"}),Hn(Di,r)])])]))}else l[Lt](Hn(n,[Hn(Ke,r)]));else l=l[Fe][Fe]}else{if(null==i)return;for(l=i[Fe];null!=l[Fe];)l=l[Fe];if(l instanceof HTMLElement);else if(/^\{\{(h\d|img|pre)/[Zi](l[Ss]||""));else{for(;l[js][Js][Ji]()!=Ke;)l=l[js];l[js][Lt](Hn(Ht))}l[js][Ts]+=r}})),null!=i&&(t=Vn(e,t,Ge,i))}return t}function po(t=""){for(let e of t[Ve](Un(H,In))||[]){const i=e[Ve](H);if(i[ze]<1)continue;const s=(i[1]||"")[ts](),n=(i[2]||"")[ts](),o=(i[4]||"")[ts]();let r=(i[6]||"")[ts](),l=(i[7]||"")[ts](),a=(i[9]||"")[ts]();if(n[ze]<1)continue;r[ze]&&!Q[Zi](r)&&(r+=vi),l[ze]&&!Q[Zi](l)&&(l+=vi);const u=J[Zi](n),h=X[Zi](n);let c;c=u?Hn(ns,{[ee]:"",[Yi]:o,[rs]:r||null,[Me]:l||null},[Hn(Ni,{[es]:y},n)]):h?Hn(ns,{[ee]:"",[Yi]:o,[rs]:r||null,[Me]:l||null},[Hn(Ni,{[es]:m},n)]):Hn(Te,{[St]:s,[Yi]:o,[rs]:r||null,[Me]:l||null,[ge]:a[ze]?a:null},n),null!=c&&(t=Vn(e,t,Te,c))}return t}function go(t=""){for(let e of t[Ve](Un(H,In))||[]){const i=e[Ve](H);if(i[ze]<1)continue;const s=(i[1]||"")[ts](),n=(i[2]||"")[ts](),o=(i[4]||"")[ts]();if(n[ze]<1)continue;const r=J[Zi](n),l=X[Zi](n);let a;a=r?Hn(ns,{[ee]:"",[Yi]:o},[Hn(Ni,{[es]:y},n)]):l?Hn(ns,{[ee]:"",[Yi]:o},[Hn(Ni,{[es]:m},n)]):Hn(Te,{[St]:s,[Yi]:o},n),null!=a&&(t=Vn(e,t,Te,a))}return t}function mo(t=""){for(let e of t[Ve](Un(D,In))||[]){const i=e[Ve](D);if(i[ze]<1)continue;const s=null==i[2][Ve](N),n=s?"":(i[1]||"")[ts]()[Ji](),o=i[2]||"",r=-1!=v[xs](n),l=o[$i](N,"")[Ei](it);let a;a=s?Hn(Yt+"."+gi,Kn(o)):Hn(di+"."+gi,{[ti]:n},[Hn(Yt+(r?"."+Oe+"-"+n:""),{[ti]:n},[no(l)]),Hn(zt+"."+ie)]),t=Vn(e,t,s?Yt:di,a)}return t}function yo(t=""){let e;function i(t){const e=t[Ve](/^([\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*)+/)||[],i=t[Ve](/[\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*$/)||[];return[e[0]||"",i[0]||""]}function s(t){const i=t[ts]()[Ei](it);e=Hn(Gi,[Hn(Hi,[Hn(Vi),Hn(Bi)])]);let s=!0,o=[],r=0;for(let t in i){const l=i[t],a=l[Ve](/((\s*)\|?((?:.*?\|)*.*)\|?)+/)||[];if(a[ze]<1)continue;const u=(a[3]||"")[ts]()[$i](/[\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*$/,""),h=/^[\u0020\u00A0\u0009]*\|?([\u0020\u00A0\u0009]*[\-\:]+[\u0020\u00A0\u0009]*\|?)+[\u0020\u00A0\u0009]*$/[Zi](l),c=u[Ei](/[\u0020\u00A0\u0009]*\|[\u0020\u00A0\u0009]*/);if(0===p(t)&&(r=c[ze]),h){for(let t of l[$i](/^([\u0020\u00A0\u0009]*\|)|(\|[\u0020\u00A0\u0009]*)$/g,"")[Ei](/\|/))/^\-+\:$/[Zi](t[ts]())?o.push("right"):/^\:\-+\:$/[Zi](t[ts]())?o.push("center"):o.push("left");const t=[...e.firstChild.firstChild.childNodes[0].childNodes];for(let e in t)t[e].setAttribute("align",o[e]);s=!1}else n(s,c,r,o)}}function n(t=!0,i=[],s=0,n=[]){const o=t?e.firstChild.firstChild:e.firstChild[Fe],r=Hn(Qi);for(let e=0;e<s;e++)r[Lt](Hn(t?Wi:Ui,{align:n[e]},i[e]||""));o[Lt](r)}return(()=>{const n=/([^\n]*)(?:[\u0020\u00A0\u0009]*\|[^\n]*\|[^\n]*\n)[\u0020\u00A0\u0009]*\|([\u0020\u00A0\u0009\-\:]*\|)+\n(?:[\u0020\u00A0\u0009]*\|[^\n]*\|[^\n]*\n)*/;for(let o of t[Ve](Un(n,In))||[])U[Zi](o)||(s(o),t=Vn(o,t,Hi,Bn(e),...i(o)))})(),(()=>{const n=/(([^\n]+\|)*[^\n]+\n)(([\u0020\u00A0\u0009\-\:]+\|)*[\u0020\u00A0\u0009\-\:]+\n)(?:([^\n]+\|)*[^\n]+\n)*/;for(let o of t[Ve](Un(n,In))||[])s(o),t=Vn(o,t,Hi,Bn(e),...i(o))})(),t}function vo(t="",e="",i=Ct,s=!1){t=t[$i](st,en)[$i](nt,sn)[$i](ot,nn)[$i](rt,on)[$i](lt,rn)[$i](at,ln)[$i](ut,an)[$i](ht,un)[$i](ct,hn)[$i](dt,cn)[$i](ft,dn)[$i](pt,fn)[$i](gt,pn)[$i](mt,gn)[$i](yt,mn)[$i](/[\u00A0\u0020]/g," ");let n=[mo,so,po,go,ho,co,oo,ro,ao,uo,yo,io,fo];for(let o of n)(!s||o!==mo&&o!==po&&o!==ho&&o!==oo&&o!==io&&o!==lo)&&(t=o(t,e,i));for(;/\{{2}\w*\-*\w{32}\}{2}/[Zi](t);)for(let e of t[Ve](/\{{2}\w*\-*\w{32}\}{2}/g)||[]){let i=Un(e);t=t[$i](i,Wn[Ce](e))}console.log(t);const o=["h1","h2","h3","h4","h5","h6",Hi,ri,is,di,Ot,"details","hr",Re];for(let e of o){const i=Un(`[  \t]*\\n[  \t]*<${e}`,In),s=Un(`${e}>[  \t]*\\n[  \t]*`,In);t=t[$i](i,`<${e}`)[$i](s,`${e}>`)}return t=t[$i](Un(en,In),"&excl;")[$i](Un(sn,In),"&grave")[$i](Un(nn,In),"&num;")[$i](Un(on,In),"&ast;")[$i](Un(rn,In),"&lowbar;")[$i](Un(ln,In),"&tilde;")[$i](Un(an,In),"&Hat;")[$i](Un(un,In),"&equal;")[$i](Un(hn,In),yn)[$i](Un(cn,In),vn)[$i](Un(dn,In),"&lsqb;")[$i](Un(fn,In),"&rsqb;")[$i](Un(pn,In),"&lpar;")[$i](Un(gn,In),"&rpar;")[$i](Un(mn,In),"&dollar;")[$i](/([\u0020\u00A0\u0009]*\n[\u0020\u00A0\u0009]*){2,}/g,"<br>")}class wo{#t="";#e;#i=!0;#s=!0;#n;#o;#r;#l;#a;#u;#h;deployKey;constructor(n={}){this.#t=(n.defaultContent||"")[ts]();const o=n[ji]||{},r=i(o[Xe]||jt)[ts]()[Ji](),l=s(null==o.fill?1:o.fill)?1:0,a=i(o[ve]||"")[ts]()||"'Roboto Mono', monospace",u=s(null==o.showRow?1:o.showRow)?1:0,h=o.placeholder||{},c=i(h.text||"Type here ..."),d=i(h.color||"#bfbfbf"),f=o.focus||{},p=i(f.backgroundColor||"#0000ff1a"),g=i(f.color||"#0000ffff");e[$e][Lt](Hn(ji,`\n.${ui}{font-family: ${a}}\n.${ui}>div[data-focus="1"]{background-color:${p};color:${g};caret-color:${g}}\n.${ui}>div[data-last="1"]:empty::after{content:"${c}";color:${d} !important;caret-color:${g}}`));const m=e[cs](n[ke]);typeof n[ke]===Li&&null!=m?(this[Ft]=m,m.classList.add(ui)):this[Ft]=Hn(ki+"."+ui),this[Ft][re][Xe]=w&&r===jt||r===oe?oe:"",this[Ft][re].fill=l,this[Ft][re].row=u,this[Ft][re].pin={1:1,0:0,[!0]:1,[!1]:0}[n.tabPin]||0,this[Ft][re].wrap={1:1,0:0,[!0]:1,[!1]:0}[n.wrap]||1,this[Ft][re].saved=1,this[Ft][re].autosave=null==n.autosave?1:0,this.#h=new Co(this[Ft]);const y=this[Ft];if(this.#i=s(null==n.hotKey||n.hotKey),this.#s=s(null==n.autosave||n.autosave),this.#n=n.event||{},null==this.#r&&n[Hs]&&(this.#r=t[ps]("beforeunload",(t=>{t[Fs]()})),e[ps]("keydown",(t=>{("F5"===t[It]||(t.ctrlKey||t.metaKey)&&{r:1,R:1}[t[It]])&&t[Fs]()}))),null!=n[Xe]){let t=i(n[Xe]||jt)[ts]()[Ji]();this[Ft][re][Xe]=w&&t===jt||t===oe?oe:""}if(null!=n.fillMode){let t=s(n.fillMode)?1:0;this[Ft][re].fill=t}if(null!=n.showRow){let t=s(n.showRow)?1:0;this[Ft][re].row=t}if(null!=n[ve]){let t=i(n[ve])[ts]()||"'Roboto Mono', monospace";e[$e][Lt](Hn(ji,`.${ui}{font-family: ${t}}`))}let v=i(n[As]||"")[ts]()||p,b=i(n[Ms]||"")[ts]()||g;e[$e][Lt](Hn(ji,`.${ui}>div[data-focus="1"]{background-color:${v};color:${b}`));let C=i(n[ci]||"")[ts]()||c,A=i(n[Os]||"")[ts]()||d;e[$e][Lt](Hn(ji,`.${ui}>div[data-last="1"]:empty::after{content:"${C}";color:${A}}`)),y.onmousedown=y.onmouseup=y.ontouchend=t=>{if(t.target[Js][Ji]()!==ue)return t[Fs](),!1;this.#c()},y.oncut=t=>(this.#d(),this.#f((e=>{t[Vt][qs]("text/plain",this.#u.body),y[Zt][this.#u.start][Ts]=Kn(this.#u.left+this.#u.right),this.#p(),this.#g(y[Zt][this.#u.start],this.#u.left[ze])})),this.#m(!0,!1),!1),y.onpaste=e=>(this.#d(),this.#f((i=>{const s=((e[Vt]||t[Vt])[_s]("Text")||"")[Ei](/\n/),n=s[ze],o=n-1,r=n>1,l=this.#u.start+o,a=`${r?"":this.#u.left}${s[o]}`[ze],u=s[0],h=r?"":this.#u.right;if(y[Zt][this.#u.start][Ns]=this.#u.left+u+h,this.#p(),r)for(let t=1;t<n;t++){const e=s[t],i=Hn(ue,Kn(`${e}${t===o?this.#u.right:""}`));i[Ls]=t=>this.#c(),y[Ds](i,y[Zt][this.#u.start+t])}this.#g(y[Zt][l],a,a)})),this.#m(!0,!1),!1),y.oninput=t=>{let e,i;if("deleteCompositionText"===t.inputType){e=this.#a.index,i=this.#a.offset;for(let t of[...y[Zt]]){if(t[Es][Ji]()===ue||t[Es][Ji]()===ki)continue;t[Ai]();let s=Hn(ue,{"data-index":e+1,index:e+1});s[Ls]=t=>this.#c(),y[Ds](s,y[Zt][e]),this.#g(y[Zt][e],i)}}t.inputType;let s=this.#a.isMulti,n=this.#a.multi.left,o=t.data,r=this.#a.multi.right,l=this.#a.multi.start.offset;this.#c(),s&&(this.#o[Ns]=n+o+r,this.#g(this.#o,l+1)),this.#m(!0,300)},y.onkeydown=t=>!new Ao({editor:this,hotKey:this.#i,[Hs]:n[Hs],event:t}).preventDefault,y.onkeyup=t=>{"Meta"!==t.key&&"Control"!==t.key&&(y[Zt]&&1===y[Zt][ze]&&y.firstElementChild[Es][Ji]()!==ue&&this[De](null,!0,!1),this.#c(),/^(Arrow(Up|Left|Down|Right)|CapsLock|Shift|Control|Alt|Clear|Escape|F\d+)$/[Zi](t.key)||this.#s&&this.#y())},y.onblur=t=>{this.#d()},this.init()}get viewer(){return this.#l}set viewer(t){this.#l=t}#v(){let t=Hn("button",[Hn("span.material-symbols-outlined","markdown"),"Markdown"]),i=Hn("button",[Hn("span.material-symbols-outlined","html"),"HTML"]),s=Hn("button",[Hn("span.material-symbols-outlined","cancel"),"Cancel"]),n=Hn("div.nanomd-pop",[Hn("strong","Export"),t,i,s]);t[Ls]=t=>{this.download("md"),n.remove()},i[Ls]=t=>{this.download("html"),n.remove()},s[Ls]=t=>{n.remove()},e[Ft][Lt](n)}#c(e,i=!1){this.#d(),this.#a=new bo(this[Ft],e,i);const s=t[Is]();if(s.rangeCount<1)return;const n=s.getRangeAt(0);let o=e||Gn(n.commonAncestorContainer);null!=o&&this.#w(o,this.#a.index||this.#a.multi.end.index)}#f(t){this.#u=new $o(this[Ft],this.#a),t()}#p(){this.#u.removeRows()}#g(i,s,n){const o=this[Ft][zs](ue);for(let t in o){const e=o[t];if(isNaN(p(t)))continue;const i=p(t)+1;e[re][Ne]=i,i===o.length?e[re].last=1:e[re].last=0}if(t[Is]?t[Is]()[de]?t[Is]()[de]():t[Is]()[Ks]&&t[Is]()[Ks]():e[Is]&&e[Is]()[de](),null==i)return;let r=t[Is](),l=e.createRange(),a=s??i[Gt][0][ze],u=n??a;l.selectNode(i),i[Gt][0]?(l[Vs](i[Gt][0],a>i[Gt][0][ze]?i[Gt][0][ze]:a),l[Ws](i[Gt][0],u>i[Gt][0][ze]?i[Gt][0][ze]:u)):(l[Vs](i,0),l[Ws](i,0)),r.addRange(l),this.#c(i)}#w(t,e){const i=ki+"."+Se+"-"+zt;let s=this[Ft][wi](i);t[re][ye]=1,this[Ft][Ds](s,this[Ft][Zt][e+1]),s[re][_e]=0,this.#o=t}#d(){if(!this.#o)return;const t=ki+"."+Se+"-"+zt,e=this[Ft][wi](t);this.#o[re][ye]=0,null!=e&&(this[Ft][Lt](e),e[re][_e]=1),this.#o=null}#b(t){t=Kn(t);let e=this.#C;const i=Hn(ue,t);i[Ls]=t=>this.#c(),e[Ns][ts]()[ze]<1?e[Ts]=t:this[Ft][Lt](i),this[Ft][Gs]=this[Ft][Bs],this[os]&&(this[os][Ft][Gs]=this[os][Ft][Bs])}get#C(){let t=this[Ft].lastElementChild;return"SECTION"===t[Es]&&(t=t.previousElementSibling),t}#A(t,e){const i=this[Ft][Zt][this.#u.start];i[Ts]=Kn(t),this.#p(),this.#g(i,e)}#$(t,e="",i=""){const s=t[Ye]||t[ne]||e===i;this.#a.check?this.#f((t=>{const n=this.#u.left,o=this.#u.body,r=this.#u.right,l=`${n}${s?`<${i}>`:e}${o}${s?`</${i}>`:e}${r}`[$i](/\n/g,""),a=l[ze]-r[ze]-(s?i[ze]+3:e[ze]);this.#A(l,a),this.#m(!0,this.#s)})):(this.#b(s?`<${i}></${i}>`:`${e}${e}`),this.#g(this.#C,s?i[ze]+3:e[ze]),this.#m(!0,this.#s))}#M(t){this.#a.check?this.#f((e=>{const i=this.#u.start,s=this.#u.end;for(let e=i;e<=s;e++){const i=this[Ft][Zt][e];i[Ts]=Kn(`${t} ${i[Ns]}`)}const n=this[Ft][Zt][s],o=n[Ns][ze];this.#g(n,o),this.#m(!0,this.#s)})):(this.#b(t),this.#g(this.#C,t[ze]+1),this.#m(!0,this.#s))}#_(t="",e="",i){if(this.#a.check)return void this.#f((s=>{const n=this.#u.left,o=this.#u.right,r=`${n}${null==i?"":"!"}[${t||i}](${e}) ${o}`[$i](/\n/g,""),l=r[ze]-o[ze]-1;this.#A(r,l),this.#m(!0,this.#s)}));this.#b(`${null==i?"":"!"}[${t||i}](${e})`);const s=this.#C,n=s[Ns][ze];this.#g(s,n),this.#m(!0,this.#s)}#m(t,e){this.#c(),this.#h.add(this.#a,t,"number"==typeof e?e:0),this.unsave(),("boolean"==typeof e&&e||null==e)&&this.#y()}#I(t,i){const s=new d([i],{[es]:"application/octet-stream"}),n=u.createObjectURL(s),o=Hn(Mn,{href:n,download:`NanoMD-${c.now()}.${t}`});e[Ft][Lt](o),o[Mi]()}#y(){this[Ft][re].saved=1,null!=this[os]&&this[os][De]()}init(t,e=!0,s=!0){if(this[Ft][te]=!0,this[Ft][Ts]=null,this.#e=new Mo({editor:this,autosave:this.#s,event:this.#n}),this[Ft][Lt](this.#e.body),(t=i(t||this.#t)[ts]())[ze]){this.#t="";const i=t[$i](/\n*$/,"")[Ei](/\n/);for(let t=0;t<i.length;t++){const e=i[t],s=Hn(ue,{"data-index":t+1,"data-last":t===i.length-1?1:0,"data-focus":0},Kn(e));s[Ls]=t=>this.#c(),this[Ft][Lt](s)}if(!e)return}else{const t=Hn(ue,{"data-index":1,"data-last":1,"data-focus":0});if(t[Ls]=t=>this.#c(),this[Ft][Lt](t),!e)return}s&&(this.#c(),this.#h.add(this.#a,!0))}changeMode(t=Be){this[Ft][re][Xe]=t}selectAll(){this.#d();const t=this[Ft].firstElementChild,e=this.#C,i=window.getSelection(),s=document.createRange();null!=t.firstChild&&(s.setStart(t.firstChild,0),s.setEnd(e.firstChild,e.firstChild.length),i.removeAllRanges(),i.addRange(s))}save(){if(this.#s)if(this.#n[ks]("save")){if(null==this.#n.save)return!1;this.#n.save(this.text)}else this.#v();else if(this.#y(),this.#n[ks]("save")){if(null==this.#n.save)return!1;this.#n.save(this.text)}}unsave(){0!==p(this[Ft][re].saved)&&(this[Ft][re].saved=0,this[os]&&this[os].unsave())}indent(t){if(9!==t.keyCode)return;const e=this[Ft];return this.#f((t=>{e[Zt][this.#u.start][Ts]=Kn(this.#u.left+"    "+this.#u.right),this.#p();const i=this.#u.left[ze]+4;this.#g(e[Zt][this.#u.start],i),this.#m(!0,!1)})),!1}rowIndent(t){const e=this[Ft];return this.#f((t=>{const i=this.#u.start,s=this.#u.end,n=this.#u.start!=this.#u.end;if(this.#d(),n)for(let t=i;t<=s;t++){const i=e[Zt][t][Ts];e[Zt][t][Ts]=Kn("    ")+i}else{const t=e[Zt][i][Ts];e[Zt][i][Ts]=Kn("    ")+t}const o=e[Zt][i][Ts][ze];this.#g(e[Zt][this.#u.start],o),this.#m(!0,!1)})),!1}wrap(t){if(13!==t.keyCode)return;const e=this[Ft];return this.#f((t=>{e[Zt][this.#u.start][Ts]=Kn(this.#u.left),this.#p(),e[js][js][Gs]+=28;const i=Hn(ue,Kn(this.#u.right));i[Ls]=t=>this.#c(),e[Ds](i,e[Zt][this.#u.start+1]),this.#g(e[Zt][this.#u.start+1],0),this.#m(!0,!1)})),!1}backspace(t){if(8!==t.keyCode)return!1;const e=this[Ft];return this.#f((t=>{if(this.#a.isMulti||this.#a.isSingle)e[Zt][this.#u.start][Ts]=Kn(this.#u.left+this.#u.right),this.#p(),this.#g(e[Zt][this.#u.start],this.#u.left[ze]);else if(this.#u.left[ze]){const t=this.#u.left[Ti](0,this.#u.left[ze]-1);e[Zt][this.#u.start][Ts]=Kn(t+this.#u.right),this.#g(e[Zt][this.#u.start],t[ze])}else{if(0===this.#u.start)return;e[Zt][this.#u.start-1][Ts]+=Kn(this.#u.right),e[Zt][this.#u.start][Ai](),e[js][js][Gs]-=28;const t=e[Zt][this.#u.start-1][Ns][ze]-this.#u.right[ze];this.#g(e[Zt][this.#u.start-1],t)}this.#m(!0,!1)})),!1}undo(){this.#d();const t=this.#h.undo();null!=t&&(this[De](t[Qt][ze]<1?null:t[Qt],!1,!1),this.unsave(),this.#g(this[Ft][Zt][t[Ne]],t[oi]),this.#s&&this.#y())}redo(){const t=this.#h.redo();null!=t&&(this[De](t[Qt],!1,!1),this.unsave(),this.#g(this[Ft][Zt][t[Ne]],t[oi]),this.#s&&this.#y())}heading(t,e){const i=t[Ye]||t[ne],s=`${new Array(e).fill("#")[je]("")}${0===e?"":" "}`;this.#a.check?this.#f((t=>{const n=this.#u.left[$i](/^\s*\#*\s*/,""),o=this.#u.body,r=this.#u.right,l=`${i?`<h${e}>`:s}${n}${o}${r}${i?`</h${e}>`:""}`[$i](/\n/g,""),a=l[ze]-(i?5:0);this.#A(l,a),this.#m(!0,this.#s)})):(this.#b(i?`<h${e}></h${e}>`:s),this.#g(this.#C,s[ze]-(i?5:0)),this.#m(!0,this.#s))}bold(t){this.#$(t,"**",_n)}italic(t){this.#$(t,"*",xn)}strikethrough(t){this.#$(t,"~~",Tn)}underline(t){this.#$(t,Nn,Nn)}marker(t){this.#$(t,"==",We)}sup(t){this.#$(t,"^",Fi)}sub(t){this.#$(t,"~",Ri)}code(t){this.#a.check?this.#f((e=>{if(this.#a.isMulti){const t=Hn(ue,"```"),e=Hn(ue,"```");t[Ls]=e[Ls]=t=>this.#c(),this[Ft][Ds](t,this[Ft][Zt][this.#u.end+1]),this[Ft][Ds](e,this[Ft][Zt][this.#u.start]),this.#g(this[Ft][Zt][this.#u.end+1],this[Ft][Zt][this.#u.end+1][Ns][ze]),this.#m(!0,this.#s)}else this.#$(t,"`",Yt)})):this.#$(t,"`",Yt)}blockquote(){this.#a.check?this.#f((t=>{for(let t=this.#u.start;t<=this.#u.end;t++){const e=this[Ft][Zt][t];e[Ts]=Kn(`> ${e[Ns]}`)}const e=this[Ft][Zt][this.#u.end],i=e[Ns][ze];this.#g(e,i),this.#m(!0,this.#s)})):(this.#b("> "),this.#g(this.#C,2),this.#m(!0,this.#s))}ul(){this.#M("-")}ol(){this.#M("1.")}link(t="",e=""){e[ts]()[ze]<1&&t[ts]()[ze]<1||this.#_(t,e)}image(t="",e="",i=""){t[ts]()[ze]<1||this.#_(i,t,e)}clear(){this.init(),this.#y()}download(t="md"){const e={md:"md",html:"html"}[t[Ji]()];if(null==e)return;let i="https://cdn.jsdelivr.net/npm/@pardnchiu/nanomd@1.11.3/dist/NanoMD-output.css";const s="md"===e?this.text[ts]():`<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>NanoMD 輸出</title><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preload" href="${i}" as="style"><link rel="stylesheet" href="${i}"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" as="style"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" /><script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"><\/script></head><body><section class="pd-md-viewer">${vo(`\n${this.text}\n`)}</section></body></html>`;this.#I(e,s)}openfile(t){if(null==t)return void alert("請選擇檔案");this.clear();const e=new FileReader;e.readAsText(t),e.onload=()=>{this[Ft][Ts]=null;const t=e.result[ts]()[$i](/[\u0020\u00A0]/g," ");this.init(t,!1),this.#y()}}get text(){return[...this[Ft][Zt]].map((t=>"SECTION"===t[Es]?"":t[Ns]))[je]("\n")}goBack(){this.undo()}goForward(){this.redo()}addHeading(t,e){this.heading(t,e)}addBold(t){this.bold(t)}addItalic(t){this.italic(t)}addStrikethrough(t){this.strikethrough(t)}addUnderline(t){this.underline(t)}addMarker(t){this.marker(t)}addSup(t){this.sup(t)}addSub(t){this.sub(t)}addCode(t){this.code(t)}addBlockquote(){this.blockquote()}addUl(){this.ul()}addOl(){this.ol()}addLink(t="",e=""){this.link(t,e)}addImage(t="",e="",i=""){this.image(t,e,i)}downloadMd(){this.download("md")}downloadHtml(){this.download("html")}getTxt(){return this.text}}t.PDMarkdownEditor=t.MDEditor=wo;class bo{check=!1;isMulti=!1;isSingle=!0;index;offset;left;right;selection={};multi={};constructor(e,i,n=!1){const o=t[Is]();if(o.rangeCount<1)return;const r=o.getRangeAt(0);let l=i||Gn(r.commonAncestorContainer);if(null==l)return;let a,u,h="";if(n){l=e;const t=l[zs](ue);for(let e=0;e<t.length;e++){const i=t[e];h+=(0==e?"":"\n")+i[Ns]}a=0,u=t[ze]-1}else r.cloneContents()[Gt][we](((t,e)=>{h+=(0==e?"":"\n")+t[Ns]})),l===e&&(a=p(Gn(o.baseNode)[re][Ne])-1,u=p(Gn(o.focusNode)[re][Ne])-1);var c=s(l===e),d=!c&&!n&&s(o[Rt]!==o[$s]),f=!!n||s(o[$s]>o[Rt]),g=!!n||s(a<u);this.check=!0,this.index=c?null:p(l[re][Ne])-1,this.offset=c||d?null:p(o[$s]),this.left=c||d?null:l[Ns][Ti](0,o[$s]),this.right=c||d?null:l[Ns][Ti](o[$s],l[Ns][ze]),this.isSingle=d,this.isMulti=c;const m=d?f?o[Rt]:o[$s]:null,y=d?f?o[$s]:o[Rt]:null;this.selection={body:d?o.toString():h,start:m,end:y,left:d?l[Ns][Ti](0,m):null,right:d?l[Ns][Ti](y,l[Ns][ze]):null};const v=c?g?a:u:null,w=n?0:c?g?o[Rt]:o[$s]:null,b=c?g?u:a:null,C=n?e[Zt][u][Ns][ze]:c?g?o[$s]:o[Rt]:null;this.multi={start:{index:v,offset:w},end:{index:b,offset:C},left:n?"":c?l[Zt][v][Ns][Ti](0,w):null,right:n?"":c?l[Zt][b][Ns][Ti](C,l[Ns][ze]):null}}}class Co{#k;#x;#T=[];#N=[];constructor(t){this.#k=t}add(t,e,i){clearInterval(this.#x),null==i?this.#D(t,e):this.#x=setTimeout((i=>{this.#D(t,e)}),i)}#D(t,e){this.#T[yi]({[Ne]:t[Ne],[oi]:t[oi],[Qt]:[...this.#k[Zt]].filter((t=>"DIV"==t.nodeName)).map((t=>t[Ns]))[je]("\n")}),e&&(this.#N=[])}undo(){const t=this.#T[(this.#T||[])[ze]-2];if(null==t)return;let e=this.#T.pop();return this.#N[yi](e),t}redo(){const t=this.#N.pop();if(null!=t)return this.#T[yi](t),t}}class Ao{#k;#n;#i=!1;preventDefault=!0;#E={"cmd+meta":1};#S={"cmd+b":(t,e)=>t.bold(e),"cmd+i":(t,e)=>t.italic(e),"cmd+shift+x":(t,e)=>t.strikethrough(e),"cmd+u":(t,e)=>t.underline(e),"cmd+m":(t,e)=>t.marker(e),"cmd+k":(t,e)=>t.code(e),"cmd+arrowup":(t,e)=>t.sup(e),"cmd+arrowdown":(t,e)=>t.sub(e)};#L={"cmd+shift+z":(t,e)=>t.redo(),"cmd+r":()=>{},f5:()=>{},"cmd+z":(t,e)=>t.undo(),"cmd+a":(t,e)=>(t.selectAll(),!1),"cmd+s":(t,e)=>(t.save(),!1),tab:(t,e)=>t.indent(e),"cmd+]":(t,e)=>t.rowIndent(e),enter:(t,e)=>t.wrap(e),backspace:(t,e)=>t.backspace(e)};constructor(t={}){this.#k=t[he],this.#n=t.event,this.#i=t.hotKey;const e=this.#P(this.#n);if(!this.#E[ks](e)){if(this.#i&&this.#S[ks](e)){if(!1===this.#S[e](this.#k,this.#n))return;return this.#k[Ft][re].saved=0,void(this.#k[os]&&(this.#k[os][Ft][re].saved=0))}if(this.#L[ks](e)){if(!1===this.#L[e](this.#k,this.#n))return;return this.#k[Ft][re].saved=0,void(this.#k[os]&&(this.#k[os][Ft][re].saved=0))}this.preventDefault=!1}}#P(t){let e="";return(t.metaKey||t.ctrlKey)&&(e+="cmd+"),t.shiftKey&&(e+="shift+"),e+=t.key[Ji](),e}}class $o{editor;body;start;end;left;right;constructor(t,e){let i,s,n,o;this.editor=t,e.isMulti?(i=e.multi.start.index,s=e.multi.end.index,n=e.multi.left,o=e.multi.right):e.isSingle?(i=e.index,s=e.index,n=e.selection.left,o=e.selection.right):null!==e.index&&null!==e.offset&&(i=e.index,s=e.index,n=e.left,o=e.right),this.body=e.selection.body,this.start=p(i),this.end=p(s),this.left=n[$i](/&lt;/g,"<")[$i](/&gt;/g,">")[$i](/&nbsp;/g," "),this.right=o[$i](/&lt;/g,"<")[$i](/&gt;/g,">")[$i](/&nbsp;/g," ")}removeRows(){for(let t=this.end;t>this.start;t--)this.editor[Zt][t][Ai]()}}class Mo{#k;#s;#n;#j;constructor(t={}){this.#k=t.editor,this.#s=s(null==t.autosave||t.autosave),this.#n=t.event||{};const e=ki+"."+Se+"-"+zt,i=parseInt(this.#k[Ft][re].pin||0);this.#k[Ft][re].wrap;let n=this.#k[Ft][wi](e);if(this.#j=/nanomd\.pardn\.io/[Zi](g[Ie]),n)return;const o=[{[ti]:"format_bold",[Yi]:"添加粗體",[Mi]:t=>this.#k.bold(t)},{[ti]:"format_italic",[Yi]:"添加斜體",[Mi]:t=>this.#k.italic(t)},{[ti]:"strikethrough_s",[Yi]:"添加刪除線",[Mi]:t=>this.#k.strikethrough(t)},{[ti]:"format_underlined",[Yi]:"添加底線",[Mi]:t=>this.#k.underline(t)},{[ti]:"ink_marker",[Yi]:"添加高亮",[Mi]:t=>this.#k.marker(t)},{[ti]:"superscript",[Yi]:"添加上標",[Mi]:t=>this.#k.sup(t)},{[ti]:"subscript",[Yi]:"添加下標",[Mi]:t=>this.#k.sub(t)},{[ti]:"format_quote",[Yi]:"添加引用",[Mi]:t=>this.#k.blockquote(t)},{[ti]:"format_list_bulleted",[Yi]:"添加無序列表",[Mi]:t=>this.#k.ul(t)},{[ti]:"format_list_numbered",[Yi]:"添加有序列表",[Mi]:t=>this.#k.ol(t)},{[ti]:"code",[Yi]:"添加代碼塊",[Mi]:t=>this.#k.code(t)},{[ti]:"link",[Yi]:"添加連結",[Mi]:t=>this.#k.link("連結文字","連結")},{[ti]:"landscape",[Yi]:"添加圖片",[Mi]:t=>this.#k.image("圖片連結","圖片名稱")},this.#n&&this.#n.upload?{[ti]:"smb_share",[Yi]:"上傳圖片",[Mi]:async t=>{const e=await this.#n.upload();this.#k.image(e.href??"",e.alt??"測試")}}:null,{},this.#s?null:{[ti]:"autorenew",[Yi]:"儲存並預覽",[Mi]:t=>this.#k.save(t)},{[ti]:i?"keep_off":"keep",[Yi]:"釘選面板",[Mi]:t=>this.#R(t)},{[ti]:"wrap_text",[Yi]:"換行",[Mi]:t=>this.#O()},this.#j?{[ti]:"cloud_upload",[Yi]:"部署",[Mi]:t=>this.#F()}:null].map((t=>{if(null==t)return;if(null==t[ti]){return Hn("span")}let e=Hn("span.material-symbols-outlined",{title:t.title,[ti]:t[ti]},t[ti]);return e.onpointerup=t[Mi],e}));n=Hn(e,o),n[te]=!1,n[re].hide=1,this[Ft]=n}#R(t){const e=t.target,i=p(this.#k[Ft][re].pin||0);this.#k[Ft][re].pin=Math.abs(i-1),e[Ns]=i?"keep":"keep_off",e[Yi]=i?"釘選面板":"取消釘選"}#O(){const t=p(this.#k[Ft][re].wrap||1);this.#k[Ft][re].wrap=Math.abs(t-1)}async#F(){this.#k[Ft][Lt](this[Ft]),this[Ft][re][_e]=1;const e=new URL(location.href),i=navigator.language||navigator.userLanguage;let s=e.searchParams.get("lang"),n=/^zh/i.test(i);null!=s&&(n=/^zh/i.test(s)),null==this.#k.deployKey&&(this.#k.deployKey=Date.now()+"."+Fn(16)),fetch("https://nanomd-deploy.pardn.workers.dev/",{method:"POST",headers:{"Content-Type":"application/json"},[Ft]:r[kt]({[It]:this.#k.deployKey,[ss]:vo(`\n${this.#k.text}\n`)})[ts]()[$i](/[\u2028\u2029]/g,"")}).then((t=>t.text())).then((async e=>{confirm(n?"已成功部署並複製連結\n開啟頁面?":"Deployment successful and link copied.\nOpen the page?")&&t.open("https://nanomd-cloud.pardn.workers.dev/"+e)})).catch((t=>alert("Error:"+t.message)))}}t.MDParser=class{#H=!0;#z="";#K="";constructor(t={}){this.#H=t.standard??!0,this.#z=t.text??""}parse(t){return t=t??this.#z,this.#K=vo(`\n${t}\n`,null,null,this.#H),this.#K}};class _o{tag="";props={};children=[];data=null;constructor(t){if(t[Js][Ji]()===_i){let i=!1;for(const s of e[$e][zs](_i)||[])if(null!=t[Si]&&s[Si]===t[Si]||null!=t[qi]&&s[qi]===t[qi]){i=!0;break}i||e[$e][Lt](t),this[zi]=_i}this[zi]=t[Js][Ji](),this[fi]=[...t.attributes].reduce(((t,e)=>(t[e[ti]]=e[ss][ts](),t)),{}),this[Zt]=function(t){return n[be](t[Gt]).filter((t=>t[Dt]===h[Nt]||t[Dt]===h[Tt]&&t[qi]&&t[qi][ts]()[ze]>0))}(t)[qe]((t=>t.nodeType===Node[Nt]?new _o(t):t[qi]||""))}getPatches(t){return this.#B(t,this)}#B(t,e,i=[]){if(null==t&&e)return[{[es]:$n.create,[Ne]:i,[hs]:e}];if(t&&!e)return[{[es]:$n.remove,[Ne]:i}];if(!t&&!e)return[];if(t.tag!==e.tag)return[{[es]:$n[$i],[Ne]:i,[hs]:e}];const s=[];return s[yi](...this.#U(t,e,i)),s[yi](...this.#G(t,e,i)),s}#U(t,e,i=[]){if(null==t||"string"==typeof t||null==e||"string"==typeof e)return[];const s=[],n=t[fi]||{},r=o[xt](n)[ze],l=e[fi]||{},a=o[xt](l)[ze];if(a>0)for(let t in l){const n=l[t];s[yi]({[es]:$n.prop,[hs]:e,key:t,value:n,[Ne]:i})}if(r>0){if(a<1)for(let t in n)s[yi]({[es]:$n.prop,[hs]:e,key:t,[ss]:null,[Ne]:i});for(let t in l)a>0&&!(t in l)&&s[yi]({[es]:$n.prop,[hs]:e,key:t,[ss]:null,[Ne]:i})}return s}#G(t,e,i=[]){if(null==t||"string"==typeof t||null==e||"string"==typeof e)return[];const s=[],o=n[Pe](t[Zt])?t[Zt]:[],r=n[Pe](e[Zt])?e[Zt]:[],a=l.max(o[ze],r[ze]);for(let t=0;t<a;t++){const n=o[t],l=r[t],a=i.concat(t);if("string"==typeof n&&"string"==typeof l){if(n===l)continue;s[yi]({[es]:$n.text,[hs]:e,[ss]:l,[Ne]:a})}else null==n?s[yi]({[es]:$n.append,[hs]:l,[Ne]:a}):null==l?s[yi]({[es]:$n.remove,index:a}):s[yi](...this.#B(n,l,a))}return s}}t.PDMarkdownViewer=t.MDViewer=class{body;vbody;#Z;#q="";#W=300;#V=0;#Y;#J;#k;constructor(t={}){if((fe in t||di in t)&&(this.#q=String(t[fe]||t[di]||"")[ts]()),ji in t){t[ji]}const n=t[ji]||{},o=i(n[Xe]||jt)[ts]()[Ji](),r=s(null==n.fill?1:n.fill)?1:0,l=i(n[ve]||"")[ts]()||"sans-serif",a=t.sync||{};this.#W=p(null==a[le]?300:a[le])||300,this.#V=s(a[Ii]||0)?1:0,this[he]=a[he]instanceof wo?a[he]:null,e[$e][Lt](Hn(ji,`.${hi}{font-family: ${l}}`));const u=document[cs](t[ke]);typeof t[ke]===Li&&null!=u?(this[Ft]=u,u.classList.add(hi)):this[Ft]=Hn(ki+"."+hi),this[Ft][re][Xe]=w&&o===jt||o===oe?oe:"",this[Ft][re].fill=r,this[Ft][re].sync=null==this[he]?0:1,this[Ft][re].autosave=null==this[he]?1:this[he][Ft][re].autosave;const h=t.hashtag||{};if(this.#Y=i(h.path||"")[ts](),this.#J=i(h[Ki]||"")[ts](),null!=t.fillMode){let e=s(t.fillMode)?1:0;this[Ft][re].fill=e}if(null!=t[le]&&(this.#W=p(t[le])||300),null!=t[Us]&&(this.#V=s(t[Us])?1:0),null!=t[ve]){let s=i(t[ve])[ts]()||"'Noto Sans TC', sans-serif";e[$e][Lt](Hn(ji,`.${hi}{font-family: ${s}}`))}null!=t[Xs]&&(this.#Y=i(t[Xs]||"")[ts]()),null!=t[Qs]&&(this.#J=i(t[Qs]||"")[ts]()),this.vbody=new _o(this[Ft]),this.init()}get editor(){return this.#k}set editor(t){this.#k&&(this.#k[Ft][Ps]=null),null!=t&&(this.#k=t,this.#k.viewer=this,this.#V&&null!=this.#k&&(this.#k[Ft][Ps]=t=>{this[Ft][Gs]+=t.deltaY}))}#X(){if(null==this.#k)return"";const t=[...this.#k[Ft][zs](ue)];let e="";for(let s of t){var i=s[Ns][$i](/[\u00A0\u0020]/g," ");i[ts]()[ze]<1?e+="\n":e+=i+"\n"}return e[ts]()}clear(){let t=this[Ft].cloneNode(!0);t[Ts]="";let e=new _o(t);this[Ft][Ts]="",this.vbody=e}unsave(){0!==p(this[Ft][re].saved)&&(this[Ft][re].saved=0)}init(e=""){this[Ft][re].saved=1;let i=this.#q,s=this[Ft][Gs];t[Wt](this.#Z),this.#Z=t[Ys]((()=>{if(t[Wt](this.#Z),i&&this[Ft][Ts]&&i===this[Ft][Ts])return;let n=e||this.#X()||i;n=vo(`\n${n}\n`,this.#Y,this.#J);let o=Hn(Gi);for(let t of[...Hn(ue,n)[Gt]])o[Lt](t);this[Ft].replaceChildren(o);for(let e of[...this[Ft][zs](zt+"."+ie)])e[Ls]=async e=>{t[Wt](jn);const i=e[Ki][js],s=i[ys],n=i[Zt][0][Ns];try{await navigator.clipboard.writeText(n),s[Et](Oi),jn=t[Ys]((t=>{s[Ai](Oi)}),1e3)}catch(t){console[pe](t),s[Et](pe)}};let r=setInterval((()=>{null!=PR&&(clearInterval(r),this[Ft][Gs]=s,PR.prettyPrint())}),50)}),this.#W)}changeMode(t=Be){this[Ft][re][Xe]=t}#Q(t,e){if(null!=t&&n[Pe](e)){this.#tt(t,e);for(const i of e){const{index:e}=i,s=r.parse(r[kt](e||[]));let n;i.type===$n.append&&(n=s?.pop());const o=s?this.#et(t,s):t;o&&(i.type===$n.create&&hs in i?this.#it(o,i):i.type===$n.replace&&hs in i&&null!=o[Rs]?this.#st(o,i):i.type===$n.append&&hs in i&&null!=n?this.#nt(o,i,n):i.type===$n.prop&&It in i&&ss in i&&o instanceof Element?this.#ot(o,i.key,i.value||"",i[hs]):i.type===$n.text&&ss in i&&o.nodeType===h[Tt]&&(o[qi]=i.value||""))}}}#tt(t,e){const i=e.filter((t=>t.type===$n.remove)).sort(((t,e)=>{const i=(e.index.length||0)-(t.index.length||0);if(0!==i)return i;for(let i=0;i<(t.index.length||0);i++)if((t.index[i]||0)!==(e.index[i]||0))return(e.index[i]||0)-(t.index[i]||0);return 0}));for(const e of i){const i=this.#et(t,e.index);null!=i&&null!=i[Rs]&&i[Rs].removeChild(i)}}#it(t,i){if(i.type!==$n.create||!(hs in i))return;const s="string"==typeof i[hs]?e[bs](i[hs]):this.#rt(i[hs]);null!=t[js]&&t[js][Lt](s)}#st(t,i){if(i.type!==$n.replace||!(hs in i)||null==t[Rs])return;const s="string"==typeof i[hs]?e[bs](i[hs]):this.#rt(i[hs]);if(t[Rs].replaceChild(s,t),!(s instanceof Text||"string"==typeof i[hs])){for(const t in i[hs][fi])this.#ot(s,t,i[hs][fi][t]||"",i[hs]);this.#lt(i[hs],s)}}#nt(t,i,s){if(i.type!==$n.append||!(hs in i)||null==s)return;const n="string"==typeof i[hs]?e[bs](i[hs]):this.#rt(i[hs]);if(s+1>t[Zt][ze]?t[Lt](n):t.insertBefore(n,t[Zt][s+1]),"string"!=typeof i[hs]){for(const[e,n]of o.entries(i[hs][fi]))this.#ot(t[Zt][s],e,n||"",i[hs]);this.#lt(i[hs],t[Zt][s])}}#ot(t,e,i,s){null==i?t[_removeAttribute](e):null!=t&&t[Zs](e,i)}#lt(t,e){if("string"==typeof t)return;let i=-1;for(const s in t.children){const n=t.children[+s];if(i++,"string"==typeof n){i--;continue}if(null==e)continue;const r=e.children[i];for(const[t,e]of o.entries(n[fi]))this.#ot(r,t,e||"",n);this.#lt(n,r)}}#et(t,e){let i=t,s=n.from(i.childNodes).filter((t=>t.nodeType===h[Nt]||t.nodeType===h[Tt]&&""!==t[qi]?.trim()))||[];for(const t of e)i=s[t],null!=i&&(s=n.from(i.childNodes).filter((t=>t.nodeType===h[Nt]||t.nodeType===h[Tt]&&""!==t[qi]?.trim()))||[]);return i}#rt(t){const i=e.createElement(t.tag);if(t[fi])for(const[e,s]of o.entries(t[fi]))e[_t](":")||e[_t]("@")||void 0!==s&&i[Zs](e,s);for(const s of t[Zt])"string"==typeof s?i[Lt](e[bs](s)):i[Lt](this.#rt(s));return i}}}("undefined"==typeof window?window={}:window);